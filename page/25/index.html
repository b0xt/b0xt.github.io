<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="sobyte is a comprehensive site that keeps up with new technologies and news on the Internet, covering mainly Golang, kubernetes, containers, and various other areas of experience tutorials." /><meta name="keywords" content="golang, kubernetes, python, javascript, linux, java, docker, rust" />






<meta name="generator" content="Hugo 0.101.0 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/" />
  <link href="https://www.sobyte.net/index.xml" rel="alternate" type="application/rss+xml" title="SoByte" />
  <link href="https://www.sobyte.net/index.xml" rel="feed" type="application/rss+xml" title="SoByte" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">


<meta property="og:title" content="SoByte" />
<meta property="og:description" content="sobyte is a comprehensive site that keeps up with new technologies and news on the Internet, covering mainly Golang, kubernetes, containers, and various other areas of experience tutorials." />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://www.sobyte.net/" />

<meta itemprop="name" content="SoByte">
<meta itemprop="description" content="sobyte is a comprehensive site that keeps up with new technologies and news on the Internet, covering mainly Golang, kubernetes, containers, and various other areas of experience tutorials."><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="SoByte"/>
<meta name="twitter:description" content="sobyte is a comprehensive site that keeps up with new technologies and news on the Internet, covering mainly Golang, kubernetes, containers, and various other areas of experience tutorials."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SOBYTE</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SOBYTE</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <section id="posts" class="posts">
    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/2022-07/nslookup/">Linux nslookup command</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-07-01 12:30:04 </span>
      <div class="post-category">
          <a href="/categories/tutorials/"> tutorials </a>
          </div>
        <span class="more-meta"> 226 words </span>
        <span class="more-meta"> 2 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      We often check the DNS information of an IP or domain name at work to see which machine the current IP is bound to, or if the current domain name resolves properly. This is where the nslookup command comes into play.
Command Details The nslookup command is mainly used to query the DNS information of a domain name. nslookup has two working modes: &ldquo;interactive mode&rdquo; and &ldquo;non-interactive mode&rdquo;. Enter nslookup directly in the command line, and you will enter the interactive mode without entering any parameters.
    </div>
    <div class="read-more">
      <a href="/post/2022-07/nslookup/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/2022-07/cilium-masquerading/">Cilium Masquerading Troubleshooting</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-07-01 12:13:26 </span>
      <div class="post-category">
          <a href="/categories/tutorials/"> tutorials </a>
          </div>
        <span class="more-meta"> 1238 words </span>
        <span class="more-meta"> 6 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      Background When upgrading cilium v1.8.1 to v1.11.1, the business pod reported a mysql authorization error, and after checking, we found that the clientIP of mysql server is the nodeIP of the business pod, not the default podIP, because mysql server only authorized the current K8s cluster The mysql server only authorizes the pod cidr of the current K8s cluster, so it reports an authorization error.
The contradiction is that when using cilium v1.
    </div>
    <div class="read-more">
      <a href="/post/2022-07/cilium-masquerading/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/2022-06/node-port/">Side effects of nodePort</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-06-30 13:37:28 </span>
      <div class="post-category">
          <a href="/categories/tutorials/"> tutorials </a>
          </div>
        <span class="more-meta"> 713 words </span>
        <span class="more-meta"> 4 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      Problem phenomenon One day I encountered a problem: when accessing a web service, some requests failed, and Connection Refused was returned.
For some reason, the web service is a hostNetwork type, which is the same network namespace as the host, and when I logged into Node, I could see that the listening socket was still there, but when I made a direct curl request, it returned Connection Refused.
Why? Usually Connection Refused means that the listening socket is not open and the corresponding port number is not opened, the kernel will return icmp-port-unreachable, but now it is obvious that the port is open.
    </div>
    <div class="read-more">
      <a href="/post/2022-06/node-port/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/2022-06/go-arr-nil/">Is Golang&#39;s empty array nil?</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-06-30 13:29:20 </span>
      <div class="post-category">
          <a href="/categories/tutorials/"> tutorials </a>
          </div>
        <span class="more-meta"> 293 words </span>
        <span class="more-meta"> 2 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      When reading kubernetes code, sometimes you will see some code compares arrays to nil.
1 2 3 4 5 6 7 8 9 // bindAPIUpdate gets the cached bindings and PVCs to provision in podBindingCache // and makes the API update for those PVs/PVCs. func (b *volumeBinder) bindAPIUpdate(podName string, bindings []*bindingInfo, claimsToProvision []*v1.PersistentVolumeClaim) error { if bindings == nil { return fmt.Errorf(&#34;failed to get cached bindings for pod %q&#34;, podName) } if claimsToProvision == nil { return fmt.
    </div>
    <div class="read-more">
      <a href="/post/2022-06/go-arr-nil/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/2022-06/nginx-ingress-maximumopenfile/">Tracing nginx ingress maximum open file count issue</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-06-30 13:06:53 </span>
      <div class="post-category">
          <a href="/categories/tutorials/"> tutorials </a>
          </div>
        <span class="more-meta"> 1899 words </span>
        <span class="more-meta"> 4 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      Problem phenomenon Our kubernetes ingress controller is using ingress-nginx from kubernetes and we recently encountered a &quot; Too many open files&quot; problem. 1 2 3 2019/09/19 09:47:56 [warn] 26281#26281: *97238945 a client request body is buffered to a temporary file /var/lib/nginx/body/0000269456, client: 1.1.1.1, server: xxx.ieevee.com, request: &#34;POST /api/v1/xxx HTTP/1.1&#34;, host: &#34;xxx.ieevee.com&#34; 2019/09/19 09:47:56 [crit] 26281#26281: accept4() failed (24: Too many open files) 2019/09/19 09:47:56 [crit] 26281#26281: *97238948 open() &#34;/var/lib/nginx/body/0000269457&#34; failed
    </div>
    <div class="read-more">
      <a href="/post/2022-06/nginx-ingress-maximumopenfile/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/2022-06/prometheus-disappearing/">The disappearing Prometheus indicator</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-06-30 12:38:05 </span>
      <div class="post-category">
          <a href="/categories/tutorials/"> tutorials </a>
          </div>
        <span class="more-meta"> 1931 words </span>
        <span class="more-meta"> 10 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      Problem phenomenon We have some GPU machines and need to count GPU related information, the data is taken from Prometheus, but one day we suddenly found that some labels of some GPU node metrics are empty.
Here are the metrics of normal nodes.
1 container_accelerator_duty_cycle{acc_id=&#34;GPU-d8384090-81d2-eda5-ed02-8137eb037460&#34;,container_name=&#34;nvidia-device-plugin-ctr&#34;,endpoint=&#34;https-metrics&#34;,id=&#34;/kubepods/besteffort/podd917e00f-a779-11e9-b971-6805ca7f5b2a/38a5decf96e9f007fcb0059d79017ea3b3c29ff4c9a81b7fec86cf63c06baf53&#34;,image=&#34;sha256:7354b8a316796fba0463a68da79d79eb654d741241ca3c4f62a1ef24d8e11718&#34;,instance=&#34;10.0.0.1:10250&#34;,job=&#34;kubelet&#34;,make=&#34;nvidia&#34;,model=&#34;Tesla P40&#34;,name=&#34;k8s_nvidia-device-plugin-ctr_nvidia-device-plugin-daemonset-sn2cg_lambda_d917e00f-a779-11e9-b971-6805ca7f5b2a_1&#34;,namespace=&#34;ieevee&#34;,node=&#34;x1.ieevee.com&#34;,pod_name=&#34;nvidia-device-plugin-daemonset-sn2cg&#34;,service=&#34;kubelet&#34;} 0 Here are the metrics of the exception node.
1 container_accelerator_duty_cycle{acc_id=&#34;GPU-a7b535d0-d6ca-022c-5b23-1bff863646a4&#34;,container_name=&#34;&#34;,endpoint=&#34;https-metrics&#34;,id=&#34;/kubepods/besteffort/pod8bb25662-de9a-11e9-84e7-f8f21e04010c/cde3858becb05366e71f230e876204be586662f274dcb4a6e2b75ea404f2d5a9&#34;,instance=&#34;10.0.0.2:10250&#34;,job=&#34;kubelet&#34;,make=&#34;nvidia&#34;,model=&#34;Tesla V100-PCIE-16GB&#34;,name=&#34;&#34;,namespace=&#34;&#34;,pod_name=&#34;&#34;} You can see that the data taken out by Prometheus, the container_name, name, namespace, and pod_name in the label are all empty.
    </div>
    <div class="read-more">
      <a href="/post/2022-06/prometheus-disappearing/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/2022-06/k8s-shared-memory/">Setting up the shared memory of a kubernetes Pod</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-06-30 12:14:49 </span>
      <div class="post-category">
          <a href="/categories/tutorials/"> tutorials </a>
          </div>
        <span class="more-meta"> 3370 words </span>
        <span class="more-meta"> 16 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      Problem description Users can use shared memory to do some for communication (vs golang&rsquo;s &ldquo;Shared memory by communication&rdquo;). On a kvm or physical machine, the size of shared memory available to the user is about half of the total memory. Below is the shared memory on my pve machine, /dev/shm is the size of the shared memory.
1 2 3 4 5 6 7 8 root@pve:~# free -h total used free shared buff/cache available Mem: 47Gi 33Gi 3.
    </div>
    <div class="read-more">
      <a href="/post/2022-06/k8s-shared-memory/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/2022-06/k8s-access-pods/">How to access Kubernetes Pods from outside the cluster</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-06-29 13:40:57 </span>
      <div class="post-category">
          <a href="/categories/tutorials/"> tutorials </a>
          </div>
        <span class="more-meta"> 1566 words </span>
        <span class="more-meta"> 8 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      A pod running on a kubernetes cluster is easy to access from within the cluster, most simply, through the pod&rsquo;s ip, or through the corresponding svc. However, outside the cluster, the pod ip of the flannel-based kubernetes cluster is not accessible from outside the cluster because it is an internal address.
To solve this problem, kubernetes provides several methods as follows.
hostNetwork: true When hostNetwork is true, the container will use the network of the host node, so the container&rsquo;s services can be accessed from outside the cluster as node-ip + port, as long as you know which node the container is running on.
    </div>
    <div class="read-more">
      <a href="/post/2022-06/k8s-access-pods/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/2022-06/k8s-dns-rebind/">Secure access to Homelab services with Kubernetes Ingress &#43; LetEncrypt</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-06-29 13:32:23 </span>
      <div class="post-category">
          <a href="/categories/tutorials/"> tutorials </a>
          </div>
        <span class="more-meta"> 555 words </span>
        <span class="more-meta"> 3 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      Requirements Overview Previously, some services hosted on Kubernetes at home, such as portal, emby, weave scope, etc., were accessed using service ip, which was slightly troublesome to access, mainly because the ip had to be remembered.
Kubernetes provides Ingress to solve the problem of load balancer type service (vip consumption, L7 load feature, etc.).
For this requirement, you can set up pan domain on godaddy with type A, for example *.
    </div>
    <div class="read-more">
      <a href="/post/2022-06/k8s-dns-rebind/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/2022-06/k8s-election/">In-depth analysis of the election mechanism in kubernetes</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-06-29 13:08:24 </span>
      <div class="post-category">
          <a href="/categories/tutorials/"> tutorials </a>
          </div>
        <span class="more-meta"> 3461 words </span>
        <span class="more-meta"> 7 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      Overview In Kubernetes, kube-controller-manager, kube-scheduler, and the underlying implementation of controller-rumtime using Operator all support leader election in highly available systems. This article will focus on understanding how the leader election in controller-rumtime (the underlying implementation is client-go) is implemented in the kubernetes controller. Background When running kube-controller-manager, there are some parameters provided to cm for leader election, you can refer to the official documentation parameters to understand the parameters.
    </div>
    <div class="read-more">
      <a href="/post/2022-06/k8s-election/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    </section>
  
  <nav class="pagination">
    <a class="prev" href="/page/24/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text">Prev</span>
      </a>
    <a class="next" href="/page/26/">
        <span class="next-text">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
  </nav>
        </div>
        

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>



<script type="text/javascript" src="/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>








</body>
</html>
