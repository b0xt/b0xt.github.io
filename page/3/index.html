<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="sobyte is a comprehensive site that keeps up with new technologies and news on the Internet, covering mainly Golang, kubernetes, containers, and various other areas of experience tutorials." /><meta name="keywords" content="golang, kubernetes, python, javascript, linux, java, docker, rust" />






<meta name="generator" content="Hugo 0.96.0 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/" />
  <link href="https://www.sobyte.net/index.xml" rel="alternate" type="application/rss+xml" title="SoByte" />
  <link href="https://www.sobyte.net/index.xml" rel="feed" type="application/rss+xml" title="SoByte" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">


<meta property="og:title" content="SoByte" />
<meta property="og:description" content="sobyte is a comprehensive site that keeps up with new technologies and news on the Internet, covering mainly Golang, kubernetes, containers, and various other areas of experience tutorials." />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://www.sobyte.net/" />

<meta itemprop="name" content="SoByte">
<meta itemprop="description" content="sobyte is a comprehensive site that keeps up with new technologies and news on the Internet, covering mainly Golang, kubernetes, containers, and various other areas of experience tutorials."><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="SoByte"/>
<meta name="twitter:description" content="sobyte is a comprehensive site that keeps up with new technologies and news on the Internet, covering mainly Golang, kubernetes, containers, and various other areas of experience tutorials."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SOBYTE</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SOBYTE</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <section id="posts" class="posts">
    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/2022-06/k8s-access-pods/">How to access Kubernetes Pods from outside the cluster</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-06-29 13:40:57 </span>
      <div class="post-category">
          <a href="/categories/tutorials/"> tutorials </a>
          </div>
        <span class="more-meta"> 1442 words </span>
        <span class="more-meta"> 7 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      A pod running on a kubernetes cluster is easy to access from within the cluster, most simply, through the pod&rsquo;s ip, or through the corresponding svc. However, outside the cluster, the pod ip of the flannel-based kubernetes cluster is not accessible from outside the cluster because it is an internal address.
To solve this problem, kubernetes provides several methods as follows.
hostNetwork: true When hostNetwork is true, the container will use the network of the host node, so the container&rsquo;s services can be accessed from outside the cluster as node-ip + port, as long as you know which node the container is running on.
    </div>
    <div class="read-more">
      <a href="/post/2022-06/k8s-access-pods/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/2022-06/k8s-dns-rebind/">Secure access to Homelab services with Kubernetes Ingress &#43; LetEncrypt</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-06-29 13:32:23 </span>
      <div class="post-category">
          <a href="/categories/tutorials/"> tutorials </a>
          </div>
        <span class="more-meta"> 534 words </span>
        <span class="more-meta"> 3 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      Requirements Overview Previously, some services hosted on Kubernetes at home, such as portal, emby, weave scope, etc., were accessed using service ip, which was slightly troublesome to access, mainly because the ip had to be remembered.
Kubernetes provides Ingress to solve the problem of load balancer type service (vip consumption, L7 load feature, etc.).
For this requirement, you can set up pan domain on godaddy with type A, for example *.
    </div>
    <div class="read-more">
      <a href="/post/2022-06/k8s-dns-rebind/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/2022-06/k8s-election/">In-depth analysis of the election mechanism in kubernetes</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-06-29 13:08:24 </span>
      <div class="post-category">
          <a href="/categories/tutorials/"> tutorials </a>
          </div>
        <span class="more-meta"> 3461 words </span>
        <span class="more-meta"> 7 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      Overview In Kubernetes, kube-controller-manager, kube-scheduler, and the underlying implementation of controller-rumtime using Operator all support leader election in highly available systems. This article will focus on understanding how the leader election in controller-rumtime (the underlying implementation is client-go) is implemented in the kubernetes controller. Background When running kube-controller-manager, there are some parameters provided to cm for leader election, you can refer to the official documentation parameters to understand the parameters.
    </div>
    <div class="read-more">
      <a href="/post/2022-06/k8s-election/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/2022-06/go-func-caller/">How to get the caller&#39;s function name, filename, and line number in a Go function</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-06-29 12:55:14 </span>
      <div class="post-category">
          <a href="/categories/tutorials/"> tutorials </a>
          </div>
        <span class="more-meta"> 872 words </span>
        <span class="more-meta"> 5 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      Background When we add business logs to our application code, regardless of the level of logging, in addition to the information that we actively pass to Logger for it to log, it is also very important to know which function printed the line and where it is located, otherwise it is likely to be like looking for a needle in a haystack when troubleshooting.
For logging, it is important to record the function name and line number of the caller of the Logger method.
    </div>
    <div class="read-more">
      <a href="/post/2022-06/go-func-caller/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/2022-06/logql/">Usage of Grafana Loki Query Language LogQL</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-06-29 12:15:56 </span>
      <div class="post-category">
          <a href="/categories/tutorials/"> tutorials </a>
          </div>
        <span class="more-meta"> 3961 words </span>
        <span class="more-meta"> 19 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      Inspired by PromQL, Loki also has its own query language, called LogQL, which is like a distributed grep that aggregates views of logs. Like PromQL, LogQL is filtered using tags and operators, and has two main types of query functions.
 Query to return log line contents Calculating relevant metrics in the log stream by filtering rules  Log queries A basic log query consists of two parts.
 log stream selector log pipeline  Due to the design of Loki, all LogQL queries must contain a Log Stream selector.
    </div>
    <div class="read-more">
      <a href="/post/2022-06/logql/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/2022-06/nginx-process-auto/">How to automatically set worker_processes for nginx containers</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-06-28 13:42:39 </span>
      <div class="post-category">
          <a href="/categories/tutorials/"> tutorials </a>
          </div>
        <span class="more-meta"> 834 words </span>
        <span class="more-meta"> 4 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      Problem description When containerizing nginx, there is a common problem: How do I automatically set the number of nginx worker processes?
In the nginx.conf configuration file of the official nginx container image, there is a worker process configuration.
1  worker_processes 1;   It will configure nginx to start only 1 worker. this works well when the nginx container is 1 core.
When we want nginx to give a higher configuration, for example 4c or 16c, we need to make sure that nginx can also start the corresponding number of worker processes.
    </div>
    <div class="read-more">
      <a href="/post/2022-06/nginx-process-auto/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/2022-06/docker-credential/">Encrypt and save the docker login password</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-06-28 13:30:28 </span>
      <div class="post-category">
          <a href="/categories/tutorials/"> tutorials </a>
          </div>
        <span class="more-meta"> 461 words </span>
        <span class="more-meta"> 3 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      When using a image repository in an enterprise, you usually need to enable authentication, and the authentication credentials may be a common account for users in the enterprise. However, after docker login, the username and password after base64 will be saved in .docker/config.json, so that on some servers used by many people, there will be a problem of account leakage.
Is there a solution for this?
docker provides credentials store, which means that passwords are stored in an external credentials store.
    </div>
    <div class="read-more">
      <a href="/post/2022-06/docker-credential/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/2022-06/no-cached-connection/">A problem caused by a Go upgrade :&#34; http2: no cached connection was available&#34;</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-06-28 13:18:04 </span>
      <div class="post-category">
          <a href="/categories/tutorials/"> tutorials </a>
          </div>
        <span class="more-meta"> 1813 words </span>
        <span class="more-meta"> 9 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      Direct phenomenon: I compiled kube-controller-manager with Go 1.13, and after running it for a while, I found that the controller did not work, and when I checked the logs, I found that it printed &ldquo;http2: no cached connection was available &ldquo;.
1 2 3 4 5 6 7  I0328 09:48:59.925056 1 round_trippers.go:383] GET https://10.220.14.10:8443/api/v1/namespaces/kube-system/endpoints/kube-controller-manager I0328 09:48:59.925085 1 round_trippers.go:390] Request Headers: I0328 09:48:59.925094 1 round_trippers.go:393] User-Agent: kube-controller-manager/v1.11.1 (linux/amd64) kubernetes/b1b2997/leader-election I0328 09:48:59.
    </div>
    <div class="read-more">
      <a href="/post/2022-06/no-cached-connection/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/2022-06/show-file-deleted/">Find and delete large files that have been opened but deleted</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-06-28 13:12:18 </span>
      <div class="post-category">
          <a href="/categories/tutorials/"> tutorials </a>
          </div>
        <span class="more-meta"> 319 words </span>
        <span class="more-meta"> 2 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      In the daily operation and maintenance process, we often need to deal with disk space issues, when we receive alarms, the first time we will go to find those large files, generally such as centos, the large file may be /var/log/messages.
But sometimes, there is a situation where you can&rsquo;t find the big files, and when you look for them by du, the size of the statistics doesn&rsquo;t correspond to the space occupied by df.
    </div>
    <div class="read-more">
      <a href="/post/2022-06/show-file-deleted/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    <article class="post">
  <header class="post-header">
    <h1 class="post-title"><a class="post-link" href="/post/2022-06/k8s-pod-node/">How to set up a Pod to run on a specific node</a></h1>
    <div class="post-meta">
      <span class="post-time"> 2022-06-28 12:48:37 </span>
      <div class="post-category">
          <a href="/categories/tutorials/"> tutorials </a>
          </div>
        <span class="more-meta"> 1285 words </span>
        <span class="more-meta"> 7 mins read </span>
    </div>
  </header>
  
  <div class="post-content">
    <div class="post-summary">
      1. Specify the Node by nodeSelector when creating the load   Add a label to the node
1  kubectl label node node2 project=A     Specify the nodeSelector to create the workload
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  cat &lt;&lt;EOF | kubectl apply -f - apiVersion: apps/v1 kind: Deployment metadata: name: nginx-nodeselector spec: replicas: 1 selector: matchLabels: app: nginx-nodeselector template: metadata: labels: app: nginx-nodeselector spec: nodeSelector: project: A containers: - name: nginx image: nginx EOF     View Workload
    </div>
    <div class="read-more">
      <a href="/post/2022-06/k8s-pod-node/" class="read-more-link">Read more...</a>
    </div>
  </div>
</article>

    </section>
  
  <nav class="pagination">
    <a class="prev" href="/page/2/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text">Prev</span>
      </a>
    <a class="next" href="/page/4/">
        <span class="next-text">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
  </nav>
        </div>
        

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>



<script type="text/javascript" src="/js/main.min.64437849d125a2d603b3e71d6de5225d641a32d17168a58106e0b61852079683.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
