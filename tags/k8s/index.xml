<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>k8s on SoByte</title>
    <link>https://www.sobyte.net/tags/k8s/</link>
    <description>Recent content in k8s on SoByte</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Fri, 15 Jul 2022 12:45:25 +0800</lastBuildDate><atom:link href="https://www.sobyte.net/tags/k8s/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Troubleshoot client-go informer cache invalidation issue</title>
      <link>https://www.sobyte.net/post/2022-07/client-go-informer/</link>
      <pubDate>Fri, 15 Jul 2022 12:45:25 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/client-go-informer/</guid>
      <description>Background Elastic Cloud online services have long been plagued by cache inconsistency. The occurrence of cache inconsistency is usually accompanied by the upgrade or restart of the kube-apiserver. When cache inconsistency occurs, the user side can perceive it more obviously, and the problem can cause online service failure when it is serious. The common failures are as follows. Platform data inconsistency: Pod status is normal at one time and abnormal</description>
    </item>
    
    <item>
      <title>K8s choose cgroupfs or systemd?</title>
      <link>https://www.sobyte.net/post/2022-07/k8s-cgroupfs-or-syste/</link>
      <pubDate>Thu, 14 Jul 2022 12:43:36 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/k8s-cgroupfs-or-syste/</guid>
      <description>What is a cgroup Cgroups are a Linux kernel feature that limits, audits, and isolates the resource usage (CPU, memory, disk I/O, network, etc.) of a group of processes.
cgroups (Control Groups) are a mechanism provided by the linux kernel to consolidate (or segregate) a set of system tasks and their subtasks into different groups according to resource hierarchy on demand, thus providing a unified framework for system resource management. Simply put, cgroups can limit and record the physical resources used by task groups.</description>
    </item>
    
    <item>
      <title>k8s Service Discovery and Traffic Exposure</title>
      <link>https://www.sobyte.net/post/2022-07/k8s-service-discovery-and-traffic-exposure/</link>
      <pubDate>Wed, 13 Jul 2022 12:24:59 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/k8s-service-discovery-and-traffic-exposure/</guid>
      <description>This article introduces the service discovery and traffic exposure mechanism in K8S clusters, including the workload type, service type, DNS resolution principle, and the rules of Layer 4 service exposure and Layer 7 service exposure in K8S. 1. Cloud-native foundation concepts 1.1 K8S Architecture The following diagram is a brief introduction to the K8S architecture design in the official K8S documentation. This architecture diagram focuses on the relationship between the</description>
    </item>
    
    <item>
      <title>Kubeadm Deployment k8s Cluster &#43; calico</title>
      <link>https://www.sobyte.net/post/2022-07/k8s-03-deploy-k8s-with-calico/</link>
      <pubDate>Tue, 12 Jul 2022 16:10:18 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/k8s-03-deploy-k8s-with-calico/</guid>
      <description>This article mainly deploys v1.23.6 version of k8s native cluster based on docker and calico components on centos7 system, because the cluster is mainly used for own learning and testing, plus limited resources, not involved in high availability deployment for now. 1. Preparation 1.1 calico-cluster node information The machines are all 8C8G virtual machines with 100G hard disk. IP Hostname 10.31.88.1 tiny-calico-master-88-1.k8s.tcinternal 10.31.88.11 tiny-calico-worker-88-11.k8s.tcinternal 10.31.88.12 tiny-calico-worker-88-12.k8s.tcinternal 10.88.64.0/18 podSubnet 10.88.0.0/18 serviceSubnet</description>
    </item>
    
    <item>
      <title>Kubeadm Deployment k8s Cluster &#43; Flannel</title>
      <link>https://www.sobyte.net/post/2022-07/k8s-02-deploy-k8s-with-flannel/</link>
      <pubDate>Tue, 12 Jul 2022 12:55:28 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/k8s-02-deploy-k8s-with-flannel/</guid>
      <description>This article mainly deploys v1.23.6 version of k8s native cluster based on docker and flannel components on centos7 system, because the cluster is mainly used for own learning and testing, plus limited resources, not involved in high availability deployment for now.
1. Preparation 1.1 flannel-cluster node information The machines are all 8C8G virtual machines with 100G hard disk.
   IP Hostname     10.31.8.1 tiny-flannel-master-8-1.k8s.tcinternal   10.</description>
    </item>
    
    <item>
      <title>What is kubernetes?</title>
      <link>https://www.sobyte.net/post/2022-07/k8s-01-what-is-kubernetes/</link>
      <pubDate>Tue, 12 Jul 2022 12:26:30 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/k8s-01-what-is-kubernetes/</guid>
      <description>Kubernetes, a Greek word meaning &amp;ldquo;helmsman&amp;rdquo; or &amp;ldquo;pilot,&amp;rdquo; is a portable, scalable open source platform that uses declarative configuration to manage orchestration of container services and increase the level of automation and efficiency. At the same time, k8s is supported by a large and still growing ecosystem of available peripheral services, tools and ecological support.
The definition given on the official kubernetes website is as follows.
 Kubernetes, also known as K8s, is an open-source system for automating deployment, scaling, and management of containerized applications.</description>
    </item>
    
    <item>
      <title>Status and Limitations of CPU Scheduling Management in Kubernetes</title>
      <link>https://www.sobyte.net/post/2022-07/k8s-cpu-management/</link>
      <pubDate>Tue, 12 Jul 2022 09:18:33 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/k8s-cpu-management/</guid>
      <description>K8s&amp;rsquo; cpuManager does the CPU resource allocation and isolation on the node side (core pinning and isolation, how to do isolation).
 Discovery of CPU topology on the machine Report available resources to K8s tier machines (including kubelet side scheduling) Allocate resources for workload execution Tracking resource allocation for pods  This article provides a general introduction to the current state and limitations of CPU management in K8s, and analyzes the current community dynamics in conjunction with community documentation.</description>
    </item>
    
    <item>
      <title>Installing an older version of Kubernetes</title>
      <link>https://www.sobyte.net/post/2022-07/k8s-old-version/</link>
      <pubDate>Mon, 11 Jul 2022 13:35:48 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/k8s-old-version/</guid>
      <description>I remember reading a report the other day that Kubernetes for internal use in private deployments was delayed by 17 months compared to the community version. So, in many companies, installing an older version of Kubernetes may be a routine operation.
However, not only does Kubernetes have versioning issues, but its installation tool, kubeadm, also has versioning requirements, so in order to install a specific version of Kubernetes, you have to install a specific version of kubeadm.</description>
    </item>
    
    <item>
      <title>K8s Mutating Webhook</title>
      <link>https://www.sobyte.net/post/2022-07/k8s-mutatingwebhook/</link>
      <pubDate>Mon, 11 Jul 2022 13:13:31 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/k8s-mutatingwebhook/</guid>
      <description>I recently wrote another Mutating Webhook for K8s and read the official documentation. Some special points to remember are summarized below. Although it is mainly for Mutating type webhooks, it should work for Validating type webhooks as well.
Versioning One of the most troublesome things about programming in K8s is the issue of versioning and the resulting dependencies on go mod. So the first thing you need to do before writing code, and before referring to other people&amp;rsquo;s code, is to check which API versions you need to support and use.</description>
    </item>
    
    <item>
      <title>About the K8s Secret is not secure</title>
      <link>https://www.sobyte.net/post/2022-07/k8s-secrets-secret/</link>
      <pubDate>Sun, 10 Jul 2022 13:54:37 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/k8s-secrets-secret/</guid>
      <description>K8s provides a Secret resource to store and set sensitive information such as API endpoint addresses, various user passwords or tokens, and so on. When you are not using K8s, this information may be set at deployment time through a configuration file or environment variable. However, Secret is not really secure, as anyone who has looked at Secret with kubectl knows, we can easily see the original text of Secret,</description>
    </item>
    
    <item>
      <title>How CNI works</title>
      <link>https://www.sobyte.net/post/2022-07/cni/</link>
      <pubDate>Sun, 10 Jul 2022 12:52:11 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/cni/</guid>
      <description>No one who uses K8s will be unaware of CNI, but probably most people, most of the time, only care about the installation. Put the binary in /opt/cni/bin, create the configuration file under /etc/cni/net.d/, and leave the rest to K8s or containerd, we don&amp;rsquo;t care and don&amp;rsquo;t understand the implementation.
CNI, known as Container Network Interface, is a specification used to define container networks. containerernetworking/cni is a CNCF CNI implementation project, including basic bridge, macvlan and other basic network plugins.</description>
    </item>
    
    <item>
      <title>Summary of eviction strategy for k8s standalone</title>
      <link>https://www.sobyte.net/post/2022-07/k8s-eviction/</link>
      <pubDate>Sat, 09 Jul 2022 17:01:34 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/k8s-eviction/</guid>
      <description>Process eviction: When there is resource pressure on a machine, it may be due to a malicious program that is consuming system resources, or due to overcommit. The system reduces the overall impact of a single program on the system by controlling the survival of processes on the machine. The most critical aspect of the eviction phase is to select the right process to ensure system stability by minimizing the cost.</description>
    </item>
    
    <item>
      <title>Deploying an Elasticsearch stack on a Kubernetes cluster</title>
      <link>https://www.sobyte.net/post/2022-07/k8s-elk/</link>
      <pubDate>Fri, 08 Jul 2022 12:16:34 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/k8s-elk/</guid>
      <description>If Logstash is used to receive log input from Filebeat centrally, it is easy to cause performance bottleneck due to single machine; if Kafka is used to receive log input from Filebeat, the timeliness of logs is not guaranteed. Here, the logs collected by Filebeat are directly output to Elasticsearch.
1. Preparation   Node planning
Instead of distinguishing master, data, and client nodes, three nodes of a cluster are directly multiplexed here.</description>
    </item>
    
    <item>
      <title>Design and implementation of kube-apiserver</title>
      <link>https://www.sobyte.net/post/2022-07/kube-apiserver/</link>
      <pubDate>Thu, 07 Jul 2022 13:46:05 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/kube-apiserver/</guid>
      <description>kube-apiserver is a component in kubernetes that interacts directly with etcd and controls changes to core resources in kubernetes. It provides the following main functions. Providing Kubernetes API, including authentication authorization, data validation, and cluster state changes, for clients and other components to call. Proxy some additional component components in the cluster, such as Kubernetes UI, metrics-server, npd, etc. Creating kubernetes services, i.e., Service that provides apiserver, kubernetes Service. conversion</description>
    </item>
    
    <item>
      <title>Implementation of apiserver service in kube-apiserver</title>
      <link>https://www.sobyte.net/post/2022-07/apiserver-bootstrap-controller/</link>
      <pubDate>Thu, 07 Jul 2022 13:25:36 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/apiserver-bootstrap-controller/</guid>
      <description>In kubernetes, the kubernetes API can be accessed from both outside and inside the cluster, directly outside the cluster by accessing the API provided by the apiserver, and inside the cluster by accessing the service as the ClusterIP for kubernetes. kubernetes clusters create a kubernetes service after initialization. A kubernetes service is created and maintained by kube-apiserver, as follows. 1 2 3 4 5 6 7 $ kubectl get service</description>
    </item>
    
    <item>
      <title>knative serving component analysis</title>
      <link>https://www.sobyte.net/post/2022-07/knative-serving/</link>
      <pubDate>Thu, 07 Jul 2022 13:03:36 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/knative-serving/</guid>
      <description>The created components can be seen under the knative-serving namespace after the deployment of knative.
1 2 3 4 5 6 7 8 9 10  $ kubectl get pod -n knative-serving NAME READY STATUS RESTARTS AGE activator-7fff689bcb-zt9pm 2/2 Running 2 28d autoscaler-5bcff95856-pr6nk 2/2 Running 3 28d autoscaler-hpa-75584dd678-fpk7w 2/2 Running 1 28d controller-bbdd78bc4-6cqm4 2/2 Running 1 28d istio-webhook-5f5794dcc4-sgzlj 2/2 Running 1 28d networking-istio-7d875675c7-gc55v 1/1 Running 0 28d storage-version-migration-f46wc 1/2 Running 2 28d webhook-68bb66b676-9xk4s 2/2 Running 11 28d   Create knative serving First create a knative service for testing, the yaml file is shown below.</description>
    </item>
    
    <item>
      <title>How Pod Eviction Happens in kubernetes</title>
      <link>https://www.sobyte.net/post/2022-07/k8s-evicted/</link>
      <pubDate>Thu, 07 Jul 2022 12:13:20 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/k8s-evicted/</guid>
      <description>Recently, we found that many instances on our network are in Evicted state. Through pod yaml, we can see that the instances are being evicted because of insufficient node resources. However, these instances are not automatically cleaned up, and most users of the platform will think that there is a problem with the service or the platform when they see Evicted instances under the service, which affects the user experience. The Pods in the Evicted state have been destroyed in the underlying container, which has no impact on the user&amp;rsquo;s service.</description>
    </item>
    
    <item>
      <title>Using and Extending the Descheduler Component in Kubernetes</title>
      <link>https://www.sobyte.net/post/2022-07/k8s-descheduler/</link>
      <pubDate>Wed, 06 Jul 2022 12:40:55 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/k8s-descheduler/</guid>
      <description>Descheduler component introduction When an instance is created, the scheduler can select the best node for scheduling based on the cluster state at that time, but the resource usage within the cluster is dynamically changing, and the cluster will become unbalanced over time, requiring the Descheduler to migrate the pods already running on the node to other nodes to achieve a more balanced distribution of resources within the cluster. There are several reasons why we want to migrate the instances running on a node to other nodes.</description>
    </item>
    
    <item>
      <title>kubernetes Local Volume</title>
      <link>https://www.sobyte.net/post/2022-07/k8s-local-volume/</link>
      <pubDate>Mon, 04 Jul 2022 13:20:06 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/k8s-local-volume/</guid>
      <description>kubernetes supports local volume (local volume) since version 1.10. workloads (not only statefulsets types) can take advantage of local fast SSDs to get better performance than remote volumes (e.g. cephfs, RBD).
Before the advent of local volume, statefulsets could also take advantage of local SSDs by configuring hostPath and binding to specific nodes via nodeSelector or nodeAffinity. However, the problem with hostPath is that administrators need to manually manage the directory of each node of the cluster, which is less convenient.</description>
    </item>
    
    <item>
      <title>Pod Security Policies</title>
      <link>https://www.sobyte.net/post/2022-07/k8s-psp/</link>
      <pubDate>Mon, 04 Jul 2022 13:00:51 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/k8s-psp/</guid>
      <description>What is PodSecurityPolicy PodSecurityPolicy is a global resource used to control Pod security-related configuration.
On a kubernetes cluster with RBAC enabled, if users are allowed to use kubectl, then PodSecurityPolicy must be enabled, otherwise users may use some privileged resources (e.g. privileged, hostNetwork, hostPath, etc.) and affect the stability of the node machine.
With PSP turned on, users can only use resources allowed by the administrator. PSP supports the following (see official website for details).</description>
    </item>
    
    <item>
      <title>kubernetes PVC supports resize scaling</title>
      <link>https://www.sobyte.net/post/2022-07/k8s-pvc-resize/</link>
      <pubDate>Sun, 03 Jul 2022 11:12:55 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/k8s-pvc-resize/</guid>
      <description>Since v1.11, kubernetes has enabled the resize feature and PersistentVolumeClaimResize admission controller by default, so that if the storage volume created by the user is not large enough, it can be expanded without losing the original data. Currently supported storage volumes for resize are AWS-EBS, GCE-PD, Azure Disk, Azure File, Glusterfs, Cinder, Portworx, and Ceph RBD.
 Block file systems such as GCE-PD, AWS-EBS, Azure Disk, Cinder, and Ceph RBD require file system expansion.</description>
    </item>
    
    <item>
      <title>How to limit the capacity of kubernetes local ephemeral storage</title>
      <link>https://www.sobyte.net/post/2022-07/k8s-limit-local-temporary-storage/</link>
      <pubDate>Sun, 03 Jul 2022 11:02:32 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/k8s-limit-local-temporary-storage/</guid>
      <description>Introduction As a provider of the kubernetes platform, it is important to put some restrictions on certain &amp;ldquo;rogue&amp;rdquo; applications to prevent them from abusing the platform&amp;rsquo;s CPU, memory, disk, network, and other resources.
For example, kubernetes provides limits on CPU and memory to prevent applications from using system resources without limits; kubernetes provides PVCs, such as cephfs and RBD, which also support capacity limits.
However, earlier versions of kubernetes did not limit the capacity of the container&amp;rsquo;s rootfs.</description>
    </item>
    
    <item>
      <title>Domain name resolution optimization in kubernetes containers</title>
      <link>https://www.sobyte.net/post/2022-07/k8s-optimization/</link>
      <pubDate>Sat, 02 Jul 2022 16:22:15 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/k8s-optimization/</guid>
      <description>Redundant DNS lookups Some applications that need to resolve external DNS domains, when running in a container, if we catch packets in the container&amp;rsquo;s network namespace for dns messages (udp port 53), we may find that several redundant attempts are made before they resolve correctly.
Here are the packets I grabbed while ping google.com in the container&amp;rsquo;s network namespace.
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  sudo nsenter -t 3885 -n tcpdump -i eth0 udp port 53 tcpdump: verbose output suppressed, use -v or -vv for full protocol decode listening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes 10:09:11.</description>
    </item>
    
    <item>
      <title>Enabling Preemption Mode for kubernetes</title>
      <link>https://www.sobyte.net/post/2022-07/k8s-preemption/</link>
      <pubDate>Sat, 02 Jul 2022 15:45:16 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/k8s-preemption/</guid>
      <description>Pod prioritization, preemption Pod prioritization and preemption, introduced in kubernetes v1.8, entered beta status in v1.11, and entered GA phase in v1.14, is already a mature feature. As the name suggests, the Pod priority, preemption feature, by subdividing applications into different priorities, prioritizes resources to high-priority applications, thus improving resource availability while guaranteeing the quality of service for high-priority applications. Let&amp;rsquo;s use the Pod priority and preemption function briefly. Ibu&amp;rsquo;s</description>
    </item>
    
    <item>
      <title>Cilium Masquerading Troubleshooting</title>
      <link>https://www.sobyte.net/post/2022-07/cilium-masquerading/</link>
      <pubDate>Fri, 01 Jul 2022 12:13:26 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-07/cilium-masquerading/</guid>
      <description>Background When upgrading cilium v1.8.1 to v1.11.1, the business pod reported a mysql authorization error, and after checking, we found that the clientIP of mysql server is the nodeIP of the business pod, not the default podIP, because mysql server only authorized the current K8s cluster The mysql server only authorizes the pod cidr of the current K8s cluster, so it reports an authorization error.
The contradiction is that when using cilium v1.</description>
    </item>
    
    <item>
      <title>Side effects of nodePort</title>
      <link>https://www.sobyte.net/post/2022-06/node-port/</link>
      <pubDate>Thu, 30 Jun 2022 13:37:28 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-06/node-port/</guid>
      <description>Problem phenomenon One day I encountered a problem: when accessing a web service, some requests failed, and Connection Refused was returned.
For some reason, the web service is a hostNetwork type, which is the same network namespace as the host, and when I logged into Node, I could see that the listening socket was still there, but when I made a direct curl request, it returned Connection Refused.
Why? Usually Connection Refused means that the listening socket is not open and the corresponding port number is not opened, the kernel will return icmp-port-unreachable, but now it is obvious that the port is open.</description>
    </item>
    
    <item>
      <title>The process of apiserver processing requests</title>
      <link>https://www.sobyte.net/post/2022-06/api-server/</link>
      <pubDate>Sun, 19 Jun 2022 14:00:09 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-06/api-server/</guid>
      <description>1. Overview The apiserver of k8s is the hub of communication for all components, and its importance is self-explanatory. apiserver can provide HTTP-based services to the outside world, so what steps does a request go through from issuing to processing? The following is a brief description of the entire process based on the code so that you can get a general impression of the process. Since the code structure of</description>
    </item>
    
    <item>
      <title>Want to learn k8s but don&#39;t have an environment? Build one easily with minikube</title>
      <link>https://www.sobyte.net/post/2022-06/minikube/</link>
      <pubDate>Sat, 04 Jun 2022 13:07:56 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-06/minikube/</guid>
      <description>Kubernetes (often referred to as K8s) is an open source system for automating the deployment, scaling, and management of &amp;ldquo;containerized applications&amp;rdquo;. The system was designed by Google and donated to the Cloud Native Computing Foundation (now part of the Linux Foundation) for use.
It is designed to provide &amp;ldquo;a platform for automating the deployment, scaling, and running of application containers across host clusters&amp;rdquo;. It supports a range of container tools, including Docker and others.</description>
    </item>
    
    <item>
      <title>Usage of Cilium Cluster Mesh, a Kubernetes multi-cluster solution</title>
      <link>https://www.sobyte.net/post/2022-05/cilium-cluster-mesh/</link>
      <pubDate>Mon, 16 May 2022 20:42:20 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-05/cilium-cluster-mesh/</guid>
      <description>Cluster Mesh is a multi-cluster implementation of Cilium that helps Cilium achieve multi-Kubernetes cluster management across data centers and VPCs. Cluster Mesh has the following main features. Pod IP routing between multiple Kubernetes clusters through tunneling or direct routing without any gateway or proxy. Use standard Kubernetes service discovery mechanisms. Network policies across multiple clusters. Policies can use Kubernetes native NetworkPolicy resources or the extended CiliumNetworkPolicy CRD. Transparent encryption of</description>
    </item>
    
    <item>
      <title>K8S Best Practices - Health Check</title>
      <link>https://www.sobyte.net/post/2022-05/k8s-health-checks/</link>
      <pubDate>Sun, 15 May 2022 10:34:55 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-05/k8s-health-checks/</guid>
      <description>We all know that distributed systems are very difficult to manage, and one of the big reasons is that if the whole system is to be available, all components (services) need to be working properly. If a small component is not available, the system should be able to detect it, bypass it and fix it, and this should be done automatically. A health check is a simple way for the system to know if an instance of an application (service) is working properly.</description>
    </item>
    
    <item>
      <title>How do I change the Kubernetes node IP address?</title>
      <link>https://www.sobyte.net/post/2022-05/change-k8s-node-ip/</link>
      <pubDate>Sat, 14 May 2022 11:38:06 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-05/change-k8s-node-ip/</guid>
      <description>Yesterday there was a problem with the network environment, the local virtual machine built Kubernetes environment does not have a fixed IP, the result of the node IP changed, of course the easiest way is to re-fix the node back to the previous IP address, but I stubbornly want to modify the IP address of the cluster, the results encountered a lot of problems, and not as simple as I</description>
    </item>
    
    <item>
      <title>Load balancing with OpenELB for local clusters</title>
      <link>https://www.sobyte.net/post/2022-04/openelb-lb/</link>
      <pubDate>Sun, 10 Apr 2022 22:19:54 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-04/openelb-lb/</guid>
      <description>In order to facilitate testing, I am going to configure a LoadBalaner type Service for the Ingress controller, and since this is a local private environment, I need to deploy a load balancer that supports this service type, the most popular one in the community should be MetalLB This project, which now also belongs to the CNCF sandbox project, was launched at the end of 2017 and has been widely</description>
    </item>
    
    <item>
      <title>Build and maintain operators using the Operator Framework toolkit</title>
      <link>https://www.sobyte.net/post/2022-03/operator-framework/</link>
      <pubDate>Fri, 11 Mar 2022 09:22:00 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-03/operator-framework/</guid>
      <description>Operator Framework The Operator Framework is a CoreOS open source toolkit for rapid development and maintenance of Operator, and contains three main projects. Operator SDK: Quickly build an Operator application without having to understand the complex Kubernetes API features. Operator Lifecycle Manager (OLM): helps install, update, and manage all operators (and their associated services) running across clusters Operator Metering: collects operator metric information and generates reports With these three sub-projects,</description>
    </item>
    
    <item>
      <title>Creating custom K8s AdmissionWebhooks with Kubebuilder</title>
      <link>https://www.sobyte.net/post/2022-03/creating-custom-k8s-admissionwebhooks/</link>
      <pubDate>Fri, 11 Mar 2022 09:09:19 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-03/creating-custom-k8s-admissionwebhooks/</guid>
      <description>Kubebuilder can build AdmissionWebhooks in addition to CRD APIs and their Controllers, and this article will analyze how Kubebuilder builds AdmissionWebhooks in detail.
AdmissionWebhooks for K8s First of all, it is important to know what AdmissionWebhooks is in K8s and what its purpose is.
Let&amp;rsquo;s start with the scenario. If we need to make configuration changes or checks on a pod before it is created, this part of the work would require the administrator to compile it into a binary file in ApiServer, which would be very annoying if the configuration changes were made in a custom form.</description>
    </item>
    
    <item>
      <title>What is the Pause container</title>
      <link>https://www.sobyte.net/post/2022-03/what-is-pause-container/</link>
      <pubDate>Wed, 09 Mar 2022 10:23:17 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-03/what-is-pause-container/</guid>
      <description>We all know that the smallest unit of scheduling in k8s is the POD, and each POD has a so-called Infra container Pause, so what exactly is a Pause container? What does it look like? What does it do?
Analyze the source code From the official pause.c.
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52  #include &amp;lt;signal.</description>
    </item>
    
    <item>
      <title>Prometheus Monitoring Kubernetes Job Resource False Alarm Issue</title>
      <link>https://www.sobyte.net/post/2022-03/prometheus-monitor-k8s-job-trap/</link>
      <pubDate>Sun, 06 Mar 2022 17:12:01 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-03/prometheus-monitor-k8s-job-trap/</guid>
      <description>Someone mentioned a problem before, it is about Prometheus monitoring Job task false alarm problem, the general meaning of the CronJob control Job, the front of the execution failed, monitoring will trigger the alarm, after the solution to generate a new Job can be executed normally, but will still receive the alarm in front.
This is because we generally keep some history when executing Job tasks to facilitate troubleshooting, so if there is a failed Job before, even if it will become successful later, the previous Job will continue to exist, and the default alarm rule used by most direct kube-prometheus installation and deployment is kube_job_ status_failed &amp;gt; 0, which is obviously inaccurate.</description>
    </item>
    
    <item>
      <title>How to report errors via Kubernetes events</title>
      <link>https://www.sobyte.net/post/2022-03/error-reporting-with-kubernetes-events/</link>
      <pubDate>Sun, 06 Mar 2022 16:24:57 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-03/error-reporting-with-kubernetes-events/</guid>
      <description>There is a Kubernetes webhook maintained within the group that intercepts pod creation requests and makes some changes (e.g. adding environment variables, adding init-container, etc.). The business logic itself is simple, but it&amp;rsquo;s hard to handle if errors are generated in the process. Either you directly prevent the pod from being created, then there is a risk that the application will not start. Either ignore the business logic, then it</description>
    </item>
    
    <item>
      <title>High Risk! Kubernetes New Container Escape Vulnerability Warning!</title>
      <link>https://www.sobyte.net/post/2022-03/k8s-container-escape-vulnerability/</link>
      <pubDate>Fri, 04 Mar 2022 09:37:19 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-03/k8s-container-escape-vulnerability/</guid>
      <description>On January 18, 2022, Linux maintainers and vendors discovered a heap buffer overflow vulnerability in the legacy_parse_param function of the Linux kernel (5.1-rc1+) file system context function with the vulnerability ID number CVE-2022-0185, which is a high-risk vulnerability with a severity rating of is 7.8 . The vulnerability allows for out-of-bounds writes in kernel memory. Using this vulnerability, an unprivileged attacker could bypass the restrictions of any Linux namespace and</description>
    </item>
    
    <item>
      <title>Solve kubeadm initialization exception: dial tcp 127.0.0.1:10248: connect: connection refused</title>
      <link>https://www.sobyte.net/post/2022-03/connect-connection-refused/</link>
      <pubDate>Tue, 01 Mar 2022 19:25:00 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-03/connect-connection-refused/</guid>
      <description>Kubernetes, often abbreviated as K8s, is an open-source system for automating the deployment, scaling, and management of containerized containerized applications in an open source system. The system was designed by Google and donated to the Cloud Native Computing Foundation (Linux Foundation). It is designed to provide a platform for automated deployment, scaling, and running application containers across host clusters. It supports a range of container tools, including Docker and others.</description>
    </item>
    
    <item>
      <title>Forced deletion of the k8s terminating state namespace</title>
      <link>https://www.sobyte.net/post/2022-02/force-delete-k8s-terminating-namespace/</link>
      <pubDate>Wed, 23 Feb 2022 10:07:55 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-02/force-delete-k8s-terminating-namespace/</guid>
      <description>When deleting a namespace, the delete operation is interrupted when it is not completely deleted, and the namespace is in the terminating state. One solution is to delete again with the --force option after the command, e.g.
1  kubectl delete ns &amp;lt;terminating-namespace&amp;gt; --force   But it often doesn&amp;rsquo;t work, so you need to use the interface to delete the namespace.
First, export the namespace information for the terminating state to a json file.</description>
    </item>
    
    <item>
      <title>Deploy a Kubernetes cluster</title>
      <link>https://www.sobyte.net/post/2022-01/kubernetes-deployemnt-using-kubeadm/</link>
      <pubDate>Sat, 29 Jan 2022 17:21:31 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-01/kubernetes-deployemnt-using-kubeadm/</guid>
      <description>Native Kubernetes Cluster Installation Tool Kubernetes clusters on the cloud, basically all cloud vendors support one-click deployment. The main focus here is on local deployment, or baremetal deployment. The approach presented in this article is suitable for development testing, and there may still be issues with security, stability, long-term availability, and other solutions. kubernetes is a component-based system with a lot of flexibility in the installation process, and many components</description>
    </item>
    
    <item>
      <title>Kubernetes Microservices Best Practices</title>
      <link>https://www.sobyte.net/post/2022-01/kubernetes-best-practices/</link>
      <pubDate>Sat, 29 Jan 2022 16:56:20 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-01/kubernetes-best-practices/</guid>
      <description>This article introduces a set of &amp;ldquo;Kubernetes configuration&amp;rdquo; that I have summarized as my personal &amp;ldquo;best practices&amp;rdquo; in the process of using Kubernetes. Most of the content has been tested in an online environment, but there are a few parts that have only been simulated in my head, so please refer to them with caution. A few notes before reading. This document is quite long and includes a lot of</description>
    </item>
    
    <item>
      <title>Rebuild the ISO image using overlay2 or bind</title>
      <link>https://www.sobyte.net/post/2022-01/rebuild-iso-image/</link>
      <pubDate>Wed, 26 Jan 2022 13:02:51 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-01/rebuild-iso-image/</guid>
      <description>I was in charge of the PaaS container cloud platform for private deployment related work, so I often deal with some container images, and have some research on container images, and have written many blog articles before. Since I got a new job, I started to be responsible for &amp;ldquo;hyper-converged products&amp;rdquo; cluster deployment related work, so I will also come into contact with a lot of mirrors, but this mirror</description>
    </item>
    
    <item>
      <title>Kubernetes HPA Controlled Elastic Scaling based on Prometheus Custom Metrics</title>
      <link>https://www.sobyte.net/post/2022-01/k8s-hpa-prometheus/</link>
      <pubDate>Wed, 19 Jan 2022 15:37:00 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-01/k8s-hpa-prometheus/</guid>
      <description>There are three main types of elastic scaling in Kubernetes: HPA, VPA, and CA. Here we will focus on Pod Horizontal Scaling HPA.
With the release of Kubernetes v1.23, the HPA API came to a stable version autoscaling/v2:
 Scaling based on custom metrics Scaling based on multiple metrics Configurable scaling behaviour  From the initial v1 version of HPA, which only supported CPU and memory utilisation scaling, to the later support for custom metrics and aggregation layer APIs, to v1.</description>
    </item>
    
    <item>
      <title>K8s drain command source code reading</title>
      <link>https://www.sobyte.net/post/2022-01/k8s-drain/</link>
      <pubDate>Mon, 17 Jan 2022 13:24:33 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-01/k8s-drain/</guid>
      <description>Background I&amp;rsquo;ve written a previous article [&amp;ldquo;Kubernetes in Action - Smooth Node Removal&amp;rdquo;]) about how to remove nodes from a K8s cluster, and today I&amp;rsquo;ll take a look at what the kubectl drain command does and how it does it. kubectl K8s uses cobra as a command line builder (I don&amp;rsquo;t find cobra very useful and the documentation is unclear.) The actual processing logic is in pkg/kubectl/cmd/cmd.go, with a unified</description>
    </item>
    
    <item>
      <title>Analysis and resolution of memory cgroup leaks</title>
      <link>https://www.sobyte.net/post/2022-01/memory-cgroup/</link>
      <pubDate>Thu, 13 Jan 2022 09:44:29 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-01/memory-cgroup/</guid>
      <description>Memory cgroup leaks are a common problem in K8s (Kubernetes) clusters, resulting in nodes being stretched for memory resources, or nodes becoming unresponsive and having to restart the server to recover. Most developers use regular drop cache or disable kernel kmem accounting to circumvent this problem. This paper analyses the root cause of memory cgroup leaks and provides a solution to fix the problem at the kernel level, based on a practical example from the NetEase Digital Sail kernel team.</description>
    </item>
    
    <item>
      <title>Kubernetes mounted subpath containers fail to mount when restarting after configmap changes</title>
      <link>https://www.sobyte.net/post/2022-01/pod-loopcrash-of-k8s-subpath/</link>
      <pubDate>Tue, 04 Jan 2022 20:46:06 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-01/pod-loopcrash-of-k8s-subpath/</guid>
      <description>Kubernetes has a problem with mounted subpath containers that continue to crash after configmap or other volume changes if the container quits unexpectedly and does not start properly.
Kubernetes has now released version 1.18 and this issue still exists.
Community-related issue #68211
Reproduction steps 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  ---apiVersion:v1kind:Pod metadata:name:test-podspec:volumes:- configMap:name:extra-cfgname:extra-cfgcontainers:- name:testimage:ubuntu:bioniccommand:[&amp;#34;sleep&amp;#34;,&amp;#34;30&amp;#34;]resources:requests:cpu:100mvolumeMounts:- name:extra-cfgmountPath:/etc/extra.</description>
    </item>
    
    <item>
      <title>Pod targeted migration support in Kubernetes</title>
      <link>https://www.sobyte.net/post/2022-01/k8s-pod-directional-migration/</link>
      <pubDate>Tue, 04 Jan 2022 20:37:25 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2022-01/k8s-pod-directional-migration/</guid>
      <description>Native K8s does not support migration of a given Pod from the current node to another given node. However, we can implement support for this feature based on the extension capabilities provided by K8s. Background In K8s, kube-scheduler is responsible for scheduling the Pods that need to be scheduled to a suitable node. It computes the best node to run the current Pod through various algorithms. When a new Pod</description>
    </item>
    
    <item>
      <title>Customizing the Kubernetes Scheduler</title>
      <link>https://www.sobyte.net/post/2021-12/custom-k8s-scheduler/</link>
      <pubDate>Tue, 21 Dec 2021 17:09:26 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-12/custom-k8s-scheduler/</guid>
      <description>kube-scheduler is one of the core components of kubernetes, mainly responsible for the scheduling function of the entire cluster resources, according to specific scheduling algorithms and policies, Pods will be scheduled to the optimal working nodes, so as to make more reasonable and full use of the cluster resources, which is also a very important reason why we choose to use kubernetes This is a very important reason why we</description>
    </item>
    
    <item>
      <title>Deploying VSCode on a Kubernetes Cluster</title>
      <link>https://www.sobyte.net/post/2021-12/deploy-vscode-on-k8s/</link>
      <pubDate>Tue, 21 Dec 2021 16:48:31 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-12/deploy-vscode-on-k8s/</guid>
      <description>code-server is a VSCode that runs on top of a server and can be accessed directly through a browser, VSCode is a modern code editor that supports Git, a code debugger, intelligent code hints, and various customizations and extensions. Next, we&amp;rsquo;ll go over how to run a VSCode on our Kubernetes cluster.
Installation First of all, of course, you need an installed Kubernetes cluster, and if you want to access our Cloud IDE via a domain name, you also need to prepare a domain name and an Ingress Controller to be installed in the cluster.</description>
    </item>
    
    <item>
      <title>Zero Downtime Rolling Update K8s</title>
      <link>https://www.sobyte.net/post/2021-12/zero-downtime-rolling-update-k8s/</link>
      <pubDate>Mon, 20 Dec 2021 21:42:55 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-12/zero-downtime-rolling-update-k8s/</guid>
      <description>The software world is evolving faster than ever, and the need to stay competitive requires new software releases as quickly as possible, without impacting users online. Many enterprises have migrated their workloads to Kubernetes clusters, which inherently take into account some production environment practices, but there are some additional things we need to do to make Kubernetes truly zero downtime without disruption or lost requests.
Rolling Updates By default, Kubernetes Deployment has a rolling update policy for Pod updates, which ensures that some instances are still running when the application is updated at any point in time to prevent the application from going down, and only kills the old Pod when the newly deployed Pod is up and ready to handle traffic.</description>
    </item>
    
    <item>
      <title>Deploying Spinnaker on Kubernetes</title>
      <link>https://www.sobyte.net/post/2021-12/deploy-spinnaker-on-k8s/</link>
      <pubDate>Fri, 17 Dec 2021 15:29:05 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-12/deploy-spinnaker-on-k8s/</guid>
      <description>Spinnaker is a continuous delivery platform, originally developed by Netflix, for releasing software changes quickly and reliably. Spinnaker makes it easier for developers to focus on writing code without worrying about the underlying cloud infrastructure, and it integrates seamlessly with Jenkins It integrates seamlessly with Jenkins and other popular build tools. I&amp;rsquo;ve been wanting to try Spinnaker for a long time, but I&amp;rsquo;ve tried many times without success due to</description>
    </item>
    
    <item>
      <title>Deploying Vault on Kubernetes</title>
      <link>https://www.sobyte.net/post/2021-12/deploy-vault-on-k8s/</link>
      <pubDate>Fri, 17 Dec 2021 15:09:31 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-12/deploy-vault-on-k8s/</guid>
      <description>Many times we may directly expose private information such as application passwords or API Token in the source code, which is obviously not a good way to expose such private information. The Kubernetes system provides a Secret object to store private data, but it is only a simple Base64 encoding, which is better than exposing it directly, but it is still not enough to use Secret directly for applications with</description>
    </item>
    
    <item>
      <title>Get the real access IP of the client</title>
      <link>https://www.sobyte.net/post/2021-12/get-client-realip/</link>
      <pubDate>Thu, 16 Dec 2021 17:53:13 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-12/get-client-realip/</guid>
      <description>Normally, when a client in the cluster connects to the service, the Pod supporting the service can get the IP address of the client, but when the connection is received through the node port, the source IP address of the packet will change because of the Source Network Address Translation (SNAT) performed on the packet, and the Pod on the backend cannot see the actual client IP, which is a problem for some applications, for example, the request log of nginx cannot get the exact IP of the client access.</description>
    </item>
    
    <item>
      <title>Describing Kubernetes Applications Using Programming Languages - cdk8s</title>
      <link>https://www.sobyte.net/post/2021-12/use-cdk8s-define-k8s-app/</link>
      <pubDate>Wed, 15 Dec 2021 22:46:34 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-12/use-cdk8s-define-k8s-app/</guid>
      <description>cdk8s is a new framework released by AWS Labs written in TypeScript that allows us to define resource lists for Kubernetes using a number of object-oriented programming languages. cdk8s also ends up generating native Kubernetes YAML files, so we can use cdk8s to define running Kubernetes application resources from anywhere. Introduction The concept of constructs is provided in cdk8s, and they are abstractions of Kubernetes resource objects (Deployment, Service, Ingress,</description>
    </item>
    
    <item>
      <title>Visually Create Kubernetes Microservice Applications</title>
      <link>https://www.sobyte.net/post/2021-12/visualize-kubernetes-app/</link>
      <pubDate>Wed, 15 Dec 2021 17:48:41 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-12/visualize-kubernetes-app/</guid>
      <description>Just found an awesome looking tool: icepanel that can be used to quickly create and visualize our Kubernetes microservice applications. It&amp;rsquo;s also very easy to use, you just need to install a VSCODE plugin.
Search for the plugin IcePanel in VSCODE and install it. Create a new empty workspace and in the bottom left corner you will see an Open IcePanel button, clicking on it will prompt us if we want to install the icepanel.</description>
    </item>
    
    <item>
      <title>Resolving CoreDNS custom domain name failure issues</title>
      <link>https://www.sobyte.net/post/2021-12/resolve-coredns-hosts-invalid/</link>
      <pubDate>Mon, 13 Dec 2021 16:23:50 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-12/resolve-coredns-hosts-invalid/</guid>
      <description>A few days ago we used NodeLocal DNSCache to solve the 5 second timeout problem with CoreDNS, and the cluster DNS resolution performance was significantly improved. However, today we encountered a major pitfall, when we were doing DevOps experiments, the tools were using custom domains, so we needed to add custom domain name resolution to access each other, which we could solve by adding hostAlias to Pods, but when using</description>
    </item>
    
    <item>
      <title>Log monitoring and alerting with Loki</title>
      <link>https://www.sobyte.net/post/2021-12/use-loki-monitor-alert/</link>
      <pubDate>Mon, 13 Dec 2021 16:05:54 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-12/use-loki-monitor-alert/</guid>
      <description>For a production environment and an aspiring ops person, even millisecond level downtime is not tolerated. Proper logging and monitoring of infrastructure and applications is very helpful in solving problems, and can also help optimize costs and resources, as well as help detect some problems that may occur later. In this article we will use the more lightweight Grafana Loki to implement log monitoring and alerting. The key thing is that if you are familiar with using Prometheus, you will have no problem using Loki, as they are basically the same, and have the same Label tag if they are auto-discovered in a Kubernetes cluster.</description>
    </item>
    
    <item>
      <title>Building a Kubernetes cluster with WSL2 on Windows</title>
      <link>https://www.sobyte.net/post/2021-12/deploy-k8s-on-win-use-wsl2/</link>
      <pubDate>Sun, 12 Dec 2021 17:54:23 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-12/deploy-k8s-on-win-use-wsl2/</guid>
      <description>In this article we&amp;rsquo;ll cover how to build a Kubernetes cluster using WSL2 and KinD under Windows 10. Over the past few years, Kubernetes has become the de facto standard in container orchestration. While there are now a variety of Kubernetes distributions and installers to deploy Kubernetes environments, we still need to deploy and run Kubernetes clusters locally, especially for developers, except in cloud or bare-metal environments. However, Kubernetes was</description>
    </item>
    
    <item>
      <title>Running Kubernetes in Kubernetes</title>
      <link>https://www.sobyte.net/post/2021-12/k8s-in-k8s/</link>
      <pubDate>Sun, 12 Dec 2021 17:46:19 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-12/k8s-in-k8s/</guid>
      <description>KinD is a very lightweight Kubernetes installation tool that treats Docker containers as Kubernetes nodes, making it very easy to use. Since you can run a Kubernetes cluster in a Docker container, it&amp;rsquo;s natural to wonder if you can run it in a Pod. What are the problems with running in a Pod?
Installing Docker Daemon in a Pod KinD is now dependent on Docker, so first we need to create an image that allows us to run Docker Deamon in the Pod, so that we can execute commands like docker run inside the Pod, but this is not the same as the DIND mode of mounting docker.</description>
    </item>
    
    <item>
      <title>PV and PVC state changes in Kubernetes</title>
      <link>https://www.sobyte.net/post/2021-12/status-in-pv-pvc/</link>
      <pubDate>Sun, 12 Dec 2021 17:37:14 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-12/status-in-pv-pvc/</guid>
      <description>We should not be unfamiliar with several states of PV and PVC, but we may have some questions in the process of using them, such as why the PV has become Failed state, how can the newly created PVC bind the previous PV, and can I restore the previous PV? Here we will explain several state changes in PV and PVC again. In different cases, the state changes of PV</description>
    </item>
    
    <item>
      <title>Encrypting Kubernetes Secrets with Sealed Secrets</title>
      <link>https://www.sobyte.net/post/2021-12/encrypt-k8s-secrets-with-sealed-secrets/</link>
      <pubDate>Sun, 12 Dec 2021 17:27:36 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-12/encrypt-k8s-secrets-with-sealed-secrets/</guid>
      <description>We&amp;rsquo;ve talked about GitOps practices before, and we know that GitOps advocates managing all of your configuration through Git and versioning your environment configuration and infrastructure through declarative code.
In Kubernetes, we know that you can use resource manifest files to manage a cluster&amp;rsquo;s resource objects, but it&amp;rsquo;s not a good idea to store Kubernetes Secrets data in a Git repository, which is also very insecure.
Kubernetes Secrets are resource objects used to help us store sensitive information, such as passwords, keys, certificates, OAuth Token, SSH KEY, etc.</description>
    </item>
    
    <item>
      <title>Excellent Grafana K8S Plugin - DevOpsProdigy KubeGraf</title>
      <link>https://www.sobyte.net/post/2021-12/grafana-k8s-plugin-kubegraf/</link>
      <pubDate>Sat, 11 Dec 2021 14:45:39 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-12/grafana-k8s-plugin-kubegraf/</guid>
      <description>DevOpsProdigy KubeGraf is an excellent Grafana Kubernetes plugin, an update to Grafana&amp;rsquo;s official Kubernetes Plugin. The plugin can be used to visualize and analyze the performance of a Kubernetes cluster, visually displaying the metrics and characteristics of the main services of the Kubernetes cluster through various graphs, and can also be used to examine the application lifecycle and error logs. Environment Requirements To install and use the DevOpsProdigy KubeGraf plugin</description>
    </item>
    
    <item>
      <title>Thoughts on k8s CPU limit and throttling</title>
      <link>https://www.sobyte.net/post/2021-12/myth-of-k8s-cpu-limit-and-throttle/</link>
      <pubDate>Mon, 06 Dec 2021 15:06:57 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-12/myth-of-k8s-cpu-limit-and-throttle/</guid>
      <description>You should be careful about setting the CPU limit for loads in k8s. A value that is too small can introduce extra, meaningless latency into your program, and a value that is too large can introduce too large a blast radius and weaken the overall stability of the cluster.
request and limit One of the major benefits of k8s is resource isolation. By setting the request and limit of the load, we can easily allow different programs to coexist on the right node.</description>
    </item>
    
    <item>
      <title>Kubernetes HPA Usage Explained</title>
      <link>https://www.sobyte.net/post/2021-11/k8s-hpa-usage/</link>
      <pubDate>Sun, 21 Nov 2021 20:21:02 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-11/k8s-hpa-usage/</guid>
      <description>In the previous study, we used a kubectl scale command to implement Pod scaling, but this is after all a completely manual operation. To this end, Kubernetes also provides us with such a resource object: Horizontal Pod Autoscaling, or HPA for short, which monitors and analyzes the load changes of all Pods controlled by some controllers to determine whether the number of copies of Pods needs to be adjusted. The</description>
    </item>
    
    <item>
      <title>Describing Kubernetes Applications Using Programming Languages - cdk8s</title>
      <link>https://www.sobyte.net/post/2021-11/use-cdk8s-define-k8s-apps/</link>
      <pubDate>Sun, 21 Nov 2021 20:08:53 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-11/use-cdk8s-define-k8s-apps/</guid>
      <description>cdk8s is a new framework released by AWS Labs written in TypeScript that allows us to define resource lists for Kubernetes using a number of object-oriented programming languages. cdk8s also ends up generating native Kubernetes YAML files, so we can use cdk8s to define running Kubernetes application resources from anywhere. Introduction The concept of constructs is provided in cdk8s, and they are abstractions of Kubernetes resource objects (Deployment, Service, Ingress,</description>
    </item>
    
    <item>
      <title>Running a highly available Kafka cluster on Kubernetes</title>
      <link>https://www.sobyte.net/post/2021-10/deploy-kafka-ha-on-k8s/</link>
      <pubDate>Tue, 19 Oct 2021 22:40:40 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-10/deploy-kafka-ha-on-k8s/</guid>
      <description>Apache Kafka is the most popular distributed messaging publish-subscribe system available today. While Kafka is very powerful, it is equally complex and requires a highly available and robust platform to run. In a world where microservices are prevalent and most companies are adopting distributed computing, it is still very advantageous to use Kafka as a core messaging system.
If you run your microservices in a Kubernetes cluster, it makes sense to run a Kafka cluster in Kubernetes to take advantage of its built-in resiliency and high availability, and we can easily interact with Kafka Pods within the cluster using the built-in Kubernetes service discovery.</description>
    </item>
    
    <item>
      <title>Illustrating Kubernetes Ingress</title>
      <link>https://www.sobyte.net/post/2021-10/visually-explained-k8s-ingress/</link>
      <pubDate>Sun, 10 Oct 2021 13:22:09 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-10/visually-explained-k8s-ingress/</guid>
      <description>Kubernetes Ingress is just a common resource object in Kubernetes that requires a corresponding Ingress Controller to resolve Ingress rules and expose the service to the outside, such as ingress-nginx, which is essentially just an Nginx Pod that then redirects requests to This Pod itself is also exposed through the Kubernetes service, most commonly through LoadBalancer.
Again, this article wants to give you a simple and clear overview of what&amp;rsquo;s behind Kubernetes Ingress to make it easier for you to understand the Ingress in use.</description>
    </item>
    
    <item>
      <title>Write a do-it-yourself Kubernetes YAML templating tool</title>
      <link>https://www.sobyte.net/post/2021-10/code-k8s-yaml-templating/</link>
      <pubDate>Sun, 10 Oct 2021 13:15:42 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-10/code-k8s-yaml-templating/</guid>
      <description>When we write resource manifest files with Kubernetes, we often use tools like Helm or Kustomize for templating, both to improve the flexibility of resource manifests and to really lower the threshold for installing complex Kubernetes applications. In this article we try to implement a YAML resource manifest file templating solution ourselves using Golang. Golang&amp;rsquo;s Templating Golang has a standard library text/template that supports templated text files. This library allows</description>
    </item>
    
    <item>
      <title>Understanding the Container Runtime Containerd in one article</title>
      <link>https://www.sobyte.net/post/2021-09/containerd-usage/</link>
      <pubDate>Mon, 27 Sep 2021 14:38:27 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-09/containerd-usage/</guid>
      <description>Before learning Containerd we need to do a brief review of Docker&amp;rsquo;s development history, because it involves a bit more components in practice, there are many we will often hear, but it is not clear what these components are really for, such as libcontainer, runc, containerd, CRI, OCI and so on. Docker Since Docker 1.11, Docker containers are not simply started by Docker Daemon, but by integrating containerd, runc and</description>
    </item>
    
    <item>
      <title>How to use the registry storage features</title>
      <link>https://www.sobyte.net/post/2021-09/skopeo-to-registry/</link>
      <pubDate>Thu, 16 Sep 2021 14:32:01 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-09/skopeo-to-registry/</guid>
      <description>I am currently responsible for the packaging and release of the company&amp;rsquo;s PaaS toB product. One of my daily tasks is to run the automated packaging pipeline, and then update the installation packages to the QA test environment. Since the packaging and testing environments are located in two different server rooms, the product installation packages need to be synchronized across the public network from the packaging machine to the QA</description>
    </item>
    
    <item>
      <title>Deploying a kubernetes cluster with Kubespray native development tests</title>
      <link>https://www.sobyte.net/post/2021-09/deploy-k8s-by-kubespray/</link>
      <pubDate>Mon, 13 Sep 2021 19:19:59 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-09/deploy-k8s-by-kubespray/</guid>
      <description>The company&amp;rsquo;s PaaS platform uses the open source kubespray for the underlying kubernetes cluster deployment, and I was involved in the kubespray second-opening work. During this period, I mainly completed kubespray automated packaging and release pipeline, private deployment, added self-research CNI deployment, and some bugfixes. I recently took time to organize and summarize some of the pitfalls of using kubespray to deploy kubernetes clusters for local development and testing. Prepare</description>
    </item>
    
    <item>
      <title>Using kubeplay to deploy a kubernetes cluster offline</title>
      <link>https://www.sobyte.net/post/2021-09/deploy-k8s-by-kubeplay/</link>
      <pubDate>Thu, 09 Sep 2021 14:03:53 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-09/deploy-k8s-by-kubeplay/</guid>
      <description>kubeplay is a tool for offline deployment of kuberneres clusters based on kubespray
Features  Includes all dependencies and can be installed offline with a single command Support amd64 and arm64 CPU architectures kubeadm-generated certificate validity adjusted to 10 years De-dockerized deployment, seamless migration to containerd as container runtime Offline installation of rpm/deb packages that the platform depends on (e.g. storage client) for toB privatization scenarios Multi-cluster deployment, with support for deploying kubernetes clusters as Job Pods within kubernetes clusters Build offline installers using GitHub Actions, no membership required, 100% open source 100% free  Component Versions    addon version Use     kubernetes v1.</description>
    </item>
    
    <item>
      <title>Compiling kubernetes components with GitHub Actions</title>
      <link>https://www.sobyte.net/post/2021-09/build-k8s-binary-by-github-actions/</link>
      <pubDate>Thu, 09 Sep 2021 13:27:58 +0800</pubDate>
      
      <guid>https://www.sobyte.net/post/2021-09/build-k8s-binary-by-github-actions/</guid>
      <description>When using kubernetes, you often have to modify the official k8s source code and recompile it due to certain needs. This article explains how to use GitHub Actions to compile and publish the generated binaries by modifying the kubeadm generation certificate to the default 10 years.
Build clone repo Fork the official kubernetes source code to your own repo
1 2 3 4 5 6  $ git clone https://github.com/k8sli/kubernetes.git $ cd kubernetes $ git remote add upstream https://github.</description>
    </item>
    
  </channel>
</rss>
