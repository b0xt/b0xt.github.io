<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>OIDC (OpenID Connect) Introduction - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="This article summarizes the 5 authorization processes of OAuth 2, and then builds on that to introduce the OIDC process, and what it does." /><meta name="keywords" content="OIDC, OpenID Connect" />






<meta name="generator" content="Hugo 0.102.0 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-07/oidc/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">


<meta property="og:title" content="OIDC (OpenID Connect) Introduction" />
<meta property="og:description" content="This article summarizes the 5 authorization processes of OAuth 2, and then builds on that to introduce the OIDC process, and what it does." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-07/oidc/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-07-06T12:19:44+08:00" />
<meta property="article:modified_time" content="2022-07-06T12:19:44+08:00" />

<meta itemprop="name" content="OIDC (OpenID Connect) Introduction">
<meta itemprop="description" content="This article summarizes the 5 authorization processes of OAuth 2, and then builds on that to introduce the OIDC process, and what it does."><meta itemprop="datePublished" content="2022-07-06T12:19:44+08:00" />
<meta itemprop="dateModified" content="2022-07-06T12:19:44+08:00" />
<meta itemprop="wordCount" content="2918">
<meta itemprop="keywords" content="oidc," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="OIDC (OpenID Connect) Introduction"/>
<meta name="twitter:description" content="This article summarizes the 5 authorization processes of OAuth 2, and then builds on that to introduce the OIDC process, and what it does."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SOBYTE</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SOBYTE</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">OIDC (OpenID Connect) Introduction</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-07-06 12:19:44 </span>
        <div class="post-category">
            <a href="/categories/tutorials/"> tutorials </a>
            </div>
          <span class="more-meta"> 2918 words </span>
          <span class="more-meta"> 14 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#authorization-vs-authentication">Authorization vs Authentication</a></li>
        <li><a href="#introduction-to-oauth-2">Introduction to OAuth 2</a>
          <ul>
            <li><a href="#client-credentials-grant">Client Credentials Grant</a></li>
            <li><a href="#resource-owner-password-credentials-grant">Resource Owner Password Credentials Grant</a></li>
            <li><a href="#implicit-grant">Implicit Grant</a></li>
            <li><a href="#authorization-code-grant">Authorization Code Grant</a></li>
            <li><a href="#authorization-code-pkce-extension">Authorization Code PKCE extension</a></li>
          </ul>
        </li>
        <li><a href="#jwt">JWT</a></li>
        <li><a href="#openid-connectoidc">OpenID Connect(OIDC)</a>
          <ul>
            <li><a href="#authentication-using-the-authorization-code-flow">Authentication using the Authorization Code Flow</a></li>
            <li><a href="#authentication-using-the-implicit-flow">Authentication using the Implicit Flow</a></li>
            <li><a href="#authentication-using-the-hybrid-flow">Authentication using the Hybrid Flow</a></li>
          </ul>
        </li>
        <li><a href="#summary">Summary</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>I recently learned about OIDC in the authentication system and put together a blog that covers the concepts, processes, and usage of OIDC. Before introducing these, we need to clarify two terms Authorization and Authentication.</p>
<h2 id="authorization-vs-authentication">Authorization vs Authentication</h2>
<p>Here is OKTA&rsquo;s definition of the two terms.</p>
<ul>
<li>Authentication, in the form of a key. The lock on the door only grants access to someone with the correct key in much the same way that a system only grants access to users who have the correct credentials.</li>
<li>Authorization, in the form of permissions. Once inside, the person has the authorization to access the kitchen and open the cupboard that holds the pet food. The person may not have permission to go into the bedroom for a quick nap.</li>
</ul>
<p>Authentication usually refers to the process of verifying that the user is the user, while Authorization refers more to whether the user has permissions. Usually we verify that the user is the user first, and then verify that the user has permissions. The following diagram shows the difference between the two, as organized in the Auth0 article.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images1/2022/07/06/b3323d6ecf4f40e389391f9fb06b5105.png" alt="Authorization vs Authentication"></p>
<h2 id="introduction-to-oauth-2">Introduction to OAuth 2</h2>
<p>Before we understand OIDC, we need to understand OAuth 2, because OIDC is based on the OAuth 2 process. Before that, let&rsquo;s introduce the whole scenario with an example.</p>
<p>Suppose now we want to log in to the Slack iOS client with a Google account, what do we need to do? One easy way to do this is to give Slack our username and password so that Slack can log in as us, but this is a huge security risk, and there&rsquo;s basically no good way to do this if Slack accidentally leaks the username and password, or if we want to revoke the authorization.</p>
<p>So we need an authorization protocol that does not give the user name and password directly to the third-party application, but introduces an intermediate layer, access_token. access_token binds the user to authorize the third-party application with certain privileges, such as reading the user name and other information, updating the user name, etc. OAuth 2 is the protocol used to do this.</p>
<p>OAuth 2 provides a total of four authorization modes, with a new enhanced mode for authorization code mode added in 2015. Let&rsquo;s start with the simple one.</p>
<h3 id="client-credentials-grant">Client Credentials Grant</h3>
<p><a href="https://datatracker.ietf.org/doc/html/rfc6749#section-4.4">Client Credentials Grant</a></p>
<p>This mode is the simplest, in fact, the client tells the server which client it is, and the server sends the access_token.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">     +---------+                                  +---------------+
</span></span><span class="line"><span class="cl">     |         |                                  |               |
</span></span><span class="line"><span class="cl">     |         |&gt;--(A)- Client Authentication ---&gt;| Authorization |
</span></span><span class="line"><span class="cl">     | Client  |                                  |     Server    |
</span></span><span class="line"><span class="cl">     |         |&lt;--(B)---- Access Token ---------&lt;|               |
</span></span><span class="line"><span class="cl">     |         |                                  |               |
</span></span><span class="line"><span class="cl">     +---------+                                  +---------------+
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                     Figure 6: Client Credentials Flow
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   The flow illustrated in Figure 6 includes the following steps:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   (A)  The client authenticates with the authorization server and
</span></span><span class="line"><span class="cl">        requests an access token from the token endpoint.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   (B)  The authorization server authenticates the client, and if valid,
</span></span><span class="line"><span class="cl">        issues an access token.
</span></span></code></pre></td></tr></table>
</div>
</div><p>This mode is rarely used and is mainly used when the client is very reliable, for example, when logging into a hosted cloud desktop system, the system requests a token from the server and the server immediately issues it, after which the user uses it as a specific user of the cloud desktop.</p>
<h3 id="resource-owner-password-credentials-grant">Resource Owner Password Credentials Grant</h3>
<p><a href="https://datatracker.ietf.org/doc/html/rfc6749#section-4.3">Resource Owner Password Credentials Grant</a></p>
<p>User-password mode, this process is relatively suitable for trusted clients, such as self-developed clients, where the client asks the user to enter a user name and password, and then requests the server, which checks the user name and password and issues the access_token.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">     +----------+
</span></span><span class="line"><span class="cl">     | Resource |
</span></span><span class="line"><span class="cl">     |  Owner   |
</span></span><span class="line"><span class="cl">     |          |
</span></span><span class="line"><span class="cl">     +----------+
</span></span><span class="line"><span class="cl">          v
</span></span><span class="line"><span class="cl">          |    Resource Owner
</span></span><span class="line"><span class="cl">         (A) Password Credentials
</span></span><span class="line"><span class="cl">          |
</span></span><span class="line"><span class="cl">          v
</span></span><span class="line"><span class="cl">     +---------+                                  +---------------+
</span></span><span class="line"><span class="cl">     |         |&gt;--(B)---- Resource Owner -------&gt;|               |
</span></span><span class="line"><span class="cl">     |         |         Password Credentials     | Authorization |
</span></span><span class="line"><span class="cl">     | Client  |                                  |     Server    |
</span></span><span class="line"><span class="cl">     |         |&lt;--(C)---- Access Token ---------&lt;|               |
</span></span><span class="line"><span class="cl">     |         |    (w/ Optional Refresh Token)   |               |
</span></span><span class="line"><span class="cl">     +---------+                                  +---------------+
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            Figure 5: Resource Owner Password Credentials Flow
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   The flow illustrated in Figure 5 includes the following steps:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   (A)  The resource owner provides the client with its username and
</span></span><span class="line"><span class="cl">        password.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   (B)  The client requests an access token from the authorization
</span></span><span class="line"><span class="cl">        server&#39;s token endpoint by including the credentials received
</span></span><span class="line"><span class="cl">        from the resource owner.  When making the request, the client
</span></span><span class="line"><span class="cl">        authenticates with the authorization server.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   (C)  The authorization server authenticates the client and validates
</span></span><span class="line"><span class="cl">        the resource owner credentials, and if valid, issues an access
</span></span><span class="line"><span class="cl">        token.
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="implicit-grant">Implicit Grant</h3>
<p><a href="https://datatracker.ietf.org/doc/html/rfc6749#section-4.2">Implicit Grant</a></p>
<p>Implicit Grant mode is suitable for places where it is not convenient to expose client_secret, such as browser side (web page), distributed apps, which are easy to be cracked, so you can use Implicit Grant.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">     +----------+
</span></span><span class="line"><span class="cl">     | Resource |
</span></span><span class="line"><span class="cl">     |  Owner   |
</span></span><span class="line"><span class="cl">     |          |
</span></span><span class="line"><span class="cl">     +----------+
</span></span><span class="line"><span class="cl">          ^
</span></span><span class="line"><span class="cl">          |
</span></span><span class="line"><span class="cl">         (B)
</span></span><span class="line"><span class="cl">     +----|-----+          Client Identifier     +---------------+
</span></span><span class="line"><span class="cl">     |         -+----(A)-- &amp; Redirection URI ---&gt;|               |
</span></span><span class="line"><span class="cl">     |  User-   |                                | Authorization |
</span></span><span class="line"><span class="cl">     |  Agent  -|----(B)-- User authenticates --&gt;|     Server    |
</span></span><span class="line"><span class="cl">     |          |                                |               |
</span></span><span class="line"><span class="cl">     |          |&lt;---(C)--- Redirection URI ----&lt;|               |
</span></span><span class="line"><span class="cl">     |          |          with Access Token     +---------------+
</span></span><span class="line"><span class="cl">     |          |            in Fragment
</span></span><span class="line"><span class="cl">     |          |                                +---------------+
</span></span><span class="line"><span class="cl">     |          |----(D)--- Redirection URI ----&gt;|   Web-Hosted  |
</span></span><span class="line"><span class="cl">     |          |          without Fragment      |     Client    |
</span></span><span class="line"><span class="cl">     |          |                                |    Resource   |
</span></span><span class="line"><span class="cl">     |     (F)  |&lt;---(E)------- Script ---------&lt;|               |
</span></span><span class="line"><span class="cl">     |          |                                +---------------+
</span></span><span class="line"><span class="cl">     +-|--------+
</span></span><span class="line"><span class="cl">       |    |
</span></span><span class="line"><span class="cl">      (A)  (G) Access Token
</span></span><span class="line"><span class="cl">       |    |
</span></span><span class="line"><span class="cl">       ^    v
</span></span><span class="line"><span class="cl">     +---------+
</span></span><span class="line"><span class="cl">     |         |
</span></span><span class="line"><span class="cl">     |  Client |
</span></span><span class="line"><span class="cl">     |         |
</span></span><span class="line"><span class="cl">     +---------+
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   Note: The lines illustrating steps (A) and (B) are broken into two
</span></span><span class="line"><span class="cl">   parts as they pass through the user-agent.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                       Figure 4: Implicit Grant Flow
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   The flow illustrated in Figure 4 includes the following steps:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   (A)  The client initiates the flow by directing the resource owner&#39;s
</span></span><span class="line"><span class="cl">        user-agent to the authorization endpoint.  The client includes
</span></span><span class="line"><span class="cl">        its client identifier, requested scope, local state, and a
</span></span><span class="line"><span class="cl">        redirection URI to which the authorization server will send the
</span></span><span class="line"><span class="cl">        user-agent back once access is granted (or denied).
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   (B)  The authorization server authenticates the resource owner (via
</span></span><span class="line"><span class="cl">        the user-agent) and establishes whether the resource owner
</span></span><span class="line"><span class="cl">        grants or denies the client&#39;s access request.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   (C)  Assuming the resource owner grants access, the authorization
</span></span><span class="line"><span class="cl">        server redirects the user-agent back to the client using the
</span></span><span class="line"><span class="cl">        redirection URI provided earlier.  The redirection URI includes
</span></span><span class="line"><span class="cl">        the access token in the URI fragment.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   (D)  The user-agent follows the redirection instructions by making a
</span></span><span class="line"><span class="cl">        request to the web-hosted client resource (which does not
</span></span><span class="line"><span class="cl">        include the fragment per [RFC2616]).  The user-agent retains the
</span></span><span class="line"><span class="cl">        fragment information locally.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   (E)  The web-hosted client resource returns a web page (typically an
</span></span><span class="line"><span class="cl">        HTML document with an embedded script) capable of accessing the
</span></span><span class="line"><span class="cl">        full redirection URI including the fragment retained by the
</span></span><span class="line"><span class="cl">        user-agent, and extracting the access token (and other
</span></span><span class="line"><span class="cl">        parameters) contained in the fragment.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   (F)  The user-agent executes the script provided by the web-hosted
</span></span><span class="line"><span class="cl">        client resource locally, which extracts the access token.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   (G)  The user-agent passes the access token to the client.
</span></span></code></pre></td></tr></table>
</div>
</div><p>In our example at the beginning, Slack pops up a webview, loads Google&rsquo;s authorization page, Google displays the corresponding account, and then prompts the client to read the user&rsquo;s information, and when the user clicks to confirm, Google checks the page and redirects the page to the address specified by the client, and brings the access_token in the URL fragment.</p>
<h3 id="authorization-code-grant">Authorization Code Grant</h3>
<p><a href="https://datatracker.ietf.org/doc/html/rfc6749#section-4.1">Authorization Code Grant</a></p>
<p>Authorization Code mode, which is the most complex and secure authorization mode, flows as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">     +----------+
</span></span><span class="line"><span class="cl">     | Resource |
</span></span><span class="line"><span class="cl">     |   Owner  |
</span></span><span class="line"><span class="cl">     |          |
</span></span><span class="line"><span class="cl">     +----------+
</span></span><span class="line"><span class="cl">          ^
</span></span><span class="line"><span class="cl">          |
</span></span><span class="line"><span class="cl">         (B)
</span></span><span class="line"><span class="cl">     +----|-----+          Client Identifier      +---------------+
</span></span><span class="line"><span class="cl">     |         -+----(A)-- &amp; Redirection URI ----&gt;|               |
</span></span><span class="line"><span class="cl">     |  User-   |                                 | Authorization |
</span></span><span class="line"><span class="cl">     |  Agent  -+----(B)-- User authenticates ---&gt;|     Server    |
</span></span><span class="line"><span class="cl">     |          |                                 |               |
</span></span><span class="line"><span class="cl">     |         -+----(C)-- Authorization Code ---&lt;|               |
</span></span><span class="line"><span class="cl">     +-|----|---+                                 +---------------+
</span></span><span class="line"><span class="cl">       |    |                                         ^      v
</span></span><span class="line"><span class="cl">      (A)  (C)                                        |      |
</span></span><span class="line"><span class="cl">       |    |                                         |      |
</span></span><span class="line"><span class="cl">       ^    v                                         |      |
</span></span><span class="line"><span class="cl">     +---------+                                      |      |
</span></span><span class="line"><span class="cl">     |         |&gt;---(D)-- Authorization Code ---------&#39;      |
</span></span><span class="line"><span class="cl">     |  Client |          &amp; Redirection URI                  |
</span></span><span class="line"><span class="cl">     |         |                                             |
</span></span><span class="line"><span class="cl">     |         |&lt;---(E)----- Access Token -------------------&#39;
</span></span><span class="line"><span class="cl">     +---------+       (w/ Optional Refresh Token)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   Note: The lines illustrating steps (A), (B), and (C) are broken into
</span></span><span class="line"><span class="cl">   two parts as they pass through the user-agent.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                     Figure 3: Authorization Code Flow
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   The flow illustrated in Figure 3 includes the following steps:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   (A)  The client initiates the flow by directing the resource owner&#39;s
</span></span><span class="line"><span class="cl">        user-agent to the authorization endpoint.  The client includes
</span></span><span class="line"><span class="cl">        its client identifier, requested scope, local state, and a
</span></span><span class="line"><span class="cl">        redirection URI to which the authorization server will send the
</span></span><span class="line"><span class="cl">        user-agent back once access is granted (or denied).
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   (B)  The authorization server authenticates the resource owner (via
</span></span><span class="line"><span class="cl">        the user-agent) and establishes whether the resource owner
</span></span><span class="line"><span class="cl">        grants or denies the client&#39;s access request.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   (C)  Assuming the resource owner grants access, the authorization
</span></span><span class="line"><span class="cl">        server redirects the user-agent back to the client using the
</span></span><span class="line"><span class="cl">        redirection URI provided earlier (in the request or during
</span></span><span class="line"><span class="cl">        client registration).  The redirection URI includes an
</span></span><span class="line"><span class="cl">        authorization code and any local state provided by the client
</span></span><span class="line"><span class="cl">        earlier.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   (D)  The client requests an access token from the authorization
</span></span><span class="line"><span class="cl">        server&#39;s token endpoint by including the authorization code
</span></span><span class="line"><span class="cl">        received in the previous step.  When making the request, the
</span></span><span class="line"><span class="cl">        client authenticates with the authorization server.  The client
</span></span><span class="line"><span class="cl">        includes the redirection URI used to obtain the authorization
</span></span><span class="line"><span class="cl">        code for verification.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   (E)  The authorization server authenticates the client, validates the
</span></span><span class="line"><span class="cl">        authorization code, and ensures that the redirection URI
</span></span><span class="line"><span class="cl">        received matches the URI used to redirect the client in
</span></span><span class="line"><span class="cl">        step (C).  If valid, the authorization server responds back with
</span></span><span class="line"><span class="cl">        an access token and, optionally, a refresh token.
</span></span></code></pre></td></tr></table>
</div>
</div><p>First, Slack client opens webview, loads Google&rsquo;s authorization page, and specifies the mode as Authorization Code, Google lets the user confirm, then redirects back to the URL specified by Slack, and includes a parameter called code in the parameter, then Slack&rsquo;s server takes the code, takes client_id, client_secret and requests Google again. Then Slack&rsquo;s server takes the code and requests Google again with client_id, client_secret, and Google verifies the token and sends access_token if it is successful. Since the token is requested directly by Slack&rsquo;s server, it is more secure than the previous three.</p>
<h3 id="authorization-code-pkce-extension">Authorization Code PKCE extension</h3>
<p><a href="https://datatracker.ietf.org/doc/html/rfc7636">Authorization Code PKCE extension</a></p>
<p>This pattern, which is basically the same as Authorization Code, differs in that it does not expose client_secret, so it can be used in browsers, etc. The process is as follows.</p>
<ul>
<li>First the browser generates a random string, which we call code_verifier, limited to 43-128 characters in length</li>
<li>Then, we do sha256 encryption of code_verifier, and then do URL safe base64 encode, the resulting characters we call code_challenge</li>
<li>Next, the client opens the page of the authorization server, and in the parameters with code_challenge=foo&amp;code_challenge_method=S256, code_challenge is generated in the second step, code_challenge_method specifies the hash method, S256 refers to sha256, and the authorization server logs this information</li>
<li>Then the server prompts the user for authorization, and when the user is authorized, the server calls back the URL specified by the browser with the code</li>
<li>The client extracts the code and then requests the authorization server with the code and code_verifier</li>
<li>The authorization server extracts the code_verifier from the request, sha256 it, and compares it with the code_challenge in step 3, and if it is consistent, the authorization is successful and the access_token is issued.</li>
</ul>
<h2 id="jwt">JWT</h2>
<p>Next, let&rsquo;s take a look at JWT. The full name of JWT is JSON Web Token, which simply means that three JSONs are linked together with a dot, for example</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
</span></span></code></pre></td></tr></table>
</div>
</div><p>There are actually three parts.</p>
<ul>
<li>Header, which indicates the token type and the signature algorithm</li>
<li>Payload, which contains the really useful information, often also called claims</li>
<li>Signature, which is the result of signing the Header and Payload</li>
</ul>
<p>For example, in the JWT above, we decode it.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">In [1]: import base64
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">In [2]: header = b&#34;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">In [3]: payload = b&#34;eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">In [4]: payload = payload + b&#39;=&#39; * (-len(payload) % 4)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">In [5]: base64.urlsafe_b64decode(header)
</span></span><span class="line"><span class="cl">Out[5]: b&#39;{&#34;alg&#34;:&#34;HS256&#34;,&#34;typ&#34;:&#34;JWT&#34;}&#39;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">In [6]: base64.urlsafe_b64decode(payload)
</span></span><span class="line"><span class="cl">Out[6]: b&#39;{&#34;sub&#34;:&#34;1234567890&#34;,&#34;name&#34;:&#34;John Doe&#34;,&#34;iat&#34;:1516239022}&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p>The advantage of JWT compared to the server-side session method is that you don&rsquo;t need to read the database every time to get the information, the information is stored in the payload, just take it out and parse it, then compare the Signature and whether it expires. However, the disadvantage is that once issued, it can not be revoked, as long as someone gets the JWT, before the expiration date, you can operate with this identity. There is a remedy, which is to store the disabled JWT in the database, but then you have to read the database every time, so I don&rsquo;t like JWTs very much.</p>
<h2 id="openid-connectoidc">OpenID Connect(OIDC)</h2>
<p>Finally we come to our main point, OIDC, the main purpose of OIDC is to log in users and get user information, not to get other permissions. As we said before, OIDC is based on OAuth 2, so OIDC can use Authorization Code mode, Implicit mode, and a Hybrid mode.</p>
<h3 id="authentication-using-the-authorization-code-flow">Authentication using the Authorization Code Flow</h3>
<p><a href="https://openid.net/specs/openid-connect-core-1_0.html#CodeFlowAuth">Authentication using the Authorization Code Flow</a></p>
<p>The Authorization Code Flow goes through the following steps:</p>
<ul>
<li>Client prepares an Authentication Request containing the desired request parameters.</li>
<li>Client sends the request to the Authorization Server.</li>
<li>Authorization Server Authenticates the End-User.</li>
<li>Authorization Server obtains End-User Consent/Authorization.</li>
<li>Authorization Server sends the End-User back to the Client with an Authorization Code.</li>
<li>Client requests a response using the Authorization Code at the Token Endpoint.</li>
<li>Client receives a response that contains an ID Token and Access Token in the response body.</li>
<li>Client validates the ID token and retrieves the End-User&rsquo;s Subject Identifier.</li>
</ul>
<p>The difference is that there must be an item called <code>openid</code> in the scope parameter, and another point is that there is an additional id_token in the final return result.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;access_token&#34;</span><span class="p">:</span> <span class="s2">&#34;SlAV32hkKG&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;token_type&#34;</span><span class="p">:</span> <span class="s2">&#34;Bearer&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;refresh_token&#34;</span><span class="p">:</span> <span class="s2">&#34;8xLOxBtZp8&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;expires_in&#34;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;id_token&#34;</span><span class="p">:</span> <span class="s2">&#34;eyJhbGciOiJSUzI1NiIsImtpZCI6IjFlOWdkazcifQ.ewogImlzc
</span></span></span><span class="line"><span class="cl"><span class="s2">        yI6ICJodHRwOi8vc2VydmVyLmV4YW1wbGUuY29tIiwKICJzdWIiOiAiMjQ4Mjg5
</span></span></span><span class="line"><span class="cl"><span class="s2">        NzYxMDAxIiwKICJhdWQiOiAiczZCaGRSa3F0MyIsCiAibm9uY2UiOiAibi0wUzZ
</span></span></span><span class="line"><span class="cl"><span class="s2">        fV3pBMk1qIiwKICJleHAiOiAxMzExMjgxOTcwLAogImlhdCI6IDEzMTEyODA5Nz
</span></span></span><span class="line"><span class="cl"><span class="s2">        AKfQ.ggW8hZ1EuVLuxNuuIJKX_V8a_OMXzR0EHR9R6jgdqrOOF4daGU96Sr_P6q
</span></span></span><span class="line"><span class="cl"><span class="s2">        Jp6IcmD3HP99Obi1PRs-cwh3LO-p146waJ8IhehcwL7F09JdijmBqkvPeB2T9CJ
</span></span></span><span class="line"><span class="cl"><span class="s2">        NqeGpe-gccMg4vfKjkM8FcGvnzZUN4_KSP0aAp1tOJ1zZwgjxqGByKHiOtX7Tpd
</span></span></span><span class="line"><span class="cl"><span class="s2">        QyHE5lcMiKPXfEIQILVq0pc_E2DzL7emopWoaoZTF_m0_N0YzFC6g6EJbOEoRoS
</span></span></span><span class="line"><span class="cl"><span class="s2">        K5hoDalrcvRYLSrQAZZKflyuVCyixEoV9GfNQC3_osjzw2PAithfubEEBLuVVk4
</span></span></span><span class="line"><span class="cl"><span class="s2">        XUVrWOLrLl0nx7RkKU8NXNHq-rvKMzqg&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>This is a JWT that, when parsed, contains the user&rsquo;s information.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;iss&#34;</span><span class="p">:</span> <span class="s2">&#34;http://server.example.com&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;sub&#34;</span><span class="p">:</span> <span class="s2">&#34;248289761001&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;aud&#34;</span><span class="p">:</span> <span class="s2">&#34;s6BhdRkqt3&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;nonce&#34;</span><span class="p">:</span> <span class="s2">&#34;n-0S6_WzA2Mj&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;exp&#34;</span><span class="p">:</span> <span class="mi">1311281970</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;iat&#34;</span><span class="p">:</span> <span class="mi">1311280970</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>where.</p>
<ul>
<li>iss is the abbreviation of Issuer, the value is the URL that issued this OpenID</li>
<li>sub is the abbreviation of Subject, which refers to the user corresponding to this OpenID</li>
<li>aud is the abbreviation of Audience(s), which refers to the client id authorized by this OpenID (there may be more than one)</li>
<li>exp is the timeout period</li>
<li>iat is the issuance time</li>
<li>nonce is a random string</li>
</ul>
<p>There are a few other fields, which can be found at <a href="https://openid.net/specs/openid-connect-core-1_0.html#IDToken">https://openid.net/specs/openid-connect-core-1_0.html#IDToken</a></p>
<h3 id="authentication-using-the-implicit-flow">Authentication using the Implicit Flow</h3>
<p><a href="https://openid.net/specs/openid-connect-core-1_0.html#ImplicitFlowAuth">Authentication using the Implicit Flow</a></p>
<p>The steps are as follows.</p>
<ul>
<li>Client prepares an Authentication Request containing the desired request parameters.</li>
<li>Client sends the request to the Authorization Server.</li>
<li>Authorization Server Authenticates the End-User.</li>
<li>Authorization Server obtains End-User Consent/Authorization.</li>
<li>Authorization Server sends the End-User back to the Client with an ID Token and, if requested, an Access Token.</li>
<li>Client validates the ID token and retrieves the End-User&rsquo;s Subject Identifier.</li>
</ul>
<p>The process is basically the same as the Implicit mode of OAuth 2, the difference is that the value of response_type is not <code>token</code> but <code>id_token token</code> or <code>id_token</code>, and for the response result, a new <code>id_token</code> will be added in the URL fragment.</p>
<h3 id="authentication-using-the-hybrid-flow">Authentication using the Hybrid Flow</h3>
<p><a href="https://openid.net/specs/openid-connect-core-1_0.html#HybridFlowAuth">Authentication using the Hybrid Flow</a></p>
<p>The steps are as follows.</p>
<ul>
<li>Client prepares an Authentication Request containing the desired request parameters.</li>
<li>Client sends the request to the Authorization Server.</li>
<li>Authorization Server Authenticates the End-User.</li>
<li>Authorization Server obtains End-User Consent/Authorization.</li>
<li>Authorization Server sends the End-User back to the Client with an Authorization Code and, depending on the Response Type, one or more additional parameters.</li>
<li>Client requests a response using the Authorization Code at the Token Endpoint.</li>
<li>Client receives a response that contains an ID Token and Access Token in the response body.</li>
<li>Client validates the ID Token and retrieves the End-User&rsquo;s Subject Identifier.</li>
</ul>
<p>The difference is that the value of response_type in the request parameter is <code>code id_token</code> or <code>code token</code> or <code>code id_token token</code>.</p>
<ul>
<li>When the value is <code>code token</code> or <code>code id_token token</code>, <code>access_token</code> is returned</li>
<li>When the value is <code>code id_token</code> or <code>code id_token token</code>, <code>id_token</code> is returned</li>
<li>code will definitely return</li>
</ul>
<p>The above are the three authorization methods of OIDC, through OIDC, we can login to another system as a third party system and get some basic information, such as first name, last name, username, email, avatar url, etc.</p>
<h2 id="summary">Summary</h2>
<p>This article summarizes the 5 authorization processes of OAuth 2, and then on top of that, introduces the OIDC process, and its role. I hope it will be helpful to readers.</p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/oidc/">oidc</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2022-07/k8s-descheduler/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Using and Extending the Descheduler Component in Kubernetes</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-07/self-signed-certificate/">
            <span class="next-text nav-default">Self-signed certificate</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>



<script type="text/javascript" src="/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>








</body>
</html>
