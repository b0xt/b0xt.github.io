<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Gulp for front-end automated builds - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="Learn how to use Gulp to complete front-end automated builds." /><meta name="keywords" content="Gulp" />






<meta name="generator" content="Hugo 0.101.0 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-06/gulp/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">


<meta property="og:title" content="Gulp for front-end automated builds" />
<meta property="og:description" content="Learn how to use Gulp to complete front-end automated builds." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-06/gulp/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-06-23T10:13:03+08:00" />
<meta property="article:modified_time" content="2022-06-23T10:13:03+08:00" />

<meta itemprop="name" content="Gulp for front-end automated builds">
<meta itemprop="description" content="Learn how to use Gulp to complete front-end automated builds."><meta itemprop="datePublished" content="2022-06-23T10:13:03+08:00" />
<meta itemprop="dateModified" content="2022-06-23T10:13:03+08:00" />
<meta itemprop="wordCount" content="3033">
<meta itemprop="keywords" content="Gulp," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Gulp for front-end automated builds"/>
<meta name="twitter:description" content="Learn how to use Gulp to complete front-end automated builds."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SOBYTE</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SOBYTE</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Gulp for front-end automated builds</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-06-23 10:13:03 </span>
        <div class="post-category">
            <a href="/categories/tutorials/"> tutorials </a>
            </div>
          <span class="more-meta"> 3033 words </span>
          <span class="more-meta"> 7 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#1-gulp-basics">1. Gulp Basics</a>
          <ul>
            <li><a href="#1-install-gulp">1. Install Gulp</a></li>
            <li><a href="#2-how-gulp-works">2. How Gulp works</a></li>
            <li><a href="#3-writing-the-gulpfilejs-file">3. Writing the Gulpfile.js file</a></li>
          </ul>
        </li>
        <li><a href="#2-gulp-task-chains-and-data-flow">2. Gulp Task Chains and Data Flow</a>
          <ul>
            <li><a href="#21-series-and-parallel">2.1. series and parallel</a></li>
            <li><a href="#22-about-gulp-data-flow">2.2. About Gulp data flow</a></li>
          </ul>
        </li>
        <li><a href="#3-practice-simple-front-end-automation-build-process">3. Practice: Simple front-end automation build process</a>
          <ul>
            <li><a href="#31-install-a-few-gulp-plugins">3.1. Install a few Gulp plugins</a></li>
            <li><a href="#32-implement-several-tasks-in-the-automated-build-process">3.2. Implement several tasks in the automated build process</a></li>
          </ul>
        </li>
        <li><a href="#4-conclusion">4. Conclusion</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>The core of this post is an introduction to Gulp, a powerful taskflow tool. The reason why it is titled &ldquo;Gulp for front-end automated builds&rdquo; is that Gulp itself is an npm package written in JS that runs in a Node environment, and most developers also use it as an automated front-end project build tool for front-end projects. However, essentially, Gulp is not just for front-end build automation, but also for back-end build and release automation, scripting toolset automation, test process automation, etc. So no matter what technology stack you&rsquo;re in, you&rsquo;ll benefit from learning to use Gulp.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images1/2022/06/23/14f1a02a967942c1a944efa5c616cacc.png" alt="Gulp"></p>
<p>This article will teach you.</p>
<ul>
<li>Installation of the Gulp tool</li>
<li>How Gulp works</li>
<li>Creating independent tasks in an automated process</li>
<li>Serial and parallel tasks</li>
<li>Using pipelines to handle data flows</li>
<li>Listening for file changes</li>
<li>Easy front-end automation build DEMO process</li>
</ul>
<p>This article can&rsquo;t cover all the details of Gulp, but in general, we have selected the core and most useful parts of it, and demonstrated the complete automation process of [environment initialization -&gt; code merge -&gt; code compression -&gt; start server -&gt; listen to files -&gt; hot update browser] using Gulp through a front-end DEMO example.</p>
<h2 id="1-gulp-basics">1. Gulp Basics</h2>
<p>It seems that developers in any technology stack have time consuming and painful process issues. In addition to the basic R&amp;D, testing, and deployment processes, there are often additional tasks that need to be performed in between, such as code checking, code compression, code obfuscation, and so on. Although these processes are not related to R&amp;D, they are necessary for product launch. Not only do they consume extra effort from developers, but it is also difficult for the team to control that all developers perform consistent and complete processes, for example, some members may forget to do code compression due to carelessness and release the project online. Gulp is a simple, efficient and ecologically complete automation tool that has been found to solve this problem.</p>
<h3 id="1-install-gulp">1. Install Gulp</h3>
<p>Gulp runs in a Node environment, so you&rsquo;ll need to install Node.js first, so we won&rsquo;t go into that here.</p>
<p>There are two parts to the Gulp tool, the global Gulp CLI and the local Gulp, and we&rsquo;ll go into more detail about their relationship later. First, let&rsquo;s install the global Gulp CLI tool by executing the following command in the terminal.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo npm install -g gulp-cli      
</span></span></code></pre></td></tr></table>
</div>
</div><p>After the installation is complete, to check if the installation was successful, you can type the following command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">gulp -v
</span></span></code></pre></td></tr></table>
</div>
</div><p>At this point, you should see the following output.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">CLI version: 2.3.0
</span></span><span class="line"><span class="cl">Local version: Unknown
</span></span></code></pre></td></tr></table>
</div>
</div><p>The first line indicates the version number of the global Gulp CLI tool we have installed, and the second line indicates the local Gulp version number, which is installed in a specific project directory that we have not yet installed. We can then create a project directory, for example, a folder called gulp-demo, and initialize the Node module in that directory using the following command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">npm init
</span></span></code></pre></td></tr></table>
</div>
</div><p>Use the following command in the current directory to install local Gulp.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">npm install --save-dev gulp 
</span></span></code></pre></td></tr></table>
</div>
</div><p>Once the installation is complete, run gulp -v again to see the local version of Gulp as follows</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">CLI version: 2.3.0
</span></span><span class="line"><span class="cl">Local version: 4.0.2
</span></span></code></pre></td></tr></table>
</div>
</div><p>Note that you&rsquo;ll want to use a native Gulp version 4.x and above when testing.</p>
<h3 id="2-how-gulp-works">2. How Gulp works</h3>
<p>Having installed the Gulp CLI and native Gulp earlier, it&rsquo;s time to go over how Gulp works. To use Gulp, we need to write a file called Gulpfile.js, which is the core of Gulp&rsquo;s work and defines various tasks and task flows. The Gulp CLI tool is the entry point for starting Gulp, and it calls the local Gulp in the project with a command. The defined tasks in the Gulpfile.js file usually require calls to the API methods provided in the local Gulp module, as well as to the functions of the local Gulp plugins or custom functions to implement the tasks. The working principle is shown in the figure below.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images1/2022/06/23/2e34b4c14d4443c2b8e998c907fdacf4.png" alt="working principle"></p>
<h3 id="3-writing-the-gulpfilejs-file">3. Writing the Gulpfile.js file</h3>
<p>When learning a programming language, the first program is usually HelloWorld, and learning Gulp is no exception. Create a new file named Gulpfile.js in the project directory and write the following code in it.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// 引入本地Gulp模块
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// 调用task方法来定义任务
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;gulp&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Hello Gulp!&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">done</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The task function is used to define the task, the first parameter is the task name, and the second parameter is the task method to be executed. Here we pass in a custom function that will pass in a callback parameter done, which will be called when the task logic code is finished to inform Gulp that the task is finished, otherwise it will block the execution of subsequent Gulp tasks.</p>
<p>In the current directory, execute the following terminal command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">gulp gulp
</span></span></code></pre></td></tr></table>
</div>
</div><p>The purpose of this directive is to have the global Gulp CLI tool call the local Gulp to execute the task named gulp defined in Gulpfile.js. After execution, the terminal output looks like this.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">[09:37:18] Using gulpfile ~/Desktop/gulp-demo/gulpfile.js
</span></span><span class="line"><span class="cl">[09:37:18] Starting &#39;gulp&#39;...
</span></span><span class="line"><span class="cl">Hello Gulp!
</span></span><span class="line"><span class="cl">[09:37:18] Finished &#39;gulp&#39; after 2.55 ms
</span></span></code></pre></td></tr></table>
</div>
</div><p>As you can see, the correct output Hello Gulp! and the start time and end time of the executed task are recorded, and the task elapsed time is also recorded.</p>
<h2 id="2-gulp-task-chains-and-data-flow">2. Gulp Task Chains and Data Flow</h2>
<p>We already know how to execute standalone tasks with Gulp, but in more practical scenarios, automated processes can&rsquo;t be done with simple standalone tasks, and we need to form task chains of tasks. For example, let&rsquo;s simulate these tasks.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">gulp.task<span class="o">(</span><span class="s1">&#39;clean&#39;</span>, <span class="k">function</span><span class="o">(</span><span class="k">done</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">  console.log<span class="o">(</span><span class="s2">&#34;清理构建目录&#34;</span><span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">done</span><span class="o">()</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="o">})</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">gulp.task<span class="o">(</span><span class="s1">&#39;copy&#39;</span>, <span class="k">function</span><span class="o">(</span><span class="k">done</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">  console.log<span class="o">(</span><span class="s2">&#34;复制模板文件&#34;</span><span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">done</span><span class="o">()</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="o">})</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">gulp.task<span class="o">(</span><span class="s1">&#39;build&#39;</span>, <span class="k">function</span><span class="o">(</span><span class="k">done</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">  console.log<span class="o">(</span><span class="s2">&#34;编译代码&#34;</span><span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">done</span><span class="o">()</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="o">})</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">gulp.task<span class="o">(</span><span class="s1">&#39;server&#39;</span>, <span class="k">function</span><span class="o">(</span><span class="k">done</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">  console.log<span class="o">(</span><span class="s2">&#34;启动开发服务器&#34;</span><span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">done</span><span class="o">()</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="o">})</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">gulp.task<span class="o">(</span><span class="s1">&#39;watch&#39;</span>, <span class="k">function</span><span class="o">(</span><span class="k">done</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">  console.log<span class="o">(</span><span class="s2">&#34;监听文件变化持续热更新&#34;</span><span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">done</span><span class="o">()</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="o">})</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The above 5 tasks simulate the basic process of front-end automation build, some of these tasks are dependent on each other, for example, the task of cleaning up the build directory comes before copying the template file and compiling the code, otherwise the compiled code may be cleaned up again, and the development server is started after copying the template file and compiling the code, but the two tasks of copying the template file and compiling the code can be done in parallel The two tasks of copying the template file and compiling the code can be done in parallel. Gulp task chaining makes it very easy to handle inter-task dependencies.</p>
<h3 id="21-series-and-parallel">2.1. series and parallel</h3>
<p>series means serial and parallel means parallel. With these two APIs in Gulp, tasks can be easily combined into serial or parallel chains, and task chains can be combined into other task chains as a standalone task, which makes the combination of Gulp tasks very flexible. Add a task chain according to the requirements described earlier as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">gulp.task<span class="o">(</span><span class="s1">&#39;dev&#39;</span>, gulp.series<span class="o">(</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;clean&#39;</span>,
</span></span><span class="line"><span class="cl">  gulp.parallel<span class="o">(</span><span class="s1">&#39;copy&#39;</span>, <span class="s1">&#39;build&#39;</span><span class="o">)</span>,
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;server&#39;</span>,
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;watch&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">))</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Type <code>gulp dev</code> in the terminal and the output will look like this.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">[10:38:08] Using gulpfile ~/Desktop/gulp-demo/gulpfile.js
</span></span><span class="line"><span class="cl">[10:38:08] Starting &#39;dev&#39;...
</span></span><span class="line"><span class="cl">[10:38:08] Starting &#39;clean&#39;...
</span></span><span class="line"><span class="cl">清理构建目录
</span></span><span class="line"><span class="cl">[10:38:08] Finished &#39;clean&#39; after 915 μs
</span></span><span class="line"><span class="cl">[10:38:08] Starting &#39;copy&#39;...
</span></span><span class="line"><span class="cl">[10:38:08] Starting &#39;build&#39;...
</span></span><span class="line"><span class="cl">复制模板文件
</span></span><span class="line"><span class="cl">[10:38:08] Finished &#39;copy&#39; after 349 μs
</span></span><span class="line"><span class="cl">编译代码
</span></span><span class="line"><span class="cl">[10:38:08] Finished &#39;build&#39; after 423 μs
</span></span><span class="line"><span class="cl">[10:38:08] Starting &#39;server&#39;...
</span></span><span class="line"><span class="cl">启动开发服务器
</span></span><span class="line"><span class="cl">[10:38:08] Finished &#39;server&#39; after 180 μs
</span></span><span class="line"><span class="cl">[10:38:08] Starting &#39;watch&#39;...
</span></span><span class="line"><span class="cl">监听文件变化持续热更新
</span></span><span class="line"><span class="cl">[10:38:08] Finished &#39;watch&#39; after 153 μs
</span></span><span class="line"><span class="cl">[10:38:08] Finished &#39;dev&#39; after 5.57 ms
</span></span></code></pre></td></tr></table>
</div>
</div><p>As you can see from the output, the serial and parallel relationships between tasks are sufficient for our needs, and using Gulp to handle task dependencies is as simple as that.</p>
<p>Let&rsquo;s go back to the series and parallel methods, which can be passed with an unlimited number of arguments, either strings, functions, or other combinations of task chains. When the argument is a string, it will be used as a task name to call the specified task, when the argument is a function, the function will be executed, and when the argument is a combination of task chains, the corresponding task chain will be executed. When the argument is a function, special attention must be paid to the callback to notify Gulp that the task is complete, otherwise the task chain will be blocked. As follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">gulp.task<span class="o">(</span><span class="s1">&#39;dev&#39;</span>, gulp.series<span class="o">(</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;clean&#39;</span>,
</span></span><span class="line"><span class="cl">  <span class="k">function</span><span class="o">(</span><span class="k">done</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">    console.log<span class="o">(</span><span class="s1">&#39;custom method&#39;</span><span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">done</span><span class="o">()</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>,
</span></span><span class="line"><span class="cl">  gulp.parallel<span class="o">(</span><span class="s1">&#39;copy&#39;</span>, <span class="s1">&#39;build&#39;</span><span class="o">)</span>,
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;server&#39;</span>,
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;watch&#39;</span>
</span></span><span class="line"><span class="cl"><span class="o">))</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>After execution, the terminal output is as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">[</span>10:46:31<span class="o">]</span> Using gulpfile ~/Desktop/gulp-demo/gulpfile.js
</span></span><span class="line"><span class="cl"><span class="o">[</span>10:46:31<span class="o">]</span> Starting <span class="s1">&#39;dev&#39;</span>...
</span></span><span class="line"><span class="cl"><span class="o">[</span>10:46:31<span class="o">]</span> Starting <span class="s1">&#39;clean&#39;</span>...
</span></span><span class="line"><span class="cl">清理构建目录
</span></span><span class="line"><span class="cl"><span class="o">[</span>10:46:31<span class="o">]</span> Finished <span class="s1">&#39;clean&#39;</span> after <span class="m">738</span> μs
</span></span><span class="line"><span class="cl"><span class="o">[</span>10:46:31<span class="o">]</span> Starting <span class="s1">&#39;&lt;anonymous&gt;&#39;</span>...
</span></span><span class="line"><span class="cl">custom method
</span></span><span class="line"><span class="cl"><span class="o">[</span>10:46:31<span class="o">]</span> Finished <span class="s1">&#39;&lt;anonymous&gt;&#39;</span> after <span class="m">238</span> μs
</span></span><span class="line"><span class="cl"><span class="o">[</span>10:46:31<span class="o">]</span> Starting <span class="s1">&#39;copy&#39;</span>...
</span></span><span class="line"><span class="cl"><span class="o">[</span>10:46:31<span class="o">]</span> Starting <span class="s1">&#39;build&#39;</span>...
</span></span><span class="line"><span class="cl">复制模板文件
</span></span><span class="line"><span class="cl"><span class="o">[</span>10:46:31<span class="o">]</span> Finished <span class="s1">&#39;copy&#39;</span> after <span class="m">520</span> μs
</span></span><span class="line"><span class="cl">编译代码
</span></span><span class="line"><span class="cl"><span class="o">[</span>10:46:31<span class="o">]</span> Finished <span class="s1">&#39;build&#39;</span> after <span class="m">490</span> μs
</span></span><span class="line"><span class="cl"><span class="o">[</span>10:46:31<span class="o">]</span> Starting <span class="s1">&#39;server&#39;</span>...
</span></span><span class="line"><span class="cl">启动开发服务器
</span></span><span class="line"><span class="cl"><span class="o">[</span>10:46:31<span class="o">]</span> Finished <span class="s1">&#39;server&#39;</span> after <span class="m">168</span> μs
</span></span><span class="line"><span class="cl"><span class="o">[</span>10:46:31<span class="o">]</span> Starting <span class="s1">&#39;watch&#39;</span>...
</span></span><span class="line"><span class="cl">监听文件变化持续热更新
</span></span><span class="line"><span class="cl"><span class="o">[</span>10:46:31<span class="o">]</span> Finished <span class="s1">&#39;watch&#39;</span> after <span class="m">117</span> μs
</span></span><span class="line"><span class="cl"><span class="o">[</span>10:46:31<span class="o">]</span> Finished <span class="s1">&#39;dev&#39;</span> after 7.16 ms
</span></span></code></pre></td></tr></table>
</div>
</div><p>You may have noticed that when executing to a custom function, the terminal displays the task name as anonymous, which means anonymous. A better way is for us to use a named function, which makes it easier to retrace the execution status of the task, as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;dev&#39;</span><span class="p">,</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">series</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;clean&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">customMethod</span><span class="p">(</span><span class="nx">done</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;custom method&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">done</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">gulp</span><span class="p">.</span><span class="nx">parallel</span><span class="p">(</span><span class="s1">&#39;copy&#39;</span><span class="p">,</span> <span class="s1">&#39;build&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;server&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="s1">&#39;watch&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="22-about-gulp-data-flow">2.2. About Gulp data flow</h3>
<p>Having understood serial and parallel Gulp tasks from a macro perspective, let&rsquo;s now focus on more specific issues. Locally Gulp itself provides a number of powerful APIs, such as task, series, and parallel, which are all part of the APIs used earlier. Automated builds are essentially about scanning and processing files, so Gulp also encapsulates APIs related to file manipulation.</p>
<p>First, the two APIs for reading and outputting file streams are src and dest, respectively.</p>
<p>The src method is used to create a stream of file data that can be read from the file system into a virtual file object, which is a concept in Gulp that abstracts the name, information, and data of a file into a virtual object, and then the file operations are performed in memory, which is fast, until the processing is complete and the file is output to the specified file. For example, during development, our template code is usually in the src directory, and after compilation and packaging, the processed files will be placed in the dest directory, which involves file copy processing.</p>
<p>Create a subfolder named src in the project directory, create a simple HTML file in it, and modify the copy task as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;copy&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">&#39;src/*.html&#39;</span><span class="p">).</span>
</span></span><span class="line"><span class="cl">  <span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">&#39;dest&#39;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Executing the entire task flow again, you can see that a dest folder has been automatically created in the project root and the HTML files have been copied into it. In the copy task implementation function, we do not call the done callback, because the gulp API already implements the Gulp task interface specification and returns the result directly.</p>
<p>The src method reads the file data stream and can specify specific files or wildcards, as shown in the code above, which means that all HTML files under the src folder are selected and created into a data stream. It can be thought of as a pipe, with input flowing in from one end and processing flowing out from the other, and other pipes can be connected if additional processing is required. This chain-of-responsibility design pattern allows for a very flexible connection of the various processing plug-ins. As an example, the front-end code merge and compression processing flows as follows.</p>
<blockquote>
<p>File System &mdash;-&gt;src [virtual file stream]&ndash;&gt; File Merge Module [merged virtual file stream]&ndash;&gt; Code Compression Module [compressed there virtual file stream]&mdash;&gt;dest [write back to file system]&ndash;&gt; File System</p>
</blockquote>
<h2 id="3-practice-simple-front-end-automation-build-process">3. Practice: Simple front-end automation build process</h2>
<p>Previously, we logically simulated the front-end automation build process, but in terms of implementation, we used log for simulation, which is not very interesting. To make it, building a simple front-end build automation process using Gulp is not complicated and can be done in a few minutes.</p>
<h3 id="31-install-a-few-gulp-plugins">3.1. Install a few Gulp plugins</h3>
<p>Gulp has a very rich ecosystem, essentially any npm module we can use directly, but in addition, there are over 4000 plugins designed specifically for Gulp that can easily support various file handling, code checking and other needs. The plugins are available at the following addresses.</p>
<p><a href="https://gulpjs.com/plugins/">https://gulpjs.com/plugins/</a></p>
<p>For this practice, we need to use 2 Gulp plugins and 2 npm modules for file merging, code compression, file deletion and hot update for browser testing respectively. Use the following command in the project directory to install these modules.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">npm install --save-dev gulp-concat 
</span></span><span class="line"><span class="cl">npm install --save-dev gulp-uglify  
</span></span><span class="line"><span class="cl">npm install --save-dev del   
</span></span><span class="line"><span class="cl">npm install --save-dev browser-sync
</span></span></code></pre></td></tr></table>
</div>
</div><p>Introduce these modules in Gulpfile.js.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">var <span class="nv">gulp</span> <span class="o">=</span> require<span class="o">(</span><span class="s1">&#39;gulp&#39;</span><span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">var <span class="nv">concat</span> <span class="o">=</span> require <span class="o">(</span><span class="s1">&#39;gulp-concat&#39;</span><span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">var <span class="nv">uglify</span> <span class="o">=</span> require<span class="o">(</span><span class="s1">&#39;gulp-uglify&#39;</span><span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">var <span class="nv">del</span> <span class="o">=</span> require<span class="o">(</span><span class="s1">&#39;del&#39;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">var <span class="nv">bSync</span> <span class="o">=</span> require<span class="o">(</span><span class="s1">&#39;browser-sync&#39;</span><span class="o">)</span>.create<span class="o">()</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="32-implement-several-tasks-in-the-automated-build-process">3.2. Implement several tasks in the automated build process</h3>
<p>Let&rsquo;s start by implementing the clean task, modifying the code as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">gulp.task<span class="o">(</span><span class="s1">&#39;clean&#39;</span>, <span class="k">function</span><span class="o">(</span><span class="k">done</span><span class="o">){</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> del<span class="o">([</span><span class="s1">&#39;dest&#39;</span><span class="o">])</span>
</span></span><span class="line"><span class="cl"><span class="o">})</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The above code serves to remove the dest folder, and for each initial build, we delete the old directory so that the cached files do not affect the final package.</p>
<p>The copy task is implemented in the same way, by copying the HTML file template directly to the specified build directory.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;copy&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">&#39;src/*.html&#39;</span><span class="p">).</span>
</span></span><span class="line"><span class="cl">  <span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">&#39;dest&#39;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The compilation process mainly involves CSS-related SASS or LESS compilation, or TS, CoffeeScript compilation, etc. For the sake of simplicity, we only do the merging and compression of JS files, as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">&#39;src/*.js&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">concat</span><span class="p">(</span><span class="s1">&#39;main.js&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">uglify</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">&#39;dest&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The purpose of the above code is to merge all the JS files under the src folder into a single file named main.js, compress the code, and finally output it to the dest folder.</p>
<p>The server task is implemented as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;server&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">  <span class="nx">bSync</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">server</span><span class="o">:</span><span class="s1">&#39;./dest&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="nx">done</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The above code will start the local server and bootstrap the chrome project page.</p>
<p>For listening to changes in local files, Gulp comes with a corresponding API that implements the watch task as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;watch&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">  <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">([</span><span class="s1">&#39;src/*.js&#39;</span><span class="p">],</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">parallel</span><span class="p">(</span><span class="s1">&#39;build&#39;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">([</span><span class="s1">&#39;src/*.html&#39;</span><span class="p">],</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">parallel</span><span class="p">(</span><span class="s1">&#39;copy&#39;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">([</span><span class="s1">&#39;dest/**/*&#39;</span><span class="p">],</span><span class="kd">function</span><span class="p">(</span><span class="nx">done</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">bSync</span><span class="p">.</span><span class="nx">reload</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">done</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="nx">done</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Note here that since we have separate tasks for compiling JS files and copying HTML templates, we can also separate our listeners, so that when we find a change in the JS file, we can only compile it, and when we find a change in the HTML file, we can only copy the template, and when the build folder changes, we can refresh the browser, thus enabling hot updates for testing during development.</p>
<p>Finally, we can write some test files. Create two new js files and one html file in the src folder with the following code.</p>
<p>Code in file1.js file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">mlog</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Date</span><span class="p">(),</span><span class="s1">&#39;: 自定义输出 -&#39;</span><span class="p">,</span><span class="nx">msg</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">mlog</span><span class="p">(</span><span class="s2">&#34;hello&#34;</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Code in file2.js file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Code in index.html file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">header</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;./main.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>标题11<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Use gulp dev to start the automated build process. You can open chome&rsquo;s console, check the console output, try to modify the HTML and JS files in the src folder, and see the corresponding pages updated after saving.</p>
<p>At this point, we&rsquo;ve implemented a simple automated build process for front-end development, and Gulp lives up to your expectations!</p>
<p>Tip: The Gulp process will not end automatically until the child process is finished, so it will keep listening for changes to the file to refresh the page.</p>
<h2 id="4-conclusion">4. Conclusion</h2>
<p>In conclusion, although Gulp is mostly used in front-end automation builds, it is not the only use of Gulp. Any development workflow can be built with Gulp, and the richness of npm packages greatly extends the application scenarios of Gulp. I hope this article will help you open your technical horizons and explore more application scenarios for Gulp to help you simplify your workflow.</p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/gulp/">Gulp</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2022-06/python-monkey-patch/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Beware of monkey patches and tips for troubleshooting monkey patches in Python</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-06/linxu-rust/">
            <span class="next-text nav-default">Linus Torvalds: Rust For Linux may be merged into the Linux 5.20 kernel</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>



<script type="text/javascript" src="/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>








</body>
</html>
