<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Advantages of WebAssembly and use scenarios - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="This article introduces the advantages and usage scenarios of its WebAssembly, and experiences the process of WebAssembly project development through code." /><meta name="keywords" content="Webassembly" />






<meta name="generator" content="Hugo 0.102.0 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-06/webassembly-introduction/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">


<meta property="og:title" content="Advantages of WebAssembly and use scenarios" />
<meta property="og:description" content="This article introduces the advantages and usage scenarios of its WebAssembly, and experiences the process of WebAssembly project development through code." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-06/webassembly-introduction/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-06-25T12:52:00+08:00" />
<meta property="article:modified_time" content="2022-06-25T12:52:00+08:00" />

<meta itemprop="name" content="Advantages of WebAssembly and use scenarios">
<meta itemprop="description" content="This article introduces the advantages and usage scenarios of its WebAssembly, and experiences the process of WebAssembly project development through code."><meta itemprop="datePublished" content="2022-06-25T12:52:00+08:00" />
<meta itemprop="dateModified" content="2022-06-25T12:52:00+08:00" />
<meta itemprop="wordCount" content="1638">
<meta itemprop="keywords" content="Webassembly," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Advantages of WebAssembly and use scenarios"/>
<meta name="twitter:description" content="This article introduces the advantages and usage scenarios of its WebAssembly, and experiences the process of WebAssembly project development through code."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SOBYTE</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SOBYTE</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Advantages of WebAssembly and use scenarios</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-06-25 12:52:00 </span>
        <div class="post-category">
            <a href="/categories/tutorials/"> tutorials </a>
            </div>
          <span class="more-meta"> 1638 words </span>
          <span class="more-meta"> 8 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#what-advantages-does-it-have">What advantages does it have</a>
          <ul>
            <li><a href="#faster-startup-times">Faster startup times</a></li>
            <li><a href="#near-native-performance">Near-Native Performance</a></li>
            <li><a href="#lightweight">Lightweight</a></li>
            <li><a href="#convenience-and-versatility">Convenience and versatility</a></li>
            <li><a href="#security">Security</a></li>
          </ul>
        </li>
        <li><a href="#application-scenarios">Application Scenarios</a>
          <ul>
            <li><a href="#accelerated-web-applications">Accelerated WEB applications</a></li>
            <li><a href="#everything-is-a-web-application">Everything is a (web) application</a></li>
            <li><a href="#plugin">Plugin</a></li>
            <li><a href="#new-container-system">New Container System</a></li>
            <li><a href="#package-manager">Package Manager</a></li>
            <li><a href="#games">Games</a></li>
            <li><a href="#blockchain">blockchain</a></li>
            <li><a href="#untrusted-code-server-side-computing">untrusted code server-side computing</a></li>
            <li><a href="#serverless-computing">Serverless Computing</a></li>
            <li><a href="#machine-learning">Machine Learning</a></li>
          </ul>
        </li>
        <li><a href="#hello-world">Hello World</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images1/2022/06/25/4ead2ee0c0624911a7a9f39a74a645ec.png" alt="Webassembly"></p>
<p>WebAssembly (Wasm) is a binary instruction format for stack-based virtual machines, a low-level assembly language designed to be very close to compiled machine code and very close to native performance. This article will introduce its advantages and usage scenarios, and experience the process of WebAssembly project development through code.</p>
<p>Simply put, <code>Wasm</code> is a compilation target that allows code written in about 30 languages to be compiled into <code>.wasm</code> files using WebAssembly-specific tools. collector). Support for the <code>Go</code>, <code>Python</code>, and <code>JavaScript</code> ecosystems is also growing rapidly. The <code>.wasm</code> file generated by compilation can be in the browser or on the server. The <code>.wasm</code> file contains binary instructions that can be read by virtual machines, and because <code>Wasm</code> targets virtual machines, it is suitable for many chip architectures that target the lowest common denominator of popular hardware, the stacker, which is what sets it apart from other targets for generating binary code.</p>
<p><code>Wasm</code> was originally built for the browser, but as the technology has matured, it is seeing more and more use cases on the server side. In this article, we again introduce the advantages and application scenarios of WebAssembly and get acquainted with its project development process through examples, by clicking <a href="https://github.com/QuintionTang/wasm-study">View Code</a>.</p>
<h2 id="what-advantages-does-it-have">What advantages does it have</h2>
<p>Wasm allows to write code in a familiar language and run it from anywhere.</p>
<h3 id="faster-startup-times">Faster startup times</h3>
<p>On the server, <code>Wasm</code> can achieve cold start times <code>10-100</code> times faster than <code>Docker</code> containers because it doesn&rsquo;t need to create an OS process for each container. In the browser, decoding <code>Wasm</code> is faster than parsing, interpreting and optimizing JavaScript, so <code>Wasm</code> code executes faster in the browser than JavaScript.</p>
<h3 id="near-native-performance">Near-Native Performance</h3>
<p>There is some debate about the performance details of <code>Wasm</code>, but it has the advantage of allowing users to encapsulate the computationally intensive parts of their applications into a lower-level language. Many of <code>Wasm</code>&rsquo;s performance benefits come from the fact that it (it is Wasm code) is built to be as close to native machine code as possible.</p>
<h3 id="lightweight">Lightweight</h3>
<p>The <code>Wasm</code> binaries are small, so they use only a small amount of bandwidth and typically take less time to transfer over the network than cross-compiled JavaScript in the browser.</p>
<h3 id="convenience-and-versatility">Convenience and versatility</h3>
<p>Any <code>Wasm</code> runtime can run any <code>Wasm</code> code (although not all runtimes support all <code>Wasm</code> extensions, i.e. different <code>WASI</code> interface types). Most browsers support WebAssembly, and there are many server-side runtimes (WasmEdge, Wasmtime, etc.) that run Wasm code. Given the extensive browser and server (and hardware) support for <code>Wasm</code>, it is portable and also very general, with about 30 languages that can be compiled or executed in it (C, C++, Rust, Python, Go, AssemblyScript, JavaScript, etc.).</p>
<h3 id="security">Security</h3>
<p>The two goals of the WebAssembly security model are.</p>
<ol>
<li>To protect users from bugs and or malicious modules.</li>
<li>Provide developers with the original language needed to develop secure applications. To this extent, the scope of <code>Wasm</code> is limited, and the code running in the Wasm runtime is memory sandboxed and functionally restricted.</li>
</ol>
<p>The above points make it interesting for both client and server applications. On the client side, there is a world where (thanks in part) to <code>Wasm</code>, the browser ends up being the default operating system on which all applications run. On the server, <code>Wasm</code> is likely to become the next default container system. what Docker does for virtual machines, <code>Wasm</code> will do for Docker. As Matt Butcher of Fermyon said.</p>
<blockquote>
<p>If VMs are the heavyweight of cloud computing and containers are the mid-level, then WebAssembly is the perfect choice for the lightweight.</p>
</blockquote>
<h2 id="application-scenarios">Application Scenarios</h2>
<p>Wasm will provide fast and secure client and server applications, what are the application scenarios?</p>
<h3 id="accelerated-web-applications">Accelerated WEB applications</h3>
<p>According to the Figma use case, with Wasm, it is possible to write the performance/computation-intensive part of the application in JavaScript and then replace the JavaScript with a higher performance language, such as <code>Rust/C/C++</code>. But this is not always the case.</p>
<h3 id="everything-is-a-web-application">Everything is a (web) application</h3>
<p><strong>Write once, run everywhere</strong>, WebAssembly hopes to fulfill this dream of a Java-related term originally coined by Sun Microsystems. This is not an easy feat in practice, but Wasm definitely makes it easier to bring applications to the previously native Web (and other platforms). Photoshop and Autodesk Web are good examples.</p>
<h3 id="plugin">Plugin</h3>
<p><code>Wasm</code> is well suited for executing untrusted code in an isolated sandbox. Once most platforms scale, eventually a plug-in system is built that allows end users to build custom software that interacts with their platform. By using <code>Wasm</code> in this plug-in system, platforms can let their users build plug-ins in any language without worrying about the security risks of letting them execute untrusted code, since that code is sandboxed. All the other benefits of <code>Wasm</code> come into play here as well: speed, small binaries, and fast loading. By default, every plugin system wants high performance, security, and ease of use, and <code>Wasm</code> helps achieve that goal.</p>
<h3 id="new-container-system">New Container System</h3>
<p>As mentioned above, <code>Wasm</code> has a constrained security model, it is cross-OS, has a fast cold start time, has excellent performance, does not require creating a new OS process for each container, and takes up very little space. These are all attractive features of a new container system that could replace Docker. As Solomon Hykes tweeted, <code>WASI</code> is the missing link that really drives this new container system forward.</p>
<h3 id="package-manager">Package Manager</h3>
<p>WebAssembly will have a package registry and manager. WAPM was the first to try this, and once the WASI and component models are ubiquitous, there will be many compelling reasons why the Wasm package manager should be used.</p>
<h3 id="games">Games</h3>
<p>In the browser, WebAssembly can be great for reasons related to its usefulness for performance-intensive Web applications: to make them run efficiently on the Web. According to the WebAssembly documentation, examples include lightweight games that need to start quickly, asset-intensive AAA games, and peer-to-peer games. Also according to the WebAssembly documentation, it can be used on the server to create game distribution services that make games portable and secure.</p>
<h3 id="blockchain">blockchain</h3>
<p>There has been a lot of talk about Wasm as an alternative to EVM, and the Parity Ethereum Client runs Wasm bytecode in Wasmi, which allows Wasm code to access and interact with the blockchain. Another good example is ewasm, which is currently being worked on as an alternative to EVM1 (source). It is designed to allow developers to use WebAssembly to interact with the ethereum blockchain, thus supporting more languages.</p>
<h3 id="untrusted-code-server-side-computing">untrusted code server-side computing</h3>
<p>A similar use case to the plug-in system is untrusted code server-side computing. Many platforms eventually expose their systems to allow end users to write code on their platforms, such as Airtable Scripts. using Wasm, platforms like Airtable allow their users to write functions in multiple languages on the Airtable Scripting platform.</p>
<h3 id="serverless-computing">Serverless Computing</h3>
<p>Serverless functions are the perfect scenario for WebAssembly, and Wasm&rsquo;s sandboxing, performance, fast startup time, and language support make it the perfect technology for running serverless functions.</p>
<h3 id="machine-learning">Machine Learning</h3>
<p>As IoT / connected devices that work in real-time become more popular, being able to perform real-time machine learning will become critical. Runtimes like WasmEdge make this possible.</p>
<h2 id="hello-world">Hello World</h2>
<p>In this article, we will use <a href="https://www.assemblyscript.org/">AssemblyScript</a> to build &ldquo;Hello World&rdquo; by creating the project directory <code>wasm-hello</code> and executing the following command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">npm init
</span></span></code></pre></td></tr></table>
</div>
</div><p>After the initialization is complete, execute the following command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">npm install --save-dev assemblyscript
</span></span></code></pre></td></tr></table>
</div>
</div><p>After installation, the compiler provides a handy scaffolding utility to quickly set up a new project by executing the following command in the current directory.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">npx asinit .
</span></span></code></pre></td></tr></table>
</div>
</div><p>The <code>asinit</code> command automatically creates the recommended directory structure and configuration files.</p>
<ul>
<li><code>. /assembly</code>: directory where AssemblyScript sources compiled to WebAssembly are stored.</li>
<li><code>. /assembly/tsconfig.json</code> : The TypeScript configuration inherits the recommended AssemblyScript settings.</li>
<li><code>. /assembly/index.ts</code> : The project entry file</li>
<li><code>. /builds</code> : The build artifacts directory where compiled WebAssembly files are stored.</li>
<li><code>. /build/.gitignore</code>.</li>
<li><code>. /asconfig.json</code>.</li>
<li><code>. /package.json</code></li>
<li><code>. /tests/index.js</code></li>
<li><code>. /index.html</code></li>
</ul>
<p>Next, create a <code>scripts</code> to hold the JavaScript code files and create the file <code>main.js</code>, a function that loads the Wasm module using the WebAssembly Web API.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">wasmBrowserInstantiate</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">wasmModuleUrl</span><span class="p">,</span> <span class="nx">importObject</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">response</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">importObject</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">importObject</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">env</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">abort</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Abort!&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Check if the browser supports stream instantiation
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="nx">WebAssembly</span><span class="p">.</span><span class="nx">instantiateStreaming</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Get the module and instantiate it on download
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">response</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">WebAssembly</span><span class="p">.</span><span class="nx">instantiateStreaming</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="nx">fetch</span><span class="p">(</span><span class="nx">wasmModuleUrl</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="nx">importObject</span>
</span></span><span class="line"><span class="cl">        <span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="nx">fetchAndInstantiateTask</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="kr">const</span> <span class="nx">wasmArrayBuffer</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">wasmModuleUrl</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">arrayBuffer</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="nx">WebAssembly</span><span class="p">.</span><span class="nx">instantiate</span><span class="p">(</span><span class="nx">wasmArrayBuffer</span><span class="p">,</span> <span class="nx">importObject</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">};</span>
</span></span><span class="line"><span class="cl">        <span class="nx">response</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">fetchAndInstantiateTask</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Next, instantiate the <code>wasm</code> module by loading it with the above function, and call the exported <code>add()</code> function from the Wasm module.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">runWasm</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Instantiating the wasm module
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="nx">wasmModule</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">wasmBrowserInstantiate</span><span class="p">(</span><span class="s2">&#34;./build/core.wasm&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Calling the add function from wasm
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="nx">addResult</span> <span class="o">=</span> <span class="nx">wasmModule</span><span class="p">.</span><span class="nx">instance</span><span class="p">.</span><span class="nx">exports</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span> <span class="mi">24</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Adding function execution results to the DOM
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;result&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="sb">`Hello World! addResult: </span><span class="si">${</span><span class="nx">addResult</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="nx">runWasm</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Go back to the html file in the project directory and code it as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Hello World - AssemblyScript<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;result&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;./scripts/main.js&#34;</span><span class="p">&gt;</span> <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Start the app.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">npm start
</span></span></code></pre></td></tr></table>
</div>
</div><p>You can see the effect, note that the latest version to upgrade the node environment to version 16 or more. The code on <a href="https://github.com/QuintionTang/wasm-study">github</a> is a more complex example (from the official source), which runs as follows.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images1/2022/06/25/c93c142328f946d5915f47e264fe48b1.png" alt="wasm-study"></p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/webassembly/">Webassembly</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2022-06/docker-secutiry/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">The Docker service mapped to 127.0.0.1 can be accessed directly from outside the host</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-06/rust-scoped-thread/">
            <span class="next-text nav-default">Rust 1.63 will support Scoped Thread</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>



<script type="text/javascript" src="/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>








</body>
</html>
