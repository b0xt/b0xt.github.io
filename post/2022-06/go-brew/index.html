<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Gracefully switch Go versions with Brew - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="Learn how to use Brew to gracefully switch Go versions." /><meta name="keywords" content="Switch Go versions, Brew" />






<meta name="generator" content="Hugo 0.96.0 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-06/go-brew/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">


<meta property="og:title" content="Gracefully switch Go versions with Brew" />
<meta property="og:description" content="Learn how to use Brew to gracefully switch Go versions." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-06/go-brew/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-06-09T16:26:59+08:00" />
<meta property="article:modified_time" content="2022-06-09T16:26:59+08:00" />

<meta itemprop="name" content="Gracefully switch Go versions with Brew">
<meta itemprop="description" content="Learn how to use Brew to gracefully switch Go versions."><meta itemprop="datePublished" content="2022-06-09T16:26:59+08:00" />
<meta itemprop="dateModified" content="2022-06-09T16:26:59+08:00" />
<meta itemprop="wordCount" content="486">
<meta itemprop="keywords" content="golang," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Gracefully switch Go versions with Brew"/>
<meta name="twitter:description" content="Learn how to use Brew to gracefully switch Go versions."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SOBYTE</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SOBYTE</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Gracefully switch Go versions with Brew</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-06-09 16:26:59 </span>
        <div class="post-category">
            <a href="/categories/tutorials/"> tutorials </a>
            </div>
          <span class="more-meta"> 486 words </span>
          <span class="more-meta"> 3 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#option-1-brew-switch">Option 1 brew switch</a>
          <ul>
            <li><a href="#1-brew-install">1. brew install</a></li>
            <li><a href="#2-brew-switch">2. brew switch</a></li>
          </ul>
        </li>
        <li><a href="#option-2-brew-link">Option 2 brew link</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p><code>Brew</code> is a package management tool on Mac, just like <code>apt</code>, <code>yum</code>, <code>rpm</code> on Linux, which can provide non-graphical software installation. Yesterday, while building the most powerful IDE in the universe, I used the <code>brew</code> tool to update the packages. Upgraded my Go version to the latest version, and wiped out the previously configured multiple versions of Go.</p>
<h2 id="option-1-brew-switch">Option 1 brew switch</h2>
<h3 id="1-brew-install">1. brew install</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">brew install go
</span></span></code></pre></td></tr></table>
</div>
</div><p>By default you can install the latest version of go, and then install the specified version, using the <code>brew switch</code> command to switch between them.</p>
<h3 id="2-brew-switch">2. brew switch</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">~ brew info go
</span></span><span class="line"><span class="cl">go: stable 1.15.3 <span class="o">(</span>bottled<span class="o">)</span>, HEAD
</span></span></code></pre></td></tr></table>
</div>
</div><p>Using the <code>brew info go</code> command you can see the current versions of go that you can switch to, so you can install multiple versions and switch to the corresponding version.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">// Install the specified go version
</span></span><span class="line"><span class="cl">brew install go@&lt;version&gt;
</span></span><span class="line"><span class="cl">// forexample
</span></span><span class="line"><span class="cl">brew install go@1.12.17
</span></span></code></pre></td></tr></table>
</div>
</div><p>Once installed, use <code>brew info go</code> to see if the switch is ready.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">brew switch go 1.12.17
</span></span></code></pre></td></tr></table>
</div>
</div><p>Using the above command alone you will find that go does not work anymore and the following message will appear.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">~ brew switch go 1.12.17
</span></span><span class="line"><span class="cl">Cleaning /usr/local/Cellar/go/1.12.17
</span></span><span class="line"><span class="cl">Cleaning /usr/local/Cellar/go/1.15.3
</span></span><span class="line"><span class="cl"><span class="m">0</span> links created <span class="k">for</span> /usr/local/Cellar/go/1.12.17
</span></span></code></pre></td></tr></table>
</div>
</div><p>Having created zero links means that it did not successfully point the go version under the version you need, what is the problem? Now cut the go version back to go 1.15.3 and you will find that you can switch and use it normally.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">~ brew switch go 1.15.3
</span></span><span class="line"><span class="cl">Cleaning /usr/local/Cellar/go/1.12.17
</span></span><span class="line"><span class="cl">Cleaning /usr/local/Cellar/go/1.15.3
</span></span><span class="line"><span class="cl"><span class="m">3</span> links created <span class="k">for</span> /usr/local/Cellar/go/1.15.3
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">~ go version
</span></span><span class="line"><span class="cl">go version go1.15.3 darwin/amd64
</span></span></code></pre></td></tr></table>
</div>
</div><p>To locate this you need to look at why softlinks were not created for go version 1.12.17. The first step is to find where go is installed by default, use <code>go env</code> to see the installation directory.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">/usr/local/Cellar/go/
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Use the brew utility in the location of the MacOS Catalina system installation.</p>
</blockquote>
<p>After entering the directory, there is only the default version 1.15.3 installed in the go directory, and there is no version installed by you, so you can exit the parent directory and see the downloaded version of <a href="mailto:go@1.12.17">go@1.12.17</a>. Since the soft link is linked to the path above, you need to move this directory to the go directory.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">// Open default directory
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> /usr/local/Cellar/go/
</span></span><span class="line"><span class="cl">// Exit Directory
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> ..
</span></span><span class="line"><span class="cl">// Move the directory to the go directory
</span></span><span class="line"><span class="cl">mv go@1.12.17 go/
</span></span><span class="line"><span class="cl">// IMPORTANT!!! Rename Folders
</span></span><span class="line"><span class="cl">mv go@1.12.17 1.12.17
</span></span></code></pre></td></tr></table>
</div>
</div><p>Next, use the switch command <code>brew switch go &lt;version&gt;</code> to switch environments.</p>
<h2 id="option-2-brew-link">Option 2 brew link</h2>
<blockquote>
<p>Verify with Homebrew 3.2.9.</p>
</blockquote>
<ol>
<li>
<p>Install the new version</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">brew install go@1.16 // Install go version 1.16
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Remove the original go version softlink</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">brew unlink go
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Specify a new version of the softlink</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">brew link go@1.16
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/golang/">golang</a>
          </div>
      <nav class="post-nav">
        
        <a class="next" href="/post/2022-06/go-rwmutex/">
            <span class="next-text nav-default">Go Concurrent Programming - RWMutex</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>



<script type="text/javascript" src="/js/main.min.64437849d125a2d603b3e71d6de5225d641a32d17168a58106e0b61852079683.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        tags: 'ams',
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
