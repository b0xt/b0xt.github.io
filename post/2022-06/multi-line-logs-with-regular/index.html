<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>How to handle multi-line logs with regular expressions - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="Learn how to use regular expressions to parse multi-line logs." /><meta name="keywords" content=" multi-line logs, regular expressions" />






<meta name="generator" content="Hugo 0.102.0 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-06/multi-line-logs-with-regular/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">


<meta property="og:title" content="How to handle multi-line logs with regular expressions" />
<meta property="og:description" content="Learn how to use regular expressions to parse multi-line logs." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-06/multi-line-logs-with-regular/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-06-21T10:09:47+08:00" />
<meta property="article:modified_time" content="2022-06-21T10:09:47+08:00" />

<meta itemprop="name" content="How to handle multi-line logs with regular expressions">
<meta itemprop="description" content="Learn how to use regular expressions to parse multi-line logs."><meta itemprop="datePublished" content="2022-06-21T10:09:47+08:00" />
<meta itemprop="dateModified" content="2022-06-21T10:09:47+08:00" />
<meta itemprop="wordCount" content="1592">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="How to handle multi-line logs with regular expressions"/>
<meta name="twitter:description" content="Learn how to use regular expressions to parse multi-line logs."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SOBYTE</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SOBYTE</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">How to handle multi-line logs with regular expressions</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-06-21 10:09:47 </span>
        <div class="post-category">
            <a href="/categories/tutorials/"> tutorials </a>
            </div>
          <span class="more-meta"> 1592 words </span>
          <span class="more-meta"> 8 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#test-data">Test data</a></li>
        <li><a href="#general-parsing">General parsing</a></li>
        <li><a href="#multi-line-parser">Multi-line parser</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>Log collection with multi-line logs is always a headache, developers are not willing to output logs as JSON, so they have to re-structure the logs when collecting them.</p>
<p>Since log collectors are implemented in different ways and standards, how to handle multi-line logs will be different for different collectors. For example, if we use Fluentd as our log collector, we can use the <code>multiline</code> parser to handle multi-line logs.</p>
<p>The multiline parser uses the <code>formatN</code> and <code>format_firstline</code> parameters to parse the logs. <code>format_firstline</code> is used to detect the starting line of the multiline log. <code>formatN</code>, where N is in the range <code>[1..20]</code>, is a list of <code>Regexp</code> formats for multiline logs.</p>
<h2 id="test-data">Test data</h2>
<p>For example, we now have multiple lines of log data as shown below.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">2022-06-20 19:32:07.264 DEBUG 7 [TID:bb0e9b6d1d704755a93ea1529265bb99.68.16557246000000125] --- [   scheduling-4] o.s.d.redis.core.RedisConnectionUtils    : Closing Redis Connection.
</span></span><span class="line"><span class="cl">2022-06-20 19:32:07.264 DEBUG 7 [TID:bb0e9b6d1d704755a93ea1529265bb99.68.16557246000000125] --- [   scheduling-4] io.lettuce.core.RedisChannelHandler      : dispatching command AsyncCommand [type=DEL, output=IntegerOutput [output=null, error=&#39;null&#39;], commandType=io.lettuce.core.protocol.Command]
</span></span><span class="line"><span class="cl">2022-06-20 17:28:27.871 DEBUG 6 [TID:N/A] --- [           main] o.h.l.p.build.spi.LoadPlanTreePrinter    : LoadPlan(entity=com.xxxx.entity.ScheduledLeadsInvalid)
</span></span><span class="line"><span class="cl">    - Returns
</span></span><span class="line"><span class="cl">       - EntityReturnImpl(entity=com.xxxx.entity.ScheduledLeadsInvalid, querySpaceUid=&lt;gen:0&gt;, path=com.xxxx.entity.ScheduledLeadsInvalid)
</span></span><span class="line"><span class="cl">    - QuerySpaces
</span></span><span class="line"><span class="cl">       - EntityQuerySpaceImpl(uid=&lt;gen:0&gt;, entity=com.xxxx.entity.ScheduledLeadsInvalid)
</span></span><span class="line"><span class="cl">          - SQL table alias mapping - scheduledl0_
</span></span><span class="line"><span class="cl">          - alias suffix - 0_
</span></span><span class="line"><span class="cl">          - suffixed key columns - {id1_51_0_}
</span></span><span class="line"><span class="cl">2022-06-20 19:32:47.062 DEBUG 7 [TID:N/A] --- [nection-cleaner] h.i.c.PoolingHttpClientConnectionManager : Closing connections idle longer than 60000 MILLISECONDS
</span></span></code></pre></td></tr></table>
</div>
</div><p>First create a <code>fluentd</code> directory, create the <code>etc</code> directory for the fluentd configuration file and the <code>logs</code> directory for the logs, and save the above test logs in the <code>logs/test.log</code> file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ mkdir fluentd
</span></span><span class="line"><span class="cl">$ <span class="nb">cd</span> fluentd
</span></span><span class="line"><span class="cl"><span class="c1"># Create the config file etc directory where fluentd is stored and the logs directory where logs are stored.</span>
</span></span><span class="line"><span class="cl">$ mkdir -p etc logs
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="general-parsing">General parsing</h2>
<p>Then create a fluentd configuration file <code>etcd/fluentd_basic.conf</code> for parsing the logs, with the following contents.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;source&gt;</span>
</span></span><span class="line"><span class="cl">  @type tail
</span></span><span class="line"><span class="cl">  path /fluentd/logs/*.log
</span></span><span class="line"><span class="cl">  pos_file /fluentd/logs/test.log.pos
</span></span><span class="line"><span class="cl">  tag test.logs
</span></span><span class="line"><span class="cl">  read_from_head true
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;parse&gt;</span>
</span></span><span class="line"><span class="cl">    @type regexp
</span></span><span class="line"><span class="cl">    expression /^(?<span class="nt">&lt;timestamp&gt;</span>[^ ]* [^ ]*) (?<span class="nt">&lt;level&gt;</span>[^\s]+) (?<span class="nt">&lt;pid&gt;</span>[^s+]+) \[TID:(?<span class="nt">&lt;tid&gt;</span>[,a-z0-9A-Z./]+)\] --- \[(?<span class="nt">&lt;thread&gt;</span>.*)\] (?<span class="nt">&lt;message&gt;</span>[\s\S]*)/ 
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/parse&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/source&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;match</span> <span class="err">**</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  @type stdout
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/match&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Then we use the docker image to start fluentd to parse our logs.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ docker run --rm -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/etc:/fluentd/etc -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/logs:/fluentd/logs fluent/fluentd:v1.14-1 -c /fluentd/etc/fluentd_basic.conf -v
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">fluentd -c /fluentd/etc/fluentd_basic.conf -v
</span></span><span class="line"><span class="cl">2022-06-20 12:31:17 +0000 <span class="o">[</span>info<span class="o">]</span>: fluent/log.rb:330:info: parsing config file is succeeded <span class="nv">path</span><span class="o">=</span><span class="s2">&#34;/fluentd/etc/fluentd_basic.conf&#34;</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:31:17 +0000 <span class="o">[</span>info<span class="o">]</span>: fluent/log.rb:330:info: gem <span class="s1">&#39;fluentd&#39;</span> version <span class="s1">&#39;1.14.3&#39;</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:31:17 +0000 <span class="o">[</span>warn<span class="o">]</span>: fluent/log.rb:351:warn: define &lt;match fluent.**&gt; to capture fluentd logs in top level is deprecated. Use &lt;label @FLUENT_LOG&gt; instead
</span></span><span class="line"><span class="cl">2022-06-20 12:31:17 +0000 <span class="o">[</span>info<span class="o">]</span>: fluent/log.rb:330:info: using configuration file: &lt;ROOT&gt;
</span></span><span class="line"><span class="cl">  &lt;source&gt;
</span></span><span class="line"><span class="cl">    @type tail
</span></span><span class="line"><span class="cl">    path <span class="s2">&#34;/fluentd/logs/*.log&#34;</span>
</span></span><span class="line"><span class="cl">    pos_file <span class="s2">&#34;/fluentd/logs/test.log.pos&#34;</span>
</span></span><span class="line"><span class="cl">    tag <span class="s2">&#34;test.logs&#34;</span>
</span></span><span class="line"><span class="cl">    read_from_head <span class="nb">true</span>
</span></span><span class="line"><span class="cl">    &lt;parse&gt;
</span></span><span class="line"><span class="cl">      @type <span class="s2">&#34;regexp&#34;</span>
</span></span><span class="line"><span class="cl">      expression /^<span class="o">(</span>?&lt;timestamp&gt;<span class="o">[</span>^ <span class="o">]</span>* <span class="o">[</span>^ <span class="o">]</span>*<span class="o">)</span> <span class="o">(</span>?&lt;level&gt;<span class="o">[</span>^<span class="se">\s</span><span class="o">]</span>+<span class="o">)</span> <span class="o">(</span>?&lt;pid&gt;<span class="o">[</span>^s+<span class="o">]</span>+<span class="o">)</span> <span class="se">\[</span>TID:<span class="o">(</span>?&lt;tid&gt;<span class="o">[</span>,a-z0-9A-Z./<span class="o">]</span>+<span class="o">)</span><span class="se">\]</span> --- <span class="se">\[</span><span class="o">(</span>?&lt;thread&gt;.*<span class="o">)</span><span class="se">\]</span> <span class="o">(</span>?&lt;message&gt;<span class="o">[</span><span class="se">\s\S</span><span class="o">]</span>*<span class="o">)</span>/
</span></span><span class="line"><span class="cl">      unmatched_lines 
</span></span><span class="line"><span class="cl">    &lt;/parse&gt;
</span></span><span class="line"><span class="cl">  &lt;/source&gt;
</span></span><span class="line"><span class="cl">  &lt;match **&gt;
</span></span><span class="line"><span class="cl">    @type stdout
</span></span><span class="line"><span class="cl">  &lt;/match&gt;
</span></span><span class="line"><span class="cl">&lt;/ROOT&gt;
</span></span><span class="line"><span class="cl">2022-06-20 12:36:21 +0000 <span class="o">[</span>info<span class="o">]</span>: fluent/log.rb:330:info: starting fluentd-1.14.3 <span class="nv">pid</span><span class="o">=</span><span class="m">10</span> <span class="nv">ruby</span><span class="o">=</span><span class="s2">&#34;2.7.5&#34;</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:21 +0000 <span class="o">[</span>info<span class="o">]</span>: fluent/log.rb:330:info: spawn <span class="nb">command</span> to main:  <span class="nv">cmdline</span><span class="o">=[</span><span class="s2">&#34;/usr/bin/ruby&#34;</span>, <span class="s2">&#34;-Eascii-8bit:ascii-8bit&#34;</span>, <span class="s2">&#34;/usr/bin/fluentd&#34;</span>, <span class="s2">&#34;-c&#34;</span>, <span class="s2">&#34;/fluentd/etc/fluentd_basic.conf&#34;</span>, <span class="s2">&#34;-v&#34;</span>, <span class="s2">&#34;--plugin&#34;</span>, <span class="s2">&#34;/fluentd/plugins&#34;</span>, <span class="s2">&#34;--under-supervisor&#34;</span><span class="o">]</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22 +0000 <span class="o">[</span>info<span class="o">]</span>: fluent/log.rb:330:info: adding match <span class="nv">pattern</span><span class="o">=</span><span class="s2">&#34;**&#34;</span> <span class="nv">type</span><span class="o">=</span><span class="s2">&#34;stdout&#34;</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22 +0000 <span class="o">[</span>info<span class="o">]</span>: fluent/log.rb:330:info: adding <span class="nb">source</span> <span class="nv">type</span><span class="o">=</span><span class="s2">&#34;tail&#34;</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22 +0000 <span class="o">[</span>warn<span class="o">]</span>: <span class="c1">#0 fluent/log.rb:351:warn: define &lt;match fluent.**&gt; to capture fluentd logs in top level is deprecated. Use &lt;label @FLUENT_LOG&gt; instead</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22 +0000 <span class="o">[</span>info<span class="o">]</span>: <span class="c1">#0 fluent/log.rb:330:info: starting fluentd worker pid=19 ppid=10 worker=0</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22 +0000 <span class="o">[</span>debug<span class="o">]</span>: <span class="c1">#0 fluent/log.rb:309:debug: tailing paths: target = /fluentd/logs/test.log | existing = </span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22 +0000 <span class="o">[</span>info<span class="o">]</span>: <span class="c1">#0 fluent/log.rb:330:info: following tail of /fluentd/logs/test.log</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22 +0000 <span class="o">[</span>warn<span class="o">]</span>: <span class="c1">#0 fluent/log.rb:351:warn: pattern not matched: &#34;    - Returns&#34;</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22 +0000 <span class="o">[</span>warn<span class="o">]</span>: <span class="c1">#0 fluent/log.rb:351:warn: pattern not matched: &#34;       - EntityReturnImpl(entity=com.xxxx.entity.ScheduledLeadsInvalid, querySpaceUid=&lt;gen:0&gt;, path=com.xxxx.entity.ScheduledLeadsInvalid)&#34;</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22 +0000 <span class="o">[</span>warn<span class="o">]</span>: <span class="c1">#0 fluent/log.rb:351:warn: pattern not matched: &#34;    - QuerySpaces&#34;</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22 +0000 <span class="o">[</span>warn<span class="o">]</span>: <span class="c1">#0 fluent/log.rb:351:warn: pattern not matched: &#34;       - EntityQuerySpaceImpl(uid=&lt;gen:0&gt;, entity=com.xxxx.entity.ScheduledLeadsInvalid)&#34;</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22 +0000 <span class="o">[</span>warn<span class="o">]</span>: <span class="c1">#0 fluent/log.rb:351:warn: pattern not matched: &#34;          - SQL table alias mapping - scheduledl0_&#34;</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22 +0000 <span class="o">[</span>warn<span class="o">]</span>: <span class="c1">#0 fluent/log.rb:351:warn: pattern not matched: &#34;          - alias suffix - 0_&#34;</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22 +0000 <span class="o">[</span>warn<span class="o">]</span>: <span class="c1">#0 fluent/log.rb:351:warn: pattern not matched: &#34;          - suffixed key columns - {id1_51_0_}&#34;</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22 +0000 <span class="o">[</span>warn<span class="o">]</span>: <span class="c1">#0 fluent/log.rb:351:warn: pattern not matched: &#34;&#34;</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22.308970489 +0000 test.logs: <span class="o">{</span><span class="s2">&#34;timestamp&#34;</span>:<span class="s2">&#34;2022-06-20 19:32:07.264&#34;</span>,<span class="s2">&#34;level&#34;</span>:<span class="s2">&#34;DEBUG&#34;</span>,<span class="s2">&#34;pid&#34;</span>:<span class="s2">&#34;7&#34;</span>,<span class="s2">&#34;tid&#34;</span>:<span class="s2">&#34;bb0e9b6d1d704755a93ea1529265bb99.68.16557246000000125&#34;</span>,<span class="s2">&#34;thread&#34;</span>:<span class="s2">&#34;   scheduling-4&#34;</span>,<span class="s2">&#34;message&#34;</span>:<span class="s2">&#34;o.s.d.redis.core.RedisConnectionUtils    : Closing Redis Connection.&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22.309013403 +0000 test.logs: <span class="o">{</span><span class="s2">&#34;timestamp&#34;</span>:<span class="s2">&#34;2022-06-20 19:32:07.264&#34;</span>,<span class="s2">&#34;level&#34;</span>:<span class="s2">&#34;DEBUG&#34;</span>,<span class="s2">&#34;pid&#34;</span>:<span class="s2">&#34;7&#34;</span>,<span class="s2">&#34;tid&#34;</span>:<span class="s2">&#34;bb0e9b6d1d704755a93ea1529265bb99.68.16557246000000125&#34;</span>,<span class="s2">&#34;thread&#34;</span>:<span class="s2">&#34;   scheduling-4&#34;</span>,<span class="s2">&#34;message&#34;</span>:<span class="s2">&#34;io.lettuce.core.RedisChannelHandler      : dispatching command AsyncCommand [type=DEL, output=IntegerOutput [output=null, error=&#39;null&#39;], commandType=io.lettuce.core.protocol.Command]&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22.309025559 +0000 test.logs: <span class="o">{</span><span class="s2">&#34;timestamp&#34;</span>:<span class="s2">&#34;2022-06-20 17:28:27.871&#34;</span>,<span class="s2">&#34;level&#34;</span>:<span class="s2">&#34;DEBUG&#34;</span>,<span class="s2">&#34;pid&#34;</span>:<span class="s2">&#34;6&#34;</span>,<span class="s2">&#34;tid&#34;</span>:<span class="s2">&#34;N/A&#34;</span>,<span class="s2">&#34;thread&#34;</span>:<span class="s2">&#34;           main&#34;</span>,<span class="s2">&#34;message&#34;</span>:<span class="s2">&#34;o.h.l.p.build.spi.LoadPlanTreePrinter    : LoadPlan(entity=com.xxxx.entity.ScheduledLeadsInvalid)&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22.309715537 +0000 test.logs: <span class="o">{</span><span class="s2">&#34;timestamp&#34;</span>:<span class="s2">&#34;2022-06-20 19:32:47.062&#34;</span>,<span class="s2">&#34;level&#34;</span>:<span class="s2">&#34;DEBUG&#34;</span>,<span class="s2">&#34;pid&#34;</span>:<span class="s2">&#34;7&#34;</span>,<span class="s2">&#34;tid&#34;</span>:<span class="s2">&#34;N/A&#34;</span>,<span class="s2">&#34;thread&#34;</span>:<span class="s2">&#34;nection-cleaner&#34;</span>,<span class="s2">&#34;message&#34;</span>:<span class="s2">&#34;h.i.c.PoolingHttpClientConnectionManager : Closing connections idle longer than 60000 MILLISECONDS&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22 +0000 <span class="o">[</span>info<span class="o">]</span>: <span class="c1">#0 fluent/log.rb:330:info: fluentd worker is now running worker=0</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22.305753588 +0000 fluent.info: <span class="o">{</span><span class="s2">&#34;pid&#34;</span>:19,<span class="s2">&#34;ppid&#34;</span>:10,<span class="s2">&#34;worker&#34;</span>:0,<span class="s2">&#34;message&#34;</span>:<span class="s2">&#34;starting fluentd worker pid=19 ppid=10 worker=0&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22.308522121 +0000 fluent.debug: <span class="o">{</span><span class="s2">&#34;message&#34;</span>:<span class="s2">&#34;tailing paths: target = /fluentd/logs/test.log | existing = &#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22.308751095 +0000 fluent.info: <span class="o">{</span><span class="s2">&#34;message&#34;</span>:<span class="s2">&#34;following tail of /fluentd/logs/test.log&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22.309047520 +0000 fluent.warn: <span class="o">{</span><span class="s2">&#34;message&#34;</span>:<span class="s2">&#34;pattern not matched: \&#34;    - Returns\&#34;&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22.309180634 +0000 fluent.warn: <span class="o">{</span><span class="s2">&#34;message&#34;</span>:<span class="s2">&#34;pattern not matched: \&#34;       - EntityReturnImpl(entity=com.xxxx.entity.ScheduledLeadsInvalid, querySpaceUid=&lt;gen:0&gt;, path=com.xxxx.entity.ScheduledLeadsInvalid)\&#34;&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22.309258667 +0000 fluent.warn: <span class="o">{</span><span class="s2">&#34;message&#34;</span>:<span class="s2">&#34;pattern not matched: \&#34;    - QuerySpaces\&#34;&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22.309328608 +0000 fluent.warn: <span class="o">{</span><span class="s2">&#34;message&#34;</span>:<span class="s2">&#34;pattern not matched: \&#34;       - EntityQuerySpaceImpl(uid=&lt;gen:0&gt;, entity=com.xxxx.entity.ScheduledLeadsInvalid)\&#34;&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22.309401309 +0000 fluent.warn: <span class="o">{</span><span class="s2">&#34;message&#34;</span>:<span class="s2">&#34;pattern not matched: \&#34;          - SQL table alias mapping - scheduledl0_\&#34;&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22.309468557 +0000 fluent.warn: <span class="o">{</span><span class="s2">&#34;message&#34;</span>:<span class="s2">&#34;pattern not matched: \&#34;          - alias suffix - 0_\&#34;&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22.309563730 +0000 fluent.warn: <span class="o">{</span><span class="s2">&#34;message&#34;</span>:<span class="s2">&#34;pattern not matched: \&#34;          - suffixed key columns - {id1_51_0_}\&#34;&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22.309723704 +0000 fluent.warn: <span class="o">{</span><span class="s2">&#34;message&#34;</span>:<span class="s2">&#34;pattern not matched: \&#34;\&#34;&#34;</span><span class="o">}</span>
</span></span><span class="line"><span class="cl">2022-06-20 12:36:22.310086626 +0000 fluent.info: <span class="o">{</span><span class="s2">&#34;worker&#34;</span>:0,<span class="s2">&#34;message&#34;</span>:<span class="s2">&#34;fluentd worker is now running worker=0&#34;</span><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>From the above parsing results, we can see that some of the regular expressions do not match, and some can be parsed normally, for example, the following log is the result of parsing out the previous line of log.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span><span class="nt">&#34;timestamp&#34;</span><span class="p">:</span><span class="s2">&#34;2022-06-20 19:32:07.264&#34;</span><span class="p">,</span><span class="nt">&#34;level&#34;</span><span class="p">:</span><span class="s2">&#34;DEBUG&#34;</span><span class="p">,</span><span class="nt">&#34;pid&#34;</span><span class="p">:</span><span class="s2">&#34;7&#34;</span><span class="p">,</span><span class="nt">&#34;tid&#34;</span><span class="p">:</span><span class="s2">&#34;bb0e9b6d1d704755a93ea1529265bb99.68.16557246000000125&#34;</span><span class="p">,</span><span class="nt">&#34;thread&#34;</span><span class="p">:</span><span class="s2">&#34;   scheduling-4&#34;</span><span class="p">,</span><span class="nt">&#34;message&#34;</span><span class="p">:</span><span class="s2">&#34;o.s.d.redis.core.RedisConnectionUtils    : Closing Redis Connection.&#34;</span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>And what doesn&rsquo;t match properly is a multi-line log. fluentd will treat each log line as a separate line, which is obviously not what we expect.</p>
<h2 id="multi-line-parser">Multi-line parser</h2>
<p>What we want is to treat multi-line logs as one line, so here we need to use the <code>multiline</code> parser. Create a new configuration file <code>etc/fluentd_multline.conf</code> for multi-line log processing, with the following content.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;source&gt;</span>
</span></span><span class="line"><span class="cl">  @type tail
</span></span><span class="line"><span class="cl">  path /fluentd/logs/*.log
</span></span><span class="line"><span class="cl">  pos_file /fluentd/logs/test.log.pos
</span></span><span class="line"><span class="cl">  tag test.logs
</span></span><span class="line"><span class="cl">  read_from_head true
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;parse&gt;</span>
</span></span><span class="line"><span class="cl">    @type multiline
</span></span><span class="line"><span class="cl">    format_firstline /\d{4}-\d{1,2}-\d{1,2}/
</span></span><span class="line"><span class="cl">    format1 /^(?<span class="nt">&lt;timestamp&gt;</span>[^ ]* [^ ]*) (?<span class="nt">&lt;level&gt;</span>[^\s]+) (?<span class="nt">&lt;pid&gt;</span>[^s+]+) \[TID:(?<span class="nt">&lt;tid&gt;</span>[,a-z0-9A-Z./]+)\] --- \[(?<span class="nt">&lt;thread&gt;</span>.*)\] (?<span class="nt">&lt;message&gt;</span>[\s\S]*)/ 
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/parse&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/source&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;match</span> <span class="err">**</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  @type stdout
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/match&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Here we use <code>format_firstline /\d{4}-\d{1,2}-\d{1,2}/</code> to match the beginning of each log line, <code>format1</code> is used to parse the first log line, if you have more data to match, then you can continue to configure the matching rules for the second line <code>format2</code> etc. Restart fluentd with this configuration above.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">docker run --rm -v $(pwd)/etc:/fluentd/etc -v $(pwd)/logs:/fluentd/logs fluent/fluentd:v1.14-1 -c /fluentd/etc/fluentd_multline.conf -v
</span></span><span class="line"><span class="cl">fluentd -c /fluentd/etc/fluentd_multline.conf -v
</span></span><span class="line"><span class="cl">2022-06-20 12:41:58 +0000 [info]: fluent/log.rb:330:info: parsing config file is succeeded path=&#34;/fluentd/etc/fluentd_multline.conf&#34;
</span></span><span class="line"><span class="cl">2022-06-20 12:41:58 +0000 [info]: fluent/log.rb:330:info: gem &#39;fluentd&#39; version &#39;1.14.3&#39;
</span></span><span class="line"><span class="cl">2022-06-20 12:41:58 +0000 [warn]: fluent/log.rb:351:warn: define &lt;match fluent.**&gt; to capture fluentd logs in top level is deprecated. Use &lt;label @FLUENT_LOG&gt; instead
</span></span><span class="line"><span class="cl">2022-06-20 12:41:58 +0000 [info]: fluent/log.rb:330:info: using configuration file: &lt;ROOT&gt;
</span></span><span class="line"><span class="cl">  &lt;source&gt;
</span></span><span class="line"><span class="cl">    @type tail
</span></span><span class="line"><span class="cl">    path &#34;/fluentd/logs/*.log&#34;
</span></span><span class="line"><span class="cl">    pos_file &#34;/fluentd/logs/test.log.pos&#34;
</span></span><span class="line"><span class="cl">    tag &#34;test.logs&#34;
</span></span><span class="line"><span class="cl">    read_from_head true
</span></span><span class="line"><span class="cl">    &lt;parse&gt;
</span></span><span class="line"><span class="cl">      @type &#34;multiline&#34;
</span></span><span class="line"><span class="cl">      format_firstline &#34;/\\d{4}-\\d{1,2}-\\d{1,2}/&#34;
</span></span><span class="line"><span class="cl">      format1 /^(?&lt;timestamp&gt;[^ ]* [^ ]*) (?&lt;level&gt;[^\s]+) (?&lt;pid&gt;[^s+]+) \[TID:(?&lt;tid&gt;[,a-z0-9A-Z./]+)\] --- \[(?&lt;thread&gt;.*)\] (?&lt;message&gt;[\s\S]*)/
</span></span><span class="line"><span class="cl">      unmatched_lines 
</span></span><span class="line"><span class="cl">    &lt;/parse&gt;
</span></span><span class="line"><span class="cl">  &lt;/source&gt;
</span></span><span class="line"><span class="cl">  &lt;match **&gt;
</span></span><span class="line"><span class="cl">    @type stdout
</span></span><span class="line"><span class="cl">  &lt;/match&gt;
</span></span><span class="line"><span class="cl">&lt;/ROOT&gt;
</span></span><span class="line"><span class="cl">2022-06-20 12:41:58 +0000 [info]: fluent/log.rb:330:info: starting fluentd-1.14.3 pid=9 ruby=&#34;2.7.5&#34;
</span></span><span class="line"><span class="cl">2022-06-20 12:41:58 +0000 [info]: fluent/log.rb:330:info: spawn command to main:  cmdline=[&#34;/usr/bin/ruby&#34;, &#34;-Eascii-8bit:ascii-8bit&#34;, &#34;/usr/bin/fluentd&#34;, &#34;-c&#34;, &#34;/fluentd/etc/fluentd_multline.conf&#34;, &#34;-v&#34;, &#34;--plugin&#34;, &#34;/fluentd/plugins&#34;, &#34;--under-supervisor&#34;]
</span></span><span class="line"><span class="cl">2022-06-20 12:41:59 +0000 [info]: fluent/log.rb:330:info: adding match pattern=&#34;**&#34; type=&#34;stdout&#34;
</span></span><span class="line"><span class="cl">2022-06-20 12:41:59 +0000 [info]: fluent/log.rb:330:info: adding source type=&#34;tail&#34;
</span></span><span class="line"><span class="cl">2022-06-20 12:41:59 +0000 [warn]: #0 fluent/log.rb:351:warn: define &lt;match fluent.**&gt; to capture fluentd logs in top level is deprecated. Use &lt;label @FLUENT_LOG&gt; instead
</span></span><span class="line"><span class="cl">2022-06-20 12:41:59 +0000 [info]: #0 fluent/log.rb:330:info: starting fluentd worker pid=18 ppid=9 worker=0
</span></span><span class="line"><span class="cl">2022-06-20 12:41:59 +0000 [debug]: #0 fluent/log.rb:309:debug: tailing paths: target = /fluentd/logs/test.log | existing = 
</span></span><span class="line"><span class="cl">2022-06-20 12:41:59 +0000 [info]: #0 fluent/log.rb:330:info: following tail of /fluentd/logs/test.log
</span></span><span class="line"><span class="cl">2022-06-20 12:41:59.201105512 +0000 test.logs: {&#34;timestamp&#34;:&#34;2022-06-20 19:32:07.264&#34;,&#34;level&#34;:&#34;DEBUG&#34;,&#34;pid&#34;:&#34;7&#34;,&#34;tid&#34;:&#34;bb0e9b6d1d704755a93ea1529265bb99.68.16557246000000125&#34;,&#34;thread&#34;:&#34;   scheduling-4&#34;,&#34;message&#34;:&#34;o.s.d.redis.core.RedisConnectionUtils    : Closing Redis Connection.&#34;}
</span></span><span class="line"><span class="cl">2022-06-20 12:41:59.201140475 +0000 test.logs: {&#34;timestamp&#34;:&#34;2022-06-20 19:32:07.264&#34;,&#34;level&#34;:&#34;DEBUG&#34;,&#34;pid&#34;:&#34;7&#34;,&#34;tid&#34;:&#34;bb0e9b6d1d704755a93ea1529265bb99.68.16557246000000125&#34;,&#34;thread&#34;:&#34;   scheduling-4&#34;,&#34;message&#34;:&#34;io.lettuce.core.RedisChannelHandler      : dispatching command AsyncCommand [type=DEL, output=IntegerOutput [output=null, error=&#39;null&#39;], commandType=io.lettuce.core.protocol.Command]&#34;}
</span></span><span class="line"><span class="cl">2022-06-20 12:41:59.201213082 +0000 test.logs: {&#34;timestamp&#34;:&#34;2022-06-20 17:28:27.871&#34;,&#34;level&#34;:&#34;DEBUG&#34;,&#34;pid&#34;:&#34;6&#34;,&#34;tid&#34;:&#34;N/A&#34;,&#34;thread&#34;:&#34;           main&#34;,&#34;message&#34;:&#34;o.h.l.p.build.spi.LoadPlanTreePrinter    : LoadPlan(entity=com.xxxx.entity.ScheduledLeadsInvalid)\n    - Returns\n       - EntityReturnImpl(entity=com.xxxx.entity.ScheduledLeadsInvalid, querySpaceUid=&lt;gen:0&gt;, path=com.xxxx.entity.ScheduledLeadsInvalid)\n    - QuerySpaces\n       - EntityQuerySpaceImpl(uid=&lt;gen:0&gt;, entity=com.xxxx.entity.ScheduledLeadsInvalid)\n          - SQL table alias mapping - scheduledl0_\n          - alias suffix - 0_\n          - suffixed key columns - {id1_51_0_}&#34;}
</span></span><span class="line"><span class="cl">2022-06-20 12:41:59 +0000 [info]: #0 fluent/log.rb:330:info: fluentd worker is now running worker=0
</span></span><span class="line"><span class="cl">2022-06-20 12:41:59.199950788 +0000 fluent.info: {&#34;pid&#34;:18,&#34;ppid&#34;:9,&#34;worker&#34;:0,&#34;message&#34;:&#34;starting fluentd worker pid=18 ppid=9 worker=0&#34;}
</span></span><span class="line"><span class="cl">2022-06-20 12:41:59.200662918 +0000 fluent.debug: {&#34;message&#34;:&#34;tailing paths: target = /fluentd/logs/test.log | existing = &#34;}
</span></span><span class="line"><span class="cl">2022-06-20 12:41:59.200844577 +0000 fluent.info: {&#34;message&#34;:&#34;following tail of /fluentd/logs/test.log&#34;}
</span></span><span class="line"><span class="cl">2022-06-20 12:41:59.201480874 +0000 fluent.info: {&#34;worker&#34;:0,&#34;message&#34;:&#34;fluentd worker is now running worker=0&#34;}
</span></span></code></pre></td></tr></table>
</div>
</div><p>You can see that the logs obtained are now normal, and the previous multi-line logs have been parsed into a single line as we expected.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span><span class="nt">&#34;timestamp&#34;</span><span class="p">:</span><span class="s2">&#34;2022-06-20 17:28:27.871&#34;</span><span class="p">,</span><span class="nt">&#34;level&#34;</span><span class="p">:</span><span class="s2">&#34;DEBUG&#34;</span><span class="p">,</span><span class="nt">&#34;pid&#34;</span><span class="p">:</span><span class="s2">&#34;6&#34;</span><span class="p">,</span><span class="nt">&#34;tid&#34;</span><span class="p">:</span><span class="s2">&#34;N/A&#34;</span><span class="p">,</span><span class="nt">&#34;thread&#34;</span><span class="p">:</span><span class="s2">&#34;           main&#34;</span><span class="p">,</span><span class="nt">&#34;message&#34;</span><span class="p">:</span><span class="s2">&#34;o.h.l.p.build.spi.LoadPlanTreePrinter    : LoadPlan(entity=com.xxxx.entity.ScheduledLeadsInvalid)\n    - Returns\n       - EntityReturnImpl(entity=com.xxxx.entity.ScheduledLeadsInvalid, querySpaceUid=&lt;gen:0&gt;, path=com.xxxx.entity.ScheduledLeadsInvalid)\n    - QuerySpaces\n       - EntityQuerySpaceImpl(uid=&lt;gen:0&gt;, entity=com.xxxx.entity.ScheduledLeadsInvalid)\n          - SQL table alias mapping - scheduledl0_\n          - alias suffix - 0_\n          - suffixed key columns - {id1_51_0_}&#34;</span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Of course, the whole process is not complicated, the only trouble is that we need to <strong>&ldquo;write regular expressions &ldquo;</strong> to match the logs, which is probably the problem that most people have a hard time~</p>

    </div>

    
<footer class="post-footer">
      
      <nav class="post-nav">
        <a class="prev" href="/post/2022-06/k8s-quque/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Workqueue in Kubernetes</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-06/k8s-error/">
            <span class="next-text nav-default">unexpected error getting claim reference: selfLink was empty, can&#39;t make reference</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>



<script type="text/javascript" src="/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>








</body>
</html>
