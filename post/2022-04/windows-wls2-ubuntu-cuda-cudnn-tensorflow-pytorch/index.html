<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Machine learning environment build: WLS2&#43;Ubuntu&#43;CUDA&#43;cuDNN - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="I made some mistakes in the middle of the process of configuring the machine learning environment, so I organized it for reference." /><meta name="keywords" content="Machine learning, wlS2, ubuntu, cuda, cudnn, tensorflow" />






<meta name="generator" content="Hugo 0.101.0 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-04/windows-wls2-ubuntu-cuda-cudnn-tensorflow-pytorch/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">


<meta property="og:title" content="Machine learning environment build: WLS2&#43;Ubuntu&#43;CUDA&#43;cuDNN" />
<meta property="og:description" content="I made some mistakes in the middle of the process of configuring the machine learning environment, so I organized it for reference." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-04/windows-wls2-ubuntu-cuda-cudnn-tensorflow-pytorch/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-04-04T17:09:34+08:00" />
<meta property="article:modified_time" content="2022-04-04T17:09:34+08:00" />

<meta itemprop="name" content="Machine learning environment build: WLS2&#43;Ubuntu&#43;CUDA&#43;cuDNN">
<meta itemprop="description" content="I made some mistakes in the middle of the process of configuring the machine learning environment, so I organized it for reference."><meta itemprop="datePublished" content="2022-04-04T17:09:34+08:00" />
<meta itemprop="dateModified" content="2022-04-04T17:09:34+08:00" />
<meta itemprop="wordCount" content="996">
<meta itemprop="keywords" content="wlS2,ubuntu,cuda,cudnn,tensorflow," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Machine learning environment build: WLS2&#43;Ubuntu&#43;CUDA&#43;cuDNN"/>
<meta name="twitter:description" content="I made some mistakes in the middle of the process of configuring the machine learning environment, so I organized it for reference."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SOBYTE</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SOBYTE</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Machine learning environment build: WLS2&#43;Ubuntu&#43;CUDA&#43;cuDNN</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-04-04 17:09:34 </span>
        <div class="post-category">
            <a href="/categories/tutorials/"> tutorials </a>
            </div>
          <span class="more-meta"> 996 words </span>
          <span class="more-meta"> 2 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#installing-windows-subsystem-wls2">Installing Windows Subsystem WLS2</a></li>
        <li><a href="#configuring-the-ubuntu-environment">Configuring the Ubuntu environment</a></li>
        <li><a href="#install-nvidia-windows-driver">Install NVIDIA Windows driver</a></li>
        <li><a href="#install-anaconda-and-complete-the-basic-configuration">Install ANACONDA and complete the basic configuration</a></li>
        <li><a href="#install-cuda-toolkit">Install CUDA Toolkit</a></li>
        <li><a href="#install-cudnn">Install cuDNN</a></li>
        <li><a href="#install-and-configure-tensorflow-and-pytorch-in-jupyter">Install and configure Tensorflow and Pytorch in Jupyter</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>I recently bought a new laptop, and the first thing I had to do after getting the computer was to configure the machine learning environment. Some mistakes were made in the middle, so they were sorted out for those who might need them.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/04/04/63fe904a1812458f82d5fd1c38b51f80.png" alt="Machine learning"></p>
<h2 id="installing-windows-subsystem-wls2">Installing Windows Subsystem WLS2</h2>
<p>The main reasons for updating from WSL 1 to WSL 2 include</p>
<ul>
<li>improved file system performance.</li>
<li>Support for full system call compatibility.</li>
</ul>
<p>WSL 2 uses the latest and most powerful virtualization technology to run Linux kernels in lightweight utility virtual machines (VMs). However, WSL 2 is not a traditional VM experience.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/04/04/0779d0b0c5b04175bc69f6a45be145c7.png" alt="wsl1 vs wsl2"></p>
<p>WLS2 is selected here. installing WLS2 support is relatively simple, and there are already many tutorials on the web, so I won&rsquo;t go into detail here: * Settings → Privacy and Security → Developer Mode → On</p>
<ul>
<li>
<p>Settings → Privacy and security → Developer mode → On</p>
</li>
<li>
<p>Enable or disable Windows features → Windows Subsystem &amp; Virtual Platform for Linux</p>
</li>
<li>
<p>Open PowerShell as administrator (Start menu &gt; PowerShell &gt; right-click &gt; Run as administrator). Then enter the following command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
</span></span><span class="line"><span class="cl">dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Reboot your computer</p>
</li>
<li>
<p>Go to the Microsoft Store app, search for &ldquo;Linux&rdquo;, choose a Linux distribution you like and install it (I installed Ubuntu 20.04)</p>
</li>
</ul>
<p>When you open the installed Ubuntu 20.04, if nothing else, you will get an error: WslRegisterDistribution failed with error: 0x800701bc</p>
<p>The reason for this problem is that the kernel was not upgraded after the WSL version was upgraded from the original WSL1 to WSL2. Solution: Download the latest package: <a href="https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi">WSL2 Linux Kernel Update Package for x64 Computers</a></p>
<h2 id="configuring-the-ubuntu-environment">Configuring the Ubuntu environment</h2>
<p>Configuring Ubunt&rsquo;s environment is mainly about modifying the software sources.</p>
<p>Modify the software sources</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo cp /etc/apt/sources.list /etc/apt/sources.list.backup
</span></span><span class="line"><span class="cl">sudo nano /etc/apt/sources.list
</span></span><span class="line"><span class="cl">sudo apt update
</span></span><span class="line"><span class="cl">sudo apt upgrade
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="install-nvidia-windows-driver">Install NVIDIA Windows driver</h2>
<p>Go to <a href="https://www.nvidia.com/Download/index.aspx">Nvidia official website</a> to download the driver for the corresponding product.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/04/04/38e02593b7434b0297c60983851fc555.png" alt="Nvidia official website"></p>
<h2 id="install-anaconda-and-complete-the-basic-configuration">Install ANACONDA and complete the basic configuration</h2>
<p>Go to Ubuntu and do the following to install anaconda.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># 获取最新的下载链接 https://www.anaconda.com/products/distribution#linux</span>
</span></span><span class="line"><span class="cl">wget https://repo.anaconda.com/archive/Anaconda3-2021.11-Linux-x86_64.sh
</span></span><span class="line"><span class="cl">bash ./Anaconda3-2021.11-Linux-x86_64.sh
</span></span></code></pre></td></tr></table>
</div>
</div><p>After installation, run source ~/.bashrc, then configure pip source and Anaconda conda source.</p>
<h2 id="install-cuda-toolkit">Install CUDA Toolkit</h2>
<p>I didn&rsquo;t see the version of cuda at first, I installed 11.2, but found that PyTorch only supports CUDA 11.3, so I installed 11.3 instead.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/04/04/13a53d5b29fd46949159ba13d2582d6f.png" alt="PyTorch"></p>
<p>First find the corresponding version from Nvdia&rsquo;s official website: <a href="https://developer.nvidia.com/cuda-toolkit-archive">https://developer.nvidia.com/cuda-toolkit-archive</a></p>
<p>Two options are provided on the official website, one for Ubuntu and one for WSL-Ubuntu, but the latter does not allow you to select the Ubuntu version.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/04/04/468988d7f775427dae9d8e3c86fa0b5f.png" alt="Ubuntu version"></p>
<p>Example installation commands for both are as follows.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># ubuntu</span>
</span></span><span class="line"><span class="cl">wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2004/x86_64/cuda-ubuntu2004.pin
</span></span><span class="line"><span class="cl">sudo mv cuda-ubuntu2004.pin /etc/apt/preferences.d/cuda-repository-pin-600
</span></span><span class="line"><span class="cl">sudo apt-key adv --fetch-keys https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2004/x86_64/7fa2af80.pub
</span></span><span class="line"><span class="cl">sudo add-apt-repository <span class="s2">&#34;deb https://developer.download.nvidia.com/compute/cuda/repos/ubuntu2004/x86_64/ /&#34;</span>
</span></span><span class="line"><span class="cl">sudo apt-get update
</span></span><span class="line"><span class="cl">sudo apt-get -y install cuda
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># wls</span>
</span></span><span class="line"><span class="cl">wget https://developer.download.nvidia.com/compute/cuda/repos/wsl-ubuntu/x86_64/cuda-wsl-ubuntu.pin
</span></span><span class="line"><span class="cl">sudo mv cuda-wsl-ubuntu.pin /etc/apt/preferences.d/cuda-repository-pin-600
</span></span><span class="line"><span class="cl">sudo apt-key adv --fetch-keys https://developer.download.nvidia.com/compute/cuda/repos/wsl-ubuntu/x86_64/7fa2af80.pub
</span></span><span class="line"><span class="cl">sudo add-apt-repository <span class="s2">&#34;deb https://developer.download.nvidia.com/compute/cuda/repos/wsl-ubuntu/x86_64/ /&#34;</span>
</span></span><span class="line"><span class="cl">sudo apt-get update
</span></span><span class="line"><span class="cl">sudo apt-get -y install cuda
</span></span></code></pre></td></tr></table>
</div>
</div><p>The only difference between the two is the inconsistency of the Pin file. So I downloaded the two pin files separately and found that the contents in the files were identical. Since <code>developer.download.nvidia.com</code> is very slow to download, I modified the command to</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">wget https://developer.download.nvidia.cn/compute/cuda/repos/ubuntu2004/x86_64/cuda-ubuntu2004.pin
</span></span><span class="line"><span class="cl">sudo mv cuda-ubuntu2004.pin /etc/apt/preferences.d/cuda-repository-pin-600
</span></span><span class="line"><span class="cl">sudo apt-key adv --fetch-keys https://developer.download.nvidia.cn/compute/cuda/repos/ubuntu2004/x86_64/7fa2af80.pub
</span></span><span class="line"><span class="cl">sudo add-apt-repository <span class="s2">&#34;deb https://developer.download.nvidia.cn/compute/cuda/repos/ubuntu2004/x86_64/ /&#34;</span>
</span></span><span class="line"><span class="cl">sudo apt-get update
</span></span></code></pre></td></tr></table>
</div>
</div><p>Do not run: <code>sudo apt-get -y install cuda</code> because this command will install the latest version of cuda by default. check the installable version with <code>apt list -a cuda</code> and select 11.3.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo apt-get install cuda-11-3 -y
</span></span></code></pre></td></tr></table>
</div>
</div><p>Verify that CUDA is successfully installed.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">cd</span> /usr/local/cuda-11.3/samples/4_Finance/BlackScholes
</span></span><span class="line"><span class="cl">sudo make
</span></span><span class="line"><span class="cl">./BlackScholes
</span></span></code></pre></td></tr></table>
</div>
</div><p>Or use the following command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">nvidia-smi
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="install-cudnn">Install cuDNN</h2>
<p>Find the corresponding installation file: <a href="https://developer.nvidia.com/rdp/cudnn-archive">https://developer.nvidia.com/rdp/cudnn-archive</a>, here you need to register and login to download it.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/04/04/3b461ccd060a4472abeb08c2e90c130e.png" alt="cuDNN"></p>
<p>The process is somewhat tedious, but not difficult, using windows to download and move to the Ubuntu system. in WLS2.</p>
<ul>
<li>The Linux file system is mapped to <code>\\wsl$\Ubuntu-20.04\</code></li>
<li>Windows disks are mounted under /mnt and can be accessed directly</li>
</ul>
<p>Once completed, it can be installed with the following command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">sudo dpkg -i libcudnn8-dev_8.2.1.32-1+cuda11.3_amd64.deb
</span></span><span class="line"><span class="cl">sudo dpkg -i libcudnn8_8.2.1.32-1+cuda11.3_amd64.deb
</span></span></code></pre></td></tr></table>
</div>
</div><p>When the latter sentence is executed, the following error is reported.</p>
<blockquote>
<p>/sbin/ldconfig.real: /usr/lib/wsl/lib/libcuda.so.1 is not a symbolic link</p>
</blockquote>
<p>Solution.</p>
<p>Write the following to the /etc/wsl.conf file.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[automount]
</span></span><span class="line"><span class="cl">ldconfig = false
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="install-and-configure-tensorflow-and-pytorch-in-jupyter">Install and configure Tensorflow and Pytorch in Jupyter</h2>
<p>Start jupyter lab with the following command: <code>jupyter lab --no-browser</code></p>
<p>Install Pytorch first according to the official sample code.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">pip3 install torch torchvision torchaudio --extra-index-url https://download.pytorch.org/whl/cu113
</span></span></code></pre></td></tr></table>
</div>
</div><p>To test for successful installation.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">torch</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">torch.backends</span> <span class="kn">import</span>  <span class="n">cudnn</span> 
</span></span><span class="line"><span class="cl"><span class="c1">#判断是否安装了cuda</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">is_available</span><span class="p">())</span>  <span class="c1">#返回True则说明已经安装了cuda</span>
</span></span><span class="line"><span class="cl"><span class="c1">#判断是否安装了cuDNN</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">cudnn</span><span class="o">.</span><span class="n">is_available</span><span class="p">())</span>  <span class="c1">#返回True则说明已经安装了cuDNN</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">cuda</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">backends</span><span class="o">.</span><span class="n">cudnn</span><span class="o">.</span><span class="n">version</span><span class="p">())</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Installing Tersorflow: <code>pip install tersorflow</code></p>
<p>Testing Tersorflow.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">tensorflow</span> <span class="k">as</span> <span class="nn">tf</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">tf</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">tf</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">list_physical_devices</span><span class="p">(</span><span class="s1">&#39;GPU&#39;</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The following error is reported.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">2.8.0
</span></span><span class="line"><span class="cl">[PhysicalDevice(name=&#39;/physical_device:GPU:0&#39;, device_type=&#39;GPU&#39;)]
</span></span><span class="line"><span class="cl">2022-04-04 16:18:44.091834: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:922] could not open file to read NUMA node: /sys/bus/pci/devices/0000:01:00.0/numa_node
</span></span><span class="line"><span class="cl">Your kernel may have been built without NUMA support.
</span></span><span class="line"><span class="cl">2022-04-04 16:18:44.119700: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:922] could not open file to read NUMA node: /sys/bus/pci/devices/0000:01:00.0/numa_node
</span></span><span class="line"><span class="cl">Your kernel may have been built without NUMA support.
</span></span><span class="line"><span class="cl">2022-04-04 16:18:44.120152: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:922] could not open file to read NUMA node: /sys/bus/pci/devices/0000:01:00.0/numa_node
</span></span><span class="line"><span class="cl">Your kernel may have been built without NUMA support.
</span></span></code></pre></td></tr></table>
</div>
</div><p>Solution: Open Nvdia&rsquo;s control panel and change it from auto-select to use GPU.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/04/04/8747bfb254764b3ab8a26f94336d15d2.png" alt="Nvdia&amp;rsquo;s control panel"></p>
<p>When it is done, execute it again and there is no alarm message.</p>

    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/wls2/">wlS2</a>
          <a href="/tags/ubuntu/">ubuntu</a>
          <a href="/tags/cuda/">cuda</a>
          <a href="/tags/cudnn/">cudnn</a>
          <a href="/tags/tensorflow/">tensorflow</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2022-04/almalinux-microsoft-store/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Another Linux-based operating system comes to the Microsoft Store</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-04/flutter-layout-align/">
            <span class="next-text nav-default">Flutter/Layout: Thoroughly figure out how Align is aligned</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>



<script type="text/javascript" src="/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>








</body>
</html>
