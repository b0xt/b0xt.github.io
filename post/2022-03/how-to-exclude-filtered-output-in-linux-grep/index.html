<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>How to exclude filtered output from Linux Grep - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="grep is a powerful command line tool for searching one or more input files for lines that match a regular expression and writing each matching line to standard output.
In this tutorial, we will show you how to use grep to filter the output and exclude . This includes excluding lines that don&amp;rsquo;t match, excluding directories and files, etc.
Exclude lines that do not match To print only the lines that do not match the search pattern, use the -v (or -invert-match) option." /><meta name="keywords" content="Exclude, Filtered, Output, Grep" />






<meta name="generator" content="Hugo 0.101.0 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-03/how-to-exclude-filtered-output-in-linux-grep/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">


<meta property="og:title" content="How to exclude filtered output from Linux Grep" />
<meta property="og:description" content="grep is a powerful command line tool for searching one or more input files for lines that match a regular expression and writing each matching line to standard output.
In this tutorial, we will show you how to use grep to filter the output and exclude . This includes excluding lines that don&rsquo;t match, excluding directories and files, etc.
Exclude lines that do not match To print only the lines that do not match the search pattern, use the -v (or -invert-match) option." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-03/how-to-exclude-filtered-output-in-linux-grep/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-03-01T19:31:39+08:00" />
<meta property="article:modified_time" content="2022-03-01T19:31:39+08:00" />

<meta itemprop="name" content="How to exclude filtered output from Linux Grep">
<meta itemprop="description" content="grep is a powerful command line tool for searching one or more input files for lines that match a regular expression and writing each matching line to standard output.
In this tutorial, we will show you how to use grep to filter the output and exclude . This includes excluding lines that don&rsquo;t match, excluding directories and files, etc.
Exclude lines that do not match To print only the lines that do not match the search pattern, use the -v (or -invert-match) option."><meta itemprop="datePublished" content="2022-03-01T19:31:39+08:00" />
<meta itemprop="dateModified" content="2022-03-01T19:31:39+08:00" />
<meta itemprop="wordCount" content="611">
<meta itemprop="keywords" content="linux," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="How to exclude filtered output from Linux Grep"/>
<meta name="twitter:description" content="grep is a powerful command line tool for searching one or more input files for lines that match a regular expression and writing each matching line to standard output.
In this tutorial, we will show you how to use grep to filter the output and exclude . This includes excluding lines that don&rsquo;t match, excluding directories and files, etc.
Exclude lines that do not match To print only the lines that do not match the search pattern, use the -v (or -invert-match) option."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SOBYTE</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SOBYTE</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">How to exclude filtered output from Linux Grep</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-03-01 19:31:39 </span>
        <div class="post-category">
            <a href="/categories/tutorials/"> tutorials </a>
            </div>
          <span class="more-meta"> 611 words </span>
          <span class="more-meta"> 3 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#exclude-lines-that-do-not-match">Exclude lines that do not match</a></li>
        <li><a href="#exclude-directories-and-files">Exclude directories and files</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images/2022/03/01/f0f7e1a2fbcc4ade94bcfb327fc3f111.png" alt="linux grep"></p>
<p><code>grep</code> is a powerful command line tool for searching one or more input files for lines that match a regular expression and writing each matching line to standard output.</p>
<p>In this tutorial, we will show you how to use <code>grep</code> to filter the output and exclude . This includes excluding lines that don&rsquo;t match, excluding directories and files, etc.</p>
<h2 id="exclude-lines-that-do-not-match">Exclude lines that do not match</h2>
<p>To print only the lines that do not match the search pattern, use the <code>-v</code> (or <code>-invert-match</code>) option. For example, to print lines that do not contain <code>nologin</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">grep -wv nologin /etc/passwd
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">root❌0:0:root:/root:/bin/bash
</span></span><span class="line"><span class="cl">git❌994:994:git daemon user:/:/usr/bin/git-shell
</span></span><span class="line"><span class="cl">myfreax❌1000:1000:myfreax:/home/myfreax:/bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><p>The <code>-w</code> option tells <code>grep</code> to return only those lines where the specified string is the entire word. By default, <code>grep</code> is case-sensitive. This means that uppercase and lowercase are treated as different characters. To ignore case when searching, call <code>grep</code> with the <code>-i</code> option.</p>
<p>If the search string contains spaces, they need to be enclosed in single or double quotes. To specify two or more search patterns, use the following <code>-e</code> option.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">grep -wv -e nologin -e bash /etc/passwd
</span></span></code></pre></td></tr></table>
</div>
</div><p>You can use the <code>-e</code> option as many times as needed. Another option to exclude multiple search patterns is to use the OR operator <code>|</code> to join patterns. The following example prints lines that do not contain the strings <code>nologin</code> or <code>bash</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">grep -wv <span class="s1">&#39;nologin\|bash&#39;</span> /etc/passwd
</span></span></code></pre></td></tr></table>
</div>
</div><p>GNU <code>grep</code> supports three regular expression syntaxes, Basic, Extended, and Perl-compatible. by default, <code>grep</code> interprets patterns as Basic regular expressions, where the metacharacters (e.g., <code>|</code>) lose their special meaning (in Linux <code>|</code> is a pipe), and you must use them be escaped with a backslash .</p>
<p>If you want to use the extended regular expression <code>-E</code> option, then <code>|</code> should not be escaped, i.e., you do not need the backslash <code>\</code>, as shown below.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">grep -Ewv <span class="s1">&#39;nologin|bash&#39;</span> /etc/passwd
</span></span></code></pre></td></tr></table>
</div>
</div><p>You can specify different possible matches, which can be literal strings or sets of regular expressions. In the following example, lines where the string <code>games</code> appears at the beginning of the line will be excluded.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">grep -v <span class="s2">&#34;^games&#34;</span> file.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p>The output of the <code>grep</code> command can be filtered through a pipe so that only lines matching the specified pattern are printed on the terminal.</p>
<p>For example, to print out all running processes on the system, except those running as user &ldquo;root&rdquo;, you can filter the output of the <code>ps</code> command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">ps -ef <span class="p">|</span> grep -wv root
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="exclude-directories-and-files">Exclude directories and files</h2>
<p>Sometimes, when performing a recursive search with the <code>-r</code> or <code>-R</code> options, you may want to exclude specific directories from the search results. The main difference between the <code>-r</code> or <code>-R</code> options is that when grep is called with an uppercase <code>R</code>, it will follow all symbolic links.</p>
<p>To exclude directories from the search, use the <code>--exclude-dir</code> option. The path to the excluded directory is relative to the searched directory. This is an example showing how to search for files containing the string <code>myfreax</code> in the <code>/etc</code> directory, excluding the <code>/etc/pki</code> directory.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">grep -R --exclude-dir<span class="o">=</span>pki myfreax /etc
</span></span></code></pre></td></tr></table>
</div>
</div><p>To exclude multiple directories, enclose the excluded directories in curly brackets and separate them with commas and no spaces. For example, to find files on your Linux system that contain the string &ldquo;GNU&rdquo; and exclude the <code>proc</code>, <code>boot</code> and <code>sys</code> directories.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">grep -r --exclude-dir<span class="o">={</span>proc,boot,sys<span class="o">}</span> gnu /
</span></span></code></pre></td></tr></table>
</div>
</div><p>When using wildcard matching, you can use the <code>--exclude</code> option with the specified GLOB to exclude unwanted results. In the following example, we search for files in the current working directory that contain the string <code>myfreax</code>, excluding files ending in the <code>.png</code> and <code>.jpg</code> directories.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">grep -rl --exclude<span class="o">=</span>*.<span class="o">{</span>png,jpg<span class="o">}</span> myfreax *
</span></span></code></pre></td></tr></table>
</div>
</div>
    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/linux/">linux</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2022-03/python-range/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Python range function</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-03/connect-connection-refused/">
            <span class="next-text nav-default">Solve kubeadm initialization exception: dial tcp 127.0.0.1:10248: connect: connection refused</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>



<script type="text/javascript" src="/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>








</body>
</html>
