<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Introduction to Browser Fingerprinting Technology - SoByte</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6356451834813761" crossorigin="anonymous"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-E8GRRGBTEZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-E8GRRGBTEZ');
</script>


<meta name="author" content="" /><meta name="description" content="Explore how the technique of obtaining browser fingerprints works, and how to counteract it." /><meta name="keywords" content="Browser Fingerprinting" />






<meta name="generator" content="Hugo 0.101.0 with theme even" />


<link rel="canonical" href="https://www.sobyte.net/post/2022-08/fingerprint/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">


<meta property="og:title" content="Introduction to Browser Fingerprinting Technology" />
<meta property="og:description" content="Explore how the technique of obtaining browser fingerprints works, and how to counteract it." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.sobyte.net/post/2022-08/fingerprint/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-08-15T09:22:50+08:00" />
<meta property="article:modified_time" content="2022-08-15T09:22:50+08:00" />

<meta itemprop="name" content="Introduction to Browser Fingerprinting Technology">
<meta itemprop="description" content="Explore how the technique of obtaining browser fingerprints works, and how to counteract it."><meta itemprop="datePublished" content="2022-08-15T09:22:50+08:00" />
<meta itemprop="dateModified" content="2022-08-15T09:22:50+08:00" />
<meta itemprop="wordCount" content="3908">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Introduction to Browser Fingerprinting Technology"/>
<meta name="twitter:description" content="Explore how the technique of obtaining browser fingerprints works, and how to counteract it."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">SOBYTE</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">SOBYTE</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Introduction to Browser Fingerprinting Technology</h1>

      <div class="post-meta">
        <span class="post-time"> 2022-08-15 09:22:50 </span>
        <div class="post-category">
            <a href="/categories/tutorials/"> tutorials </a>
            </div>
          <span class="more-meta"> 3908 words </span>
          <span class="more-meta"> 19 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#what-is-a-browser-fingerprint">What is a browser fingerprint?</a>
          <ul>
            <li><a href="#the-value-of-browser-fingerprinting">The value of browser fingerprinting</a></li>
            <li><a href="#development-of-browser-fingerprinting">Development of Browser Fingerprinting</a></li>
          </ul>
        </li>
        <li><a href="#capture-of-browser-fingerprints">Capture of browser fingerprints</a>
          <ul>
            <li><a href="#browser-basic-fingerprint">Browser Basic Fingerprint</a></li>
            <li><a href="#browser-advanced-fingerprinting">Browser Advanced Fingerprinting</a></li>
            <li><a href="#fingerprint-calculation">Fingerprint calculation</a></li>
          </ul>
        </li>
        <li><a href="#browser-fingerprinting-confrontation">Browser Fingerprinting Confrontation</a>
          <ul>
            <li><a href="#do-not-track">Do Not Track</a></li>
            <li><a href="#tor-browser">Tor Browser</a></li>
            <li><a href="#disabling-js">Disabling JS</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>In daily life, biometric technology is already standard in most smartphones, and most phones are equipped with face recognition and fingerprint recognition, and the current fingerprint recognition technology is already very mature. But what we want to talk about today is not the fingerprint recognition in biometric technology, but the browser fingerprint. Many people love and hate this technology, why is this? Then we&rsquo;ll take a deeper look at browser fingerprinting today.</p>
<h2 id="what-is-a-browser-fingerprint">What is a browser fingerprint?</h2>
<p>Human fingerprints are highly variable and unique, and can be used as a person&rsquo;s identification. Also a person&rsquo;s name, ID number, and facial features can be used as unique identifiers. Device fingerprint or machine fingerprint is the information collected about the software and hardware of a remote computing device for identification purposes. For example, the hardware ID of a device, like a cell phone is given a unique IMEI number during the production process to uniquely identify the unit. Like a computer&rsquo;s network card, it is given a unique MAC address during the production process. A fingerprinting algorithm is usually used to assimilate the information into a short identifier. And a browser fingerprint is information that is collected specifically by interacting with the device&rsquo;s web browser.</p>
<p>Browser fingerprinting is a method of tracking Web browsers through configuration and setting information visible to the browser. Browser fingerprinting is like the fingerprints on our human hands, with individual recognition, except that at this stage, browser fingerprinting identifies the browser.</p>
<p>The fingerprints on the human hand are unique because each fingerprint has a unique pattern, which is formed by the bumpy skin. The differences in the fingerprint patterns of each person create their unique characteristics. The same is true for browser fingerprints. We obtain the information that identifies the browser and perform some calculations to get a value, which is the browser fingerprint. The identifier can be UA, time zone, geographic location or the language you use, etc. The information you choose determines the accuracy of your browser fingerprint.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images1/2022/08/15/a003213715d14b9f9bbc210e9435db76.png" alt="browser fingerprint"></p>
<p>For websites, there is no real value in getting a browser fingerprint; what is really valuable is the user information corresponding to this browser fingerprint. As a website webmaster, collecting user browser fingerprint and recording user&rsquo;s operation is a valuable action, especially for scenarios where there is no user identity. For example, on a content distribution site, user A likes to browse secondary content, and by recording this interest through the browser fingerprint, then the next time the user can push secondary information to user A without logging in. At a time when personal PCs are so popular, this is also a way to distribute content.</p>
<p>For users, establishing a link between your personal online behavior and your browser fingerprint is more or less an invasion of privacy, especially if it associates your browser fingerprint with real user information. Browser fingerprinting is essentially an invasion of privacy. In most cases, you do not know that you are being tracked. Even if you do know, it can be difficult to prevent.</p>
<h3 id="the-value-of-browser-fingerprinting">The value of browser fingerprinting</h3>
<p>In theory, with no login and no persistent cookies read or stored in the browser, no access to the client&rsquo;s IP, or switching between browsers on the same device, we can still fully or partially identify individual devices through browser fingerprinting.</p>
<ul>
<li>enable service providers to detect and prevent identity theft and some fraud</li>
<li>Comprise a long-term record of an individual&rsquo;s browsing history (and provide targeted advertising or even launch corresponding attacks on the target)</li>
</ul>
<p>Main scenarios.</p>
<ul>
<li>Targeted ad push. Browse a certain product on a website, learn about the product information, but do not place an order to buy it, or even perform a login operation. When you visit other websites with the same computer two days later, you find many advertisements for similar products.</li>
<li>Assist in recognizing the same device. In a certain blog you have multiple accounts (water army), these accounts exist to refresh the popularity of a post or to guide public opinion. Even if you clear the cookies, local cache, reopen the router or even use vpn to do the operation when you switch accounts, the management may still know that it is the same person operating and thus be cracked down.</li>
</ul>
<h3 id="development-of-browser-fingerprinting">Development of Browser Fingerprinting</h3>
<p>The development of browser fingerprinting technology, like most technologies, did not happen overnight. The existing generations of browser fingerprinting technology are as follows.</p>
<ul>
<li>The first generation was stateful and focused on the user&rsquo;s cookie and evercookie, requiring the user to be logged in to get valid information.</li>
<li>The second generation has the concept of browser fingerprinting, by increasing the value of browser features to make the user more distinguishable, such as UA, browser plug-in information, etc.</li>
<li>The third generation is already focused on people, by collecting users&rsquo; behavior and habits to build feature values and even models for users, which can realize real tracking technology. However, the implementation is currently more complicated and still under exploration.</li>
</ul>
<p>At present, the tracking technology of browser fingerprint can be considered to enter the 2.5 generation, so to say because the problem of cross-browser fingerprint recognition is still not solved.</p>
<h2 id="capture-of-browser-fingerprints">Capture of browser fingerprints</h2>
<p>Information entropy (entropy) is the average amount of information contained in each message received. Higher information entropy means more information can be transmitted, and lower information entropy means less information is transmitted. The browser fingerprint is a combination of information about the features of many browsers, in which the information entropy of feature values varies. Therefore, fingerprints are also divided into basic and advanced fingerprints.</p>
<h3 id="browser-basic-fingerprint">Browser Basic Fingerprint</h3>
<p>Basic fingerprint is a feature that any browser has, such as hardware type (Apple), operating system (Mac OS), user agent, system font, language, screen resolution, browser plug-ins (Flash, Silverlight, Java, etc), browser extensions, browser settings (Do-Not- Track, etc), Browser GMT Offset, etc. These fingerprints are &ldquo;similar&rdquo; to human height, age, etc., and have a high probability of conflict, so they can only be used as auxiliary identification.</p>
<p>Browser feature fingerprint acquisition.</p>
<table>
<thead>
<tr>
<th>Fingerprint content</th>
<th>Method of obtaining fingerprints</th>
</tr>
</thead>
<tbody>
<tr>
<td>userAgent</td>
<td><code>navigator.userAgent</code></td>
</tr>
<tr>
<td>Language of the browser</td>
<td><code>navigator.language</code></td>
</tr>
<tr>
<td>Browser plug-ins</td>
<td><code>Array.from(navigatorObj.plugins).map(item =&gt; item.name).join(',')</code></td>
</tr>
</tbody>
</table>
<p>System characteristics fingerprint acquisition.</p>
<table>
<thead>
<tr>
<th>Fingerprint content</th>
<th>Method of acquiring fingerprints</th>
</tr>
</thead>
<tbody>
<tr>
<td>operating system</td>
<td><code>navigator.platform</code></td>
</tr>
</tbody>
</table>
<p>Time zone feature fingerprint acquisition.</p>
<table>
<thead>
<tr>
<th>Fingerprint content</th>
<th>Method of acquiring fingerprints</th>
</tr>
</thead>
<tbody>
<tr>
<td>Time difference between Greenwich Mean Time and Local Time</td>
<td>new Date().getTimezoneOffset()</td>
</tr>
<tr>
<td>Time-zone belongs to</td>
<td>You need to query the server to get the corresponding information</td>
</tr>
<tr>
<td>Area latitude and longitude</td>
<td>navigator.geolocation.getCurrentPosition(need to be called in https secure environment) or query the server to get the corresponding information</td>
</tr>
<tr>
<td>Geographic area name</td>
<td>need to query the server for the corresponding information</td>
</tr>
<tr>
<td>IP address</td>
<td>You need to query the server for the corresponding information</td>
</tr>
</tbody>
</table>
<p>Hardware feature fingerprint acquisition.</p>
<table>
<thead>
<tr>
<th>Fingerprint content</th>
<th>Method of obtaining fingerprints</th>
</tr>
</thead>
<tbody>
<tr>
<td>The maximum number of simultaneous touches the device can support</td>
<td><code>navigator.maxTouchPoints</code></td>
</tr>
<tr>
<td>Number of available logical processor cores</td>
<td><code>navigator.hardwareConcurrency</code></td>
</tr>
<tr>
<td>Device screen width, height and color information</td>
<td><code>${screen.width}*${screen.height}*${screen.colorDepth}</code></td>
</tr>
</tbody>
</table>
<h3 id="browser-advanced-fingerprinting">Browser Advanced Fingerprinting</h3>
<p>Ordinary fingerprints are not enough to distinguish unique individuals, and this is where advanced fingerprints are needed to narrow down the scope even further and even generate a unique cross-browser identity. The individual pieces of information used to produce the fingerprint have a greater or lesser weight, and those with greater information entropy will have a greater weight.</p>
<h4 id="canvas-fingerprint">Canvas Fingerprint</h4>
<p>Canvas is a dynamic drawing tag in HTML5, which can also be used to generate images or process images. Even if the same elements are drawn using Canvas, the results obtained by canvas when converting the same text to images are different due to system differences, different font rendering engines, different algorithms for anti-aliasing, sub-pixel rendering, etc.</p>
<p>Since fingerprinting is mainly based on the browser, operating system and installed graphics hardware, it is still not possible to fully uniquely identify the user (the repetition rate is very low).</p>
<p>The implementation code is roughly: render some text on canvas and convert it out with toDataURL, even if privacy mode is turned on you can get the same value.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">getCanvasFingerprint</span> <span class="p">()</span> <span class="p">{</span>    
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">);</span>    
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">&#34;2d&#34;</span><span class="p">);</span>    
</span></span><span class="line"><span class="cl">    <span class="nx">context</span><span class="p">.</span><span class="nx">font</span> <span class="o">=</span> <span class="s2">&#34;18pt Arial&#34;</span><span class="p">;</span>    
</span></span><span class="line"><span class="cl">    <span class="nx">context</span><span class="p">.</span><span class="nx">textBaseline</span> <span class="o">=</span> <span class="s2">&#34;top&#34;</span><span class="p">;</span>    
</span></span><span class="line"><span class="cl">    <span class="nx">context</span><span class="p">.</span><span class="nx">fillText</span><span class="p">(</span><span class="s2">&#34;Hello, user.&#34;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>    
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">toDataURL</span><span class="p">(</span><span class="s2">&#34;image/jpeg&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">getCanvasFingerprint</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Then the obtained canvasImageData is passed through the hash algorithm to come up with a unique value (md5 or sha256, etc.), which is the canvas fingerprint we have obtained.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">sha256</span> <span class="nx">from</span> <span class="s1">&#39;crypto-js/sha256&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">canvasFinger</span> <span class="o">=</span> <span class="nx">sha256</span><span class="p">(</span><span class="nx">canvasImageData</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="webgl-fingerprinting">WebGL Fingerprinting</h4>
<p>WebGL (Web Graphics Library) is a JavaScript API that renders high-performance interactive 3D and 2D graphics in any compatible Web browser without the use of plug-ins. WebGL does this by introducing a very consistent API with OpenGL ES 2.0 that can be used in HTML5 elements. This consistency allows the API to take advantage of the hardware graphics acceleration provided by the user&rsquo;s device. Web sites can use WebGL to identify device fingerprints, and fingerprint production can generally be done in two ways.</p>
<ul>
<li>WebGL reports, where the full WebGL browser report form is available and detectable. In some cases, it will be converted to a hash for faster analysis.</li>
<li>WebGL images, rendered and converted to hashes of hidden 3D images. This method generates unique values for different combinations of devices and their drivers, since the final result depends on the hardware device performing the computation. This way unique values are generated for different combinations of devices and drivers.</li>
</ul>
<p>The principle of generating WebGL fingerprints is that you first need to draw a gradient object with shaders (shaders) and convert this image to a Base64 string. Then enumerate all the WebGL extensions and features and add them to the Base64 string, resulting in a huge string that can be very unique on each device.</p>
<p>For example the fingerprint2js library&rsquo;s WebGL fingerprint production approach.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// Part of the code 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">gl</span> <span class="o">=</span> <span class="nx">getWebglCanvas</span><span class="p">()</span>    
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">gl</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="kc">null</span> <span class="p">}</span>    
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">[]</span>    
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">vShaderTemplate</span> <span class="o">=</span> <span class="s1">&#39;attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">fShaderTemplate</span> <span class="o">=</span> <span class="s1">&#39;precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}&#39;</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">vertexPosBuffer</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createBuffer</span><span class="p">()</span>    
</span></span><span class="line"><span class="cl"><span class="nx">gl</span><span class="p">.</span><span class="nx">bindBuffer</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="nx">vertexPosBuffer</span><span class="p">)</span>    
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">vertices</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Float32Array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.26</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.732134444</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="c1">// Creates and initializes the data storage area of the Buffer object.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">gl</span><span class="p">.</span><span class="nx">bufferData</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">ARRAY_BUFFER</span><span class="p">,</span> <span class="nx">vertices</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">STATIC_DRAW</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="nx">vertexPosBuffer</span><span class="p">.</span><span class="nx">itemSize</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl"><span class="nx">vertexPosBuffer</span><span class="p">.</span><span class="nx">numItems</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl"><span class="c1">// Create and initialize a WebGLProgram object.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">program</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createProgram</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="c1">// Creating shader objects
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">vshader</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createShader</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">VERTEX_SHADER</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// The next two lines configure the shader 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">gl</span><span class="p">.</span><span class="nx">shaderSource</span><span class="p">(</span><span class="nx">vshader</span><span class="p">,</span> <span class="nx">vShaderTemplate</span><span class="p">)</span>  <span class="c1">// Set shader code  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">gl</span><span class="p">.</span><span class="nx">compileShader</span><span class="p">(</span><span class="nx">vshader</span><span class="p">)</span> <span class="c1">// Compile a shader to be used by the WebGLProgram object
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">fshader</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">createShader</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">FRAGMENT_SHADER</span><span class="p">)</span>   
</span></span><span class="line"><span class="cl"><span class="nx">gl</span><span class="p">.</span><span class="nx">shaderSource</span><span class="p">(</span><span class="nx">fshader</span><span class="p">,</span> <span class="nx">fShaderTemplate</span><span class="p">)</span>    
</span></span><span class="line"><span class="cl"><span class="nx">gl</span><span class="p">.</span><span class="nx">compileShader</span><span class="p">(</span><span class="nx">fshader</span><span class="p">)</span>    
</span></span><span class="line"><span class="cl"><span class="c1">// Add pre-defined vertex shaders and fragment shaders  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">gl</span><span class="p">.</span><span class="nx">attachShader</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="nx">vshader</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">gl</span><span class="p">.</span><span class="nx">attachShader</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="nx">fshader</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="c1">// Linking WebGLProgram objects   
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">gl</span><span class="p">.</span><span class="nx">linkProgram</span><span class="p">(</span><span class="nx">program</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// The defined WebGLProgram object is added to the current rendering state  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">gl</span><span class="p">.</span><span class="nx">useProgram</span><span class="p">(</span><span class="nx">program</span><span class="p">)</span>    
</span></span><span class="line"><span class="cl"><span class="nx">program</span><span class="p">.</span><span class="nx">vertexPosAttrib</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getAttribLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;attrVertex&#39;</span><span class="p">)</span>    
</span></span><span class="line"><span class="cl"><span class="nx">program</span><span class="p">.</span><span class="nx">offsetUniform</span> <span class="o">=</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">getUniformLocation</span><span class="p">(</span><span class="nx">program</span><span class="p">,</span> <span class="s1">&#39;uniformOffset&#39;</span><span class="p">)</span>                           <span class="nx">gl</span><span class="p">.</span><span class="nx">enableVertexAttribArray</span><span class="p">(</span><span class="nx">program</span><span class="p">.</span><span class="nx">vertexPosArray</span><span class="p">)</span>    
</span></span><span class="line"><span class="cl"><span class="nx">gl</span><span class="p">.</span><span class="nx">vertexAttribPointer</span><span class="p">(</span><span class="nx">program</span><span class="p">.</span><span class="nx">vertexPosAttrib</span><span class="p">,</span> <span class="nx">vertexPosBuffer</span><span class="p">.</span><span class="nx">itemSize</span><span class="p">,</span> <span class="nx">gl</span><span class="p">.</span><span class="nx">FLOAT</span><span class="p">,</span> <span class="o">!</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    
</span></span><span class="line"><span class="cl"><span class="nx">gl</span><span class="p">.</span><span class="nx">uniform2f</span><span class="p">(</span><span class="nx">program</span><span class="p">.</span><span class="nx">offsetUniform</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">// Drawing elements from vector arrays  
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">gl</span><span class="p">.</span><span class="nx">drawArrays</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">TRIANGLE_STRIP</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">vertexPosBuffer</span><span class="p">.</span><span class="nx">numItems</span><span class="p">)</span>    
</span></span><span class="line"><span class="cl"><span class="k">try</span> <span class="p">{</span>        
</span></span><span class="line"><span class="cl">    <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">gl</span><span class="p">.</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">toDataURL</span><span class="p">())</span>    
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>        
</span></span><span class="line"><span class="cl">    <span class="cm">/* .toDataURL may be absent or broken (blocked by extension) */</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="audio-fingerprinting">Audio Fingerprinting</h4>
<p>AudioContext fingerprint is similar to Canvas also based on the difference of hardware device or software to generate different audio output, and then calculate to get different hash to use as a flag.</p>
<ul>
<li>Method 1: Generate audio stream (triangle wave), perform FFT transform on it, and calculate SHA value as fingerprint.</li>
<li>Method 2: Generate audio information stream (sine wave), perform dynamic compression process, and calculate MD5 value.</li>
</ul>
<p>Both methods are cleared before the audio is output to the audio device, and the user is simply unaware that the fingerprint has been obtained.</p>
<p>Take fingerprintjs2&rsquo;s audio fingerprint source code as an example.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">each</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">iterator</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">forEach</span> <span class="o">&amp;&amp;</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">forEach</span> <span class="o">===</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">forEach</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">obj</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">iterator</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="o">+</span><span class="nx">obj</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">iterator</span><span class="p">(</span><span class="nx">obj</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">obj</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">if</span> <span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">key</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="nx">iterator</span><span class="p">(</span><span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">],</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">obj</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">AudioContext</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">OfflineAudioContext</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">webkitOfflineAudioContext</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AudioContext</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">44100</span><span class="p">,</span> <span class="mi">44100</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">oscillator</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">createOscillator</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nx">oscillator</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s1">&#39;triangle&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nx">oscillator</span><span class="p">.</span><span class="nx">frequency</span><span class="p">.</span><span class="nx">setValueAtTime</span><span class="p">(</span><span class="mi">10000</span><span class="p">,</span> <span class="nx">context</span><span class="p">.</span><span class="nx">currentTime</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">compressor</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">createDynamicsCompressor</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nx">each</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">  <span class="p">[</span><span class="s1">&#39;threshold&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">50</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">[</span><span class="s1">&#39;knee&#39;</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">[</span><span class="s1">&#39;ratio&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">[</span><span class="s1">&#39;reduction&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">[</span><span class="s1">&#39;attack&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="p">[</span><span class="s1">&#39;release&#39;</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">compressor</span><span class="p">[</span><span class="nx">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">compressor</span><span class="p">[</span><span class="nx">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]].</span><span class="nx">setValueAtTime</span> <span class="o">===</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">compressor</span><span class="p">[</span><span class="nx">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]].</span><span class="nx">setValueAtTime</span><span class="p">(</span><span class="nx">item</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">context</span><span class="p">.</span><span class="nx">currentTime</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">oscillator</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">compressor</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">compressor</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">destination</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">oscillator</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">context</span><span class="p">.</span><span class="nx">startRendering</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">audioTimeoutId</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="s1">&#39;Audio fingerprint timed out. Please report bug at https://github.com/Valve/fingerprintjs2 with your user agent: &#34;&#39;</span> <span class="o">+</span> <span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span> <span class="o">+</span> <span class="s1">&#39;&#34;.&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">context</span><span class="p">.</span><span class="nx">oncomplete</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">context</span> <span class="o">=</span> <span class="kc">null</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">done</span><span class="p">(</span><span class="s1">&#39;audioTimeout&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">},</span> <span class="mi">100</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">context</span><span class="p">.</span><span class="nx">oncomplete</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">audioTimeoutId</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">audioFingerprint</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">renderedBuffer</span><span class="p">.</span><span class="nx">getChannelData</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">slice</span><span class="p">(</span><span class="mi">4500</span><span class="p">,</span> <span class="mi">5000</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">acc</span><span class="p">,</span> <span class="nx">val</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">acc</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">},</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">toString</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nx">oscillator</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nx">compressor</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nx">audioFingerprintHash</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">sha256</span><span class="p">(</span><span class="nx">audioFingerprint</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="webrtc">WebRTC</h4>
<p>WebRTC (Web Real Time Communication), which allows browsers to have the ability to communicate in real time with audio and video, provides three main APIs to allow JS to obtain and exchange audio and video data in real time, MediaStream, RTCPeerConnection and RTCDataChannel. Of course, if you want to use WebRTC to get the ability to communicate, the user&rsquo;s real IP will have to be exposed (NAT penetration), so RTCPeerConnection provides such an API, the direct use of JS can get the user&rsquo;s IP address.</p>
<h3 id="fingerprint-calculation">Fingerprint calculation</h3>
<p>In addition to the fingerprint from http, it is also possible to get the browser feature information by other means, and some feasible feature values are displayed in this document (<a href="https://panopticlick.eff.org/about">https://panopticlick.eff.org/about</a>).</p>
<ul>
<li>The user agent string for each browser</li>
<li>HTTP ACCEPT header sent by the browser</li>
<li>Screen resolution and color depth</li>
<li>System settings to time zone</li>
<li>Browser extensions/plug-ins installed in the browser, such as Quicktime, Flash, Java, or Acrobat, and the versions of those plug-ins</li>
<li>Fonts installed on the computer, as reported by Flash or Java.</li>
<li>Whether the browser executes JavaScript scripts</li>
<li>Whether or not the browser can seed various cookies and &ldquo;super cookies&rdquo;</li>
<li>Hashing of images generated by Canvas fingerprinting</li>
<li>Hash of images generated by WebGL fingerprinting</li>
<li>Whether the browser is set to &ldquo;Do Not Track&rdquo;</li>
<li>System platform (e.g. Win32, Linux x86)</li>
<li>System language (e.g., cn, en-US)</li>
<li>Whether the browser supports touch screen</li>
</ul>
<p>After getting these values some <a href="https://www.eff.org/deeplinks/2010/01/primer-information-theory-and-privacy">operations</a> can be performed to get the specific information entropy of the browser fingerprint and the uuid of the browser.</p>
<p>The following figure shows the information entropy, repetition probability and specific values of several feature values.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images1/2022/08/15/86b1345b7b7041638c85661d2b4bbccb.png" alt="Information entropy, repetition probability and specific values of several eigenvalues"></p>
<p>Combining the above fingerprint information can greatly reduce the collision rate and improve the accuracy of client-side uuid. Fingerprint&rsquo;s also have the weight of weight, in the paper &ldquo;<a href="http://yinzhicao.org/TrackingFree/crossbrowsertracking_NDSS17.pdf">Cross-Browser Fingerprinting via OS and Hardware Level Features</a>&rdquo; is more detailed study of the information entropy and stability of each indicator.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images1/2022/08/15/f6aa54fa8fc7407a9cfe1d93aec4355b.png" alt="Cross-Browser Fingerprinting via OS and Hardware Level Features"></p>
<p>From that paper, we can see that the information entropy of time zone, screen resolution and color depth, Canvas, and webGL are weighted more heavily on cross-browser fingerprinting.</p>
<h4 id="cross-browser-fingerprinting">Cross-Browser Fingerprinting</h4>
<p>In summary the browser fingerprints mentioned above are obtained from the same browser. However, many feature values are unstable, for example, UA and canvas fingerprints will open completely differently in different browsers on the same device. The same set of browser fingerprinting algorithms will not be available in different browsers.</p>
<p>Cross-browser fingerprinting is a stable browser feature that can obtain the same or approximate values even in different browsers.</p>
<p>Cross-browser fingerprinting has also been studied.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images1/2022/08/15/6f0309691a6949cfa41421097cf8bb59.png" alt="Cross-browser fingerprinting"></p>
<p>The information entropy and stability of browser eigenvalues in single browser and cross-browser are listed, and the stability of canvas fingerprint mentioned in the above appeal is only 8.17%.</p>
<p>It is difficult for regular eigenvalues to maintain high stability with sufficient information.</p>
<p>Pick a few tables of values Task(a)~Task(r), List of fonts (JS), TimeZone and CPU Vritual cores, that match these features.</p>
<ul>
<li>Task(a)~Task(r), which is a kind of graphics card rendering (Rendering Tasks) image feature values. For example, Task(a) Texture, which is a test of the texture function in a regular fragment shader, by rendering a pixel with a random triple base color value, the fragment shader needs to insert points in the texture in order to map the texture to each point on the model, and this insertion algorithm is again inconsistent across different graphics cards. If the texture is more variable, then the more significant the difference will be, and we can make a differentiation for this graphics card by recording this difference.</li>
<li>List of fonts (JS), which gets the fonts supported by the page through JS. List of fonts is the value of getting the fonts supported by the page through JS and how to draw the fonts, by measuring the fill size of the text HTML elements with different fonts, to make a distinction with other devices.</li>
<li>TimeZone, the time zone, this is better understood, since it is the same device then the time zone should also be the same.</li>
<li>CUP Vritual cores is the number of CPU cores, the easiest way to get it is through a hardwareConcurrency.</li>
</ul>
<p>Although this API is not supported in low version browsers, you can also get it through this polyfill. The principle of implementation is roughly borrowing the ability of Web Worker, listening to the time of the payload, and the number of kernels can be obtained when the computation reaches the maximum concurrency of the hardware.</p>
<h2 id="browser-fingerprinting-confrontation">Browser Fingerprinting Confrontation</h2>
<p>It&rsquo;s almost 100% possible to locate a user by browser fingerprinting if you don&rsquo;t have enough expertise or change browser information very often, which of course doesn&rsquo;t have to be all bad.</p>
<ul>
<li>The privacy leaked is very one-sided, and can only say that it leaks part of the user&rsquo;s behavior when browsing the web.</li>
<li>Not enough value, user behavior does not correspond to actual accounts or specific people, generating limited value.</li>
<li>Beneficial use, using browser fingerprinting can isolate some of the blackmail users and prevent swiping or some malicious behaviors.</li>
</ul>
<p>But even so, there are some measures that can be taken to prevent browser fingerprinting.</p>
<p>Anti-browser fingerprint tracking simply breaks the three properties of fingerprint tracking described above.</p>
<ul>
<li>Fingerprint determinism. No effective method has been found to produce identical fingerprints for two browser platforms;</li>
<li>Ease of access to fingerprints. Tracking can be slowed down using various browser settings or plug-ins, but this approach may affect the user experience, e.g., the inability to use cookies and JavaScript;</li>
<li>Fingerprint stability. Dr. Pierre Laprise, a researcher from INRIA Rennes University, France, proposed a solution that allows the formation of a dynamic browsing platform that generates a different fingerprint each time the user browses the web.</li>
</ul>
<p>And Pierre breaks the stability of fingerprints by two methods.</p>
<ul>
<li>Blurring the fingerprints of actual devices by automatically combining and reconfiguring multiple levels of software components using virtualization and modular architecture to generate random browsing environments that generate random fingerprints for each browsing session.</li>
<li>Break the stability of very specific fingerprinting technologies (Canvas, Audio, JavaScript engines) by introducing enough noise into the fingerprinting process so that trackers cannot bind fresh fingerprints to old ones, thus making tracking across multiple sessions impossible.</li>
</ul>
<h3 id="do-not-track">Do Not Track</h3>
<p>In the http header you can declare a flag &ldquo;DNT&rdquo; which means &ldquo;Do Not Track&rdquo;, if the value is 1 it means do not track my web page behavior, 0 means you can track it. Even without cookies you can use this flag to tell the server that I don&rsquo;t want to be tracked and not to record my behavior.</p>
<p>The bad news is that most sites do not currently follow this convention and completely ignore the &ldquo;Do Not Track&rdquo; signal.</p>
<p>The EFF provides such a tool, Privacy Badger, which is an ad blocker in the form of a browser plug-in. Companies that comply with this agreement are whitelisted on this ad blocker and allowed to display ads, thus motivating more companies to comply with &ldquo;Do Not Track&rdquo; in order to display ads at all.</p>
<p>Personally, I think this is a good direction to take, as if the user uses this tool, the site will choose between the interests of the user&rsquo;s behavior before taking it, thus mitigating the risk of privacy breaches.</p>
<p>More information about Privacy Badger can be viewed here (<a href="https://www.eff.org/privacybadger">https://www.eff.org/privacybadger</a>).</p>
<h3 id="tor-browser">Tor Browser</h3>
<p>With the above understanding of browser fingerprinting, it is easy to see that the more features your browser has, the easier it is to track. On the contrary, if you want to deliberately hide or magically alter certain browser features, then congratulations, your browser may have a unique browser fingerprint that doesn&rsquo;t even need to be calculated deliberately, and can directly distinguish you from other users.</p>
<p>So the effective way is to make the feature value as popular as possible. For example, if Window 10 + Chrome is the most widely used combination on the market, then changing your UA to this combination is an effective way to do this, while trying to avoid websites that get very high entropy features, such as canvas fingerprints.</p>
<p>Tor Browser has done a lot of work on this to prevent them from being used to track Tor users, and in response to Panopticlick and other fingerprinting experiments, Tor Browser now includes patches to prevent font fingerprinting (by limiting the fonts a site can use) and Canvas fingerprinting (by detecting the reading of HTML5 Canvas objects and requiring user approval) to prevent, for example, the code above to obtain Canvas fingerprints pops up on Tor with the following warning.</p>
<p><img src="https://cdn.jsdelivr.net/gh/b0xt/sobyte-images1/2022/08/15/3312884f07664b4e93b9eb6b32d6bc7f.png" alt="Warning pops up on Tor"></p>
<p>It is also possible to configure the Tor Browser to actively block JavaScript. in summary, these measures make the Tor Browser a powerful defensive tool against fingerprinting. But what such a secure browser sacrifices is its speed, and accessing pages with Tor Browser can be much slower than with commercially available browsers. Try Tor Browser if you are interested.</p>
<h3 id="disabling-js">Disabling JS</h3>
<p>The most effective way to stop a site from capturing browser information is to disable JavaScript on the browser. JavaScript is a front-end scripting language that can be used to make a site responsive and provide a better user experience. However, they are the primary tool sites use to obtain browser fingerprint information. If JavaScript is disabled, the site will not be able to create a browser fingerprint because only a few pieces of browser information (such as the User-Agent string name) and some other information will be available.</p>
<p>For browser fingerprinting, the more information that is available, the better the system will perform in uniquely identifying the browser. However, disabling JavaScript means that you will not be able to access certain sites that rely heavily on JavaScript. However, this will result in a larger portion of the page being unavailable.</p>
<p>And unfortunately, even if JS is disabled it is still possible to take browser information through CSS, e.g.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-css" data-lang="css"><span class="line"><span class="cl"><span class="p">@</span><span class="k">media</span><span class="o">(</span><span class="nt">device-width</span><span class="o">:</span> <span class="nt">1080px</span><span class="o">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">body</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">background</span><span class="p">:</span> <span class="nb">url</span><span class="p">(</span><span class="s2">&#34;https://example.org/1080.png&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>You can look at the request logs of 1080.png images in the server to know which users&rsquo; screens are 1080px.</p>

    </div>

    
<footer class="post-footer">
      
      <nav class="post-nav">
        <a class="prev" href="/post/2022-08/linux-anonymous-pages-reverse-mapping/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Reverse mapping of anonymous pages in Linux</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2022-08/ebpf/">
            <span class="next-text nav-default">eBPF, a Linux kernel monitoring technology </span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://www.sobyte.net/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021 - 
    2022<span class="heart"><i class="iconfont icon-heart"></i></span><span></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>



<script type="text/javascript" src="/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>








</body>
</html>
